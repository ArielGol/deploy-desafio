var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function e(t){return t&&t.__esModule?t.default:t}function n(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var r={},i={},o=t.parcelRequire014c;function a(t){return t=t||[],Array.isArray(t)?t:[t]}function s(t){return`[Vaadin.Router] ${t}`}null==o&&((o=function(t){if(t in r)return r[t].exports;if(t in i){var e=i[t];delete i[t];var n={id:t,exports:{}};return r[t]=n,e.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){i[t]=e},t.parcelRequire014c=o),o.register("f504n",(function(t,e){var n=o("23YZo"),r=o("fiQnm"),i=e&&!e.nodeType&&e,a=i&&t&&!t.nodeType&&t,s=a&&a.exports===i?n.Buffer:void 0,u=(s?s.isBuffer:void 0)||r;t.exports=u})),o.register("23YZo",(function(t,e){var n=o("ljJ8G"),r="object"==typeof self&&self&&self.Object===Object&&self,i=n||r||Function("return this")();t.exports=i})),o.register("ljJ8G",(function(e,n){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r})),o.register("fiQnm",(function(t,e){t.exports=function(){return!1}})),o.register("jIny1",(function(t,e){var n=o("ljJ8G"),r=e&&!e.nodeType&&e,i=r&&t&&!t.nodeType&&t,a=i&&i.exports===r&&n.process,s=function(){try{var t=i&&i.require&&i.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s}));const u=["module","nomodule"];function c(t){if(!t.match(/.+\.[m]?js$/))throw new Error(s(`Unsupported type for bundle "${t}": .js or .mjs expected.`))}function h(t){if(!t||!g(t.path))throw new Error(s('Expected route config to be an object with a "path" string property, or an array of such objects'));const e=t.bundle,n=["component","redirect","bundle"];if(!(v(t.action)||Array.isArray(t.children)||v(t.children)||d(e)||n.some((e=>g(t[e])))))throw new Error(s(`Expected route config "${t.path}" to include either "${n.join('", "')}" or "action" function but none found.`));if(e)if(g(e))c(e);else{if(!u.some((t=>t in e)))throw new Error(s('Expected route bundle to include either "nomodule" or "module" keys, or both'));u.forEach((t=>t in e&&c(e[t])))}t.redirect&&["bundle","component"].forEach((e=>{e in t&&console.warn(s(`Route config "${t.path}" has both "redirect" and "${e}" properties, and "redirect" will always override the latter. Did you mean to only use "${e}"?`))}))}function l(t){a(t).forEach((t=>h(t)))}function f(t,e){let n=document.head.querySelector('script[src="'+t+'"][async]');return n||(n=document.createElement("script"),n.setAttribute("src",t),"module"===e?n.setAttribute("type","module"):"nomodule"===e&&n.setAttribute("nomodule",""),n.async=!0),new Promise(((t,e)=>{n.onreadystatechange=n.onload=e=>{n.__dynamicImportLoaded=!0,t(e)},n.onerror=t=>{n.parentNode&&n.parentNode.removeChild(n),e(t)},null===n.parentNode?document.head.appendChild(n):n.__dynamicImportLoaded&&t()}))}function p(t,e){return!window.dispatchEvent(new CustomEvent(`vaadin-router-${t}`,{cancelable:"go"===t,detail:e}))}function d(t){return"object"==typeof t&&!!t}function v(t){return"function"==typeof t}function g(t){return"string"==typeof t}function m(t){const e=new Error(s(`Page not found (${t.pathname})`));return e.context=t,e.code=404,e}const y=new class{};function b(t){if(t.defaultPrevented)return;if(0!==t.button)return;if(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey)return;let e=t.target;const n=t.composedPath?t.composedPath():t.path||[];for(let t=0;t<n.length;t++){const r=n[t];if(r.nodeName&&"a"===r.nodeName.toLowerCase()){e=r;break}}for(;e&&"a"!==e.nodeName.toLowerCase();)e=e.parentNode;if(!e||"a"!==e.nodeName.toLowerCase())return;if(e.target&&"_self"!==e.target.toLowerCase())return;if(e.hasAttribute("download"))return;if(e.hasAttribute("router-ignore"))return;if(e.pathname===window.location.pathname&&""!==e.hash)return;const r=e.origin||function(t){const e=t.port,n=t.protocol;return`${n}//${"http:"===n&&"80"===e||"https:"===n&&"443"===e?t.hostname:t.host}`}(e);if(r!==window.location.origin)return;const{pathname:i,search:o,hash:a}=e;p("go",{pathname:i,search:o,hash:a})&&(t.preventDefault(),t&&"click"===t.type&&window.scrollTo(0,0))}const _={activate(){window.document.addEventListener("click",b)},inactivate(){window.document.removeEventListener("click",b)}};function w(t){if("vaadin-router-ignore"===t.state)return;const{pathname:e,search:n,hash:r}=window.location;p("go",{pathname:e,search:n,hash:r})}/Trident/.test(navigator.userAgent)&&!v(window.PopStateEvent)&&(window.PopStateEvent=function(t,e){e=e||{};var n=document.createEvent("Event");return n.initEvent(t,Boolean(e.bubbles),Boolean(e.cancelable)),n.state=e.state||null,n},window.PopStateEvent.prototype=window.Event.prototype);const I={activate(){window.addEventListener("popstate",w)},inactivate(){window.removeEventListener("popstate",w)}};var T=L,E=N,S=function(t,e){return R(N(t,e))},C=R,k=D,A=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function N(t,e){for(var n,r=[],i=0,o=0,a="",s=e&&e.delimiter||"/",u=e&&e.delimiters||"./",c=!1;null!==(n=A.exec(t));){var h=n[0],l=n[1],f=n.index;if(a+=t.slice(o,f),o=f+h.length,l)a+=l[1],c=!0;else{var p="",d=t[o],v=n[2],g=n[3],m=n[4],y=n[5];if(!c&&a.length){var b=a.length-1;u.indexOf(a[b])>-1&&(p=a[b],a=a.slice(0,b))}a&&(r.push(a),a="",c=!1);var _=""!==p&&void 0!==d&&d!==p,w="+"===y||"*"===y,I="?"===y||"*"===y,T=p||s,E=g||m;r.push({name:v||i++,prefix:p,delimiter:T,optional:I,repeat:w,partial:_,pattern:E?x(E):"[^"+P(T)+"]+?"})}}return(a||o<t.length)&&r.push(a+t.substr(o)),r}function R(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,r){for(var i="",o=r&&r.encode||encodeURIComponent,a=0;a<t.length;a++){var s=t[a];if("string"!=typeof s){var u,c=n?n[s.name]:void 0;if(Array.isArray(c)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but got array');if(0===c.length){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var h=0;h<c.length;h++){if(u=o(c[h],s),!e[a].test(u))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'"');i+=(0===h?s.prefix:s.delimiter)+u}}else if("string"!=typeof c&&"number"!=typeof c&&"boolean"!=typeof c){if(!s.optional)throw new TypeError('Expected "'+s.name+'" to be '+(s.repeat?"an array":"a string"));s.partial&&(i+=s.prefix)}else{if(u=o(String(c),s),!e[a].test(u))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but got "'+u+'"');i+=s.prefix+u}}else i+=s}return i}}function P(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function x(t){return t.replace(/([=!:$/()])/g,"\\$1")}function O(t){return t&&t.sensitive?"":"i"}function D(t,e,n){for(var r=(n=n||{}).strict,i=!1!==n.start,o=!1!==n.end,a=P(n.delimiter||"/"),s=n.delimiters||"./",u=[].concat(n.endsWith||[]).map(P).concat("$").join("|"),c=i?"^":"",h=0===t.length,l=0;l<t.length;l++){var f=t[l];if("string"==typeof f)c+=P(f),h=l===t.length-1&&s.indexOf(f[f.length-1])>-1;else{var p=f.repeat?"(?:"+f.pattern+")(?:"+P(f.delimiter)+"(?:"+f.pattern+"))*":f.pattern;e&&e.push(f),f.optional?f.partial?c+=P(f.prefix)+"("+p+")?":c+="(?:"+P(f.prefix)+"("+p+"))?":c+=P(f.prefix)+"("+p+")"}}return o?(r||(c+="(?:"+a+")?"),c+="$"===u?"$":"(?="+u+")"):(r||(c+="(?:"+a+"(?="+u+"))?"),h||(c+="(?="+a+"|"+u+")")),new RegExp(c,O(n))}function L(t,e,n){return t instanceof RegExp?function(t,e){if(!e)return t;var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return t}(t,e):Array.isArray(t)?function(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(L(t[i],e,n).source);return new RegExp("(?:"+r.join("|")+")",O(n))}(t,e,n):function(t,e,n){return D(N(t,n),e,n)}(t,e,n)}T.parse=E,T.compile=S,T.tokensToFunction=C,T.tokensToRegExp=k;const{hasOwnProperty:M}=Object.prototype,F=new Map;function j(t){try{return decodeURIComponent(t)}catch(e){return t}}function U(t,e,n,r,i){let o,a,s=0,u=t.path||"";return"/"===u.charAt(0)&&(n&&(u=u.substr(1)),n=!0),{next(c){if(t===c)return{done:!0};const h=t.__children=t.__children||t.children;if(!o&&(o=function(t,e,n,r,i){const o=`${t}|${n=!!n}`;let a=F.get(o);if(!a){const e=[];a={keys:e,pattern:T(t,e,{end:n,strict:""===t})},F.set(o,a)}const s=a.pattern.exec(e);if(!s)return null;const u=Object.assign({},i);for(let t=1;t<s.length;t++){const e=a.keys[t-1],n=e.name,r=s[t];void 0===r&&M.call(u,n)||(e.repeat?u[n]=r?r.split(e.delimiter).map(j):[]:u[n]=r?j(r):r)}return{path:s[0],keys:(r||[]).concat(a.keys),params:u}}(u,e,!h,r,i),o))return{done:!1,value:{route:t,keys:o.keys,params:o.params,path:o.path}};if(o&&h)for(;s<h.length;){if(!a){const r=h[s];r.parent=t;let i=o.path.length;i>0&&"/"===e.charAt(i)&&(i+=1),a=U(r,e.substr(i),n,o.keys,o.params)}const r=a.next(c);if(!r.done)return{done:!1,value:r.value};a=null,s++}return{done:!0}}}}function q(t){if(v(t.route.action))return t.route.action(t)}F.set("|false",{keys:[],pattern:/(?:)/});class V{constructor(t,e={}){if(Object(t)!==t)throw new TypeError("Invalid routes");this.baseUrl=e.baseUrl||"",this.errorHandler=e.errorHandler,this.resolveRoute=e.resolveRoute||q,this.context=Object.assign({resolver:this},e.context),this.root=Array.isArray(t)?{path:"",__children:t,parent:null,__synthetic:!0}:t,this.root.parent=null}getRoutes(){return[...this.root.__children]}setRoutes(t){l(t);const e=[...a(t)];this.root.__children=e}addRoutes(t){return l(t),this.root.__children.push(...a(t)),this.getRoutes()}removeRoutes(){this.setRoutes([])}resolve(t){const e=Object.assign({},this.context,g(t)?{pathname:t}:t),n=U(this.root,this.__normalizePathname(e.pathname),this.baseUrl),r=this.resolveRoute;let i=null,o=null,a=e;function s(t,u=i.value.route,c){const h=null===c&&i.value.route;return i=o||n.next(h),o=null,t||!i.done&&function(t,e){let n=e;for(;n;)if(n=n.parent,n===t)return!0;return!1}(u,i.value.route)?i.done?Promise.reject(m(e)):(a=Object.assign(a?{chain:a.chain?a.chain.slice(0):[]}:{},e,i.value),function(t,e){const{route:n,path:r}=e;if(n&&!n.__synthetic){const e={path:r,route:n};if(t.chain){if(n.parent){let e=t.chain.length;for(;e--&&t.chain[e].route&&t.chain[e].route!==n.parent;)t.chain.pop()}}else t.chain=[];t.chain.push(e)}}(a,i.value),Promise.resolve(r(a)).then((e=>null!=e&&e!==y?(a.result=e.result||e,a):s(t,u,e)))):(o=i,Promise.resolve(y))}return e.next=s,Promise.resolve().then((()=>s(!0,this.root))).catch((t=>{const e=function(t){let e=`Path '${t.pathname}' is not properly resolved due to an error.`;const n=(t.route||{}).path;return n&&(e+=` Resolution had failed on route: '${n}'`),e}(a);if(t?console.warn(e):t=new Error(e),t.context=t.context||a,t instanceof DOMException||(t.code=t.code||500),this.errorHandler)return a.result=this.errorHandler(t),a;throw t}))}static __createUrl(t,e){return new URL(t,e)}get __effectiveBaseUrl(){return this.baseUrl?this.constructor.__createUrl(this.baseUrl,document.baseURI||document.URL).href.replace(/[^\/]*$/,""):""}__normalizePathname(t){if(!this.baseUrl)return t;const e=this.__effectiveBaseUrl,n=this.constructor.__createUrl(t,e).href;return n.slice(0,e.length)===e?n.slice(e.length):void 0}}V.pathToRegexp=T;const{pathToRegexp:B}=V,K=new Map;function H(t,e,n){const r=e.name||e.component;if(r&&(t.has(r)?t.get(r).push(e):t.set(r,[e])),Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];i.parent=e,H(t,i,i.__children||i.children)}}function W(t,e){const n=t.get(e);if(n&&n.length>1)throw new Error(`Duplicate route with name "${e}". Try seting unique 'name' route properties.`);return n&&n[0]}function z(t){let e=t.path;return e=Array.isArray(e)?e[0]:e,void 0!==e?e:""}function G(t,e={}){if(!(t instanceof V))throw new TypeError("An instance of Resolver is expected");const n=new Map;return(r,i)=>{let o=W(n,r);if(!o&&(n.clear(),H(n,t.root,t.root.__children),o=W(n,r),!o))throw new Error(`Route "${r}" not found`);let a=K.get(o.fullPath);if(!a){let t=z(o),e=o.parent;for(;e;){const n=z(e);n&&(t=n.replace(/\/$/,"")+"/"+t.replace(/^\//,"")),e=e.parent}const n=B.parse(t),r=B.tokensToFunction(n),i=Object.create(null);for(let t=0;t<n.length;t++)g(n[t])||(i[n[t].name]=!0);a={toPath:r,keys:i},K.set(t,a),o.fullPath=t}let s=a.toPath(i,e)||"/";if(e.stringifyQueryParams&&i){const t={},n=Object.keys(i);for(let e=0;e<n.length;e++){const r=n[e];a.keys[r]||(t[r]=i[r])}const r=e.stringifyQueryParams(t);r&&(s+="?"===r.charAt(0)?r:`?${r}`)}return s}}let Q=[];function $(t,e){return t.classList.add(e),new Promise((n=>{if((t=>{const e=getComputedStyle(t).getPropertyValue("animation-name");return e&&"none"!==e})(t)){const r=t.getBoundingClientRect(),i=`height: ${r.bottom-r.top}px; width: ${r.right-r.left}px`;t.setAttribute("style",`position: absolute; ${i}`),((t,e)=>{const n=()=>{t.removeEventListener("animationend",n),e()};t.addEventListener("animationend",n)})(t,(()=>{t.classList.remove(e),t.removeAttribute("style"),n()}))}else t.classList.remove(e),n()}))}function Y(t){return null!=t}function X({pathname:t="",search:e="",hash:n="",chain:r=[],params:i={},redirectFrom:o,resolver:a},s){const u=r.map((t=>t.route));return{baseUrl:a&&a.baseUrl||"",pathname:t,search:e,hash:n,routes:u,route:s||u.length&&u[u.length-1]||null,params:i,redirectFrom:o,getUrl:(t={})=>nt(it.pathToRegexp.compile(rt(u))(Object.assign({},i,t)),a)}}function J(t,e){const n=Object.assign({},t.params);return{redirect:{pathname:e,from:t.pathname,params:n}}}function Z(t,e,n){if(v(t))return t.apply(n,e)}function tt(t,e,n){return r=>r&&(r.cancel||r.redirect)?r:n?Z(n[t],e,n):void 0}function et(t){if(t&&t.length){const e=t[0].parentNode;for(let n=0;n<t.length;n++)e.removeChild(t[n])}}function nt(t,e){const n=e.__effectiveBaseUrl;return n?e.constructor.__createUrl(t.replace(/^\//,""),n).pathname:t}function rt(t){return t.map((t=>t.path)).reduce(((t,e)=>e.length?t.replace(/\/$/,"")+"/"+e.replace(/^\//,""):t),"")}class it extends V{constructor(t,e){const n=document.head.querySelector("base"),r=n&&n.getAttribute("href");super([],Object.assign({baseUrl:r&&V.__createUrl(r,document.URL).pathname.replace(/[^\/]*$/,"")},e)),this.resolveRoute=t=>this.__resolveRoute(t);const i=it.NavigationTrigger;it.setTriggers.apply(it,Object.keys(i).map((t=>i[t]))),this.baseUrl,this.ready,this.ready=Promise.resolve(t),this.location,this.location=X({resolver:this}),this.__lastStartedRenderId=0,this.__navigationEventHandler=this.__onNavigationEvent.bind(this),this.setOutlet(t),this.subscribe(),this.__createdByRouter=new WeakMap,this.__addedByRouter=new WeakMap}__resolveRoute(t){const e=t.route;let n=Promise.resolve();v(e.children)&&(n=n.then((()=>e.children(function(t){const e=Object.assign({},t);return delete e.next,e}(t)))).then((t=>{Y(t)||v(e.children)||(t=e.children),function(t,e){if(!Array.isArray(t)&&!d(t))throw new Error(s(`Incorrect "children" value for the route ${e.path}: expected array or object, but got ${t}`));e.__children=[];const n=a(t);for(let t=0;t<n.length;t++)h(n[t]),e.__children.push(n[t])}(t,e)})));const r={redirect:e=>J(t,e),component:t=>{const e=document.createElement(t);return this.__createdByRouter.set(e,!0),e}};return n.then((()=>{if(this.__isLatestRender(t))return Z(e.action,[t,r],e)})).then((t=>{return Y(t)&&(t instanceof HTMLElement||t.redirect||t===y)?t:g(e.redirect)?r.redirect(e.redirect):e.bundle?(n=e.bundle,g(n)?f(n):Promise.race(u.filter((t=>t in n)).map((t=>f(n[t],t))))).then((()=>{}),(()=>{throw new Error(s(`Bundle not found: ${e.bundle}. Check if the file name is correct`))})):void 0;var n})).then((t=>Y(t)?t:g(e.component)?r.component(e.component):void 0))}setOutlet(t){t&&this.__ensureOutlet(t),this.__outlet=t}getOutlet(){return this.__outlet}setRoutes(t,e=!1){return this.__previousContext=void 0,this.__urlForName=void 0,super.setRoutes(t),e||this.__onNavigationEvent(),this.ready}render(t,e){const n=++this.__lastStartedRenderId,r=Object.assign({search:"",hash:""},g(t)?{pathname:t}:t,{__renderId:n});return this.ready=this.resolve(r).then((t=>this.__fullyResolveChain(t))).then((t=>{if(this.__isLatestRender(t)){const r=this.__previousContext;if(t===r)return this.__updateBrowserHistory(r,!0),this.location;if(this.location=X(t),e&&this.__updateBrowserHistory(t,1===n),p("location-changed",{router:this,location:this.location}),t.__skipAttach)return this.__copyUnchangedElements(t,r),this.__previousContext=t,this.location;this.__addAppearingContent(t,r);const i=this.__animateIfNeeded(t);return this.__runOnAfterEnterCallbacks(t),this.__runOnAfterLeaveCallbacks(t,r),i.then((()=>{if(this.__isLatestRender(t))return this.__removeDisappearingContent(),this.__previousContext=t,this.location}))}})).catch((t=>{if(n===this.__lastStartedRenderId)throw e&&this.__updateBrowserHistory(r),et(this.__outlet&&this.__outlet.children),this.location=X(Object.assign(r,{resolver:this})),p("error",Object.assign({router:this,error:t},r)),t})),this.ready}__fullyResolveChain(t,e=t){return this.__findComponentContextAfterAllRedirects(e).then((n=>{const r=n!==e?n:t,i=nt(rt(n.chain),n.resolver)===n.pathname,o=(t,e=t.route,n)=>t.next(void 0,e,n).then((n=>null===n||n===y?i?t:null!==e.parent?o(t,e.parent,n):n:n));return o(n).then((t=>{if(null===t||t===y)throw m(r);return t&&t!==y&&t!==n?this.__fullyResolveChain(r,t):this.__amendWithOnBeforeCallbacks(n)}))}))}__findComponentContextAfterAllRedirects(t){const e=t.result;return e instanceof HTMLElement?(function(t,e){e.location=X(t);const n=t.chain.map((t=>t.route)).indexOf(t.route);t.chain[n].element=e}(t,e),Promise.resolve(t)):e.redirect?this.__redirect(e.redirect,t.__redirectCount,t.__renderId).then((t=>this.__findComponentContextAfterAllRedirects(t))):e instanceof Error?Promise.reject(e):Promise.reject(new Error(s(`Invalid route resolution result for path "${t.pathname}". Expected redirect object or HTML element, but got: "${function(t){if("object"!=typeof t)return String(t);const e=Object.prototype.toString.call(t).match(/ (.*)\]$/)[1];return"Object"===e||"Array"===e?`${e} ${JSON.stringify(t)}`:e}(e)}". Double check the action return value for the route.`)))}__amendWithOnBeforeCallbacks(t){return this.__runOnBeforeCallbacks(t).then((e=>e===this.__previousContext||e===t?e:this.__fullyResolveChain(e)))}__runOnBeforeCallbacks(t){const e=this.__previousContext||{},n=e.chain||[],r=t.chain;let i=Promise.resolve();const o=()=>({cancel:!0}),a=e=>J(t,e);if(t.__divergedChainIndex=0,t.__skipAttach=!1,n.length){for(let e=0;e<Math.min(n.length,r.length)&&(n[e].route===r[e].route&&(n[e].path===r[e].path||n[e].element===r[e].element)&&this.__isReusableElement(n[e].element,r[e].element));e=++t.__divergedChainIndex);if(t.__skipAttach=r.length===n.length&&t.__divergedChainIndex==r.length&&this.__isReusableElement(t.result,e.result),t.__skipAttach){for(let e=r.length-1;e>=0;e--)i=this.__runOnBeforeLeaveCallbacks(i,t,{prevent:o},n[e]);for(let e=0;e<r.length;e++)i=this.__runOnBeforeEnterCallbacks(i,t,{prevent:o,redirect:a},r[e]),n[e].element.location=X(t,n[e].route)}else for(let e=n.length-1;e>=t.__divergedChainIndex;e--)i=this.__runOnBeforeLeaveCallbacks(i,t,{prevent:o},n[e])}if(!t.__skipAttach)for(let e=0;e<r.length;e++)e<t.__divergedChainIndex?e<n.length&&n[e].element&&(n[e].element.location=X(t,n[e].route)):(i=this.__runOnBeforeEnterCallbacks(i,t,{prevent:o,redirect:a},r[e]),r[e].element&&(r[e].element.location=X(t,r[e].route)));return i.then((e=>{if(e){if(e.cancel)return this.__previousContext.__renderId=t.__renderId,this.__previousContext;if(e.redirect)return this.__redirect(e.redirect,t.__redirectCount,t.__renderId)}return t}))}__runOnBeforeLeaveCallbacks(t,e,n,r){const i=X(e);return t.then((t=>{if(this.__isLatestRender(e)){return tt("onBeforeLeave",[i,n,this],r.element)(t)}})).then((t=>{if(!(t||{}).redirect)return t}))}__runOnBeforeEnterCallbacks(t,e,n,r){const i=X(e,r.route);return t.then((t=>{if(this.__isLatestRender(e)){return tt("onBeforeEnter",[i,n,this],r.element)(t)}}))}__isReusableElement(t,e){return!(!t||!e)&&(this.__createdByRouter.get(t)&&this.__createdByRouter.get(e)?t.localName===e.localName:t===e)}__isLatestRender(t){return t.__renderId===this.__lastStartedRenderId}__redirect(t,e,n){if(e>256)throw new Error(s(`Too many redirects when rendering ${t.from}`));return this.resolve({pathname:this.urlForPath(t.pathname,t.params),redirectFrom:t.from,__redirectCount:(e||0)+1,__renderId:n})}__ensureOutlet(t=this.__outlet){if(!(t instanceof Node))throw new TypeError(s(`Expected router outlet to be a valid DOM Node (but got ${t})`))}__updateBrowserHistory({pathname:t,search:e="",hash:n=""},r){if(window.location.pathname!==t||window.location.search!==e||window.location.hash!==n){const i=r?"replaceState":"pushState";window.history[i](null,document.title,t+e+n),window.dispatchEvent(new PopStateEvent("popstate",{state:"vaadin-router-ignore"}))}}__copyUnchangedElements(t,e){let n=this.__outlet;for(let r=0;r<t.__divergedChainIndex;r++){const i=e&&e.chain[r].element;if(i){if(i.parentNode!==n)break;t.chain[r].element=i,n=i}}return n}__addAppearingContent(t,e){this.__ensureOutlet(),this.__removeAppearingContent();const n=this.__copyUnchangedElements(t,e);this.__appearingContent=[],this.__disappearingContent=Array.from(n.children).filter((e=>this.__addedByRouter.get(e)&&e!==t.result));let r=n;for(let e=t.__divergedChainIndex;e<t.chain.length;e++){const i=t.chain[e].element;i&&(r.appendChild(i),this.__addedByRouter.set(i,!0),r===n&&this.__appearingContent.push(i),r=i)}}__removeDisappearingContent(){this.__disappearingContent&&et(this.__disappearingContent),this.__disappearingContent=null,this.__appearingContent=null}__removeAppearingContent(){this.__disappearingContent&&this.__appearingContent&&(et(this.__appearingContent),this.__disappearingContent=null,this.__appearingContent=null)}__runOnAfterLeaveCallbacks(t,e){if(e)for(let n=e.chain.length-1;n>=t.__divergedChainIndex&&this.__isLatestRender(t);n--){const r=e.chain[n].element;if(r)try{const n=X(t);Z(r.onAfterLeave,[n,{},e.resolver],r)}finally{this.__disappearingContent.indexOf(r)>-1&&et(r.children)}}}__runOnAfterEnterCallbacks(t){for(let e=t.__divergedChainIndex;e<t.chain.length&&this.__isLatestRender(t);e++){const n=t.chain[e].element||{},r=X(t,t.chain[e].route);Z(n.onAfterEnter,[r,{},t.resolver],n)}}__animateIfNeeded(t){const e=(this.__disappearingContent||[])[0],n=(this.__appearingContent||[])[0],r=[],i=t.chain;let o;for(let t=i.length;t>0;t--)if(i[t-1].route.animate){o=i[t-1].route.animate;break}if(e&&n&&o){const t=d(o)&&o.leave||"leaving",i=d(o)&&o.enter||"entering";r.push($(e,t)),r.push($(n,i))}return Promise.all(r).then((()=>t))}subscribe(){window.addEventListener("vaadin-router-go",this.__navigationEventHandler)}unsubscribe(){window.removeEventListener("vaadin-router-go",this.__navigationEventHandler)}__onNavigationEvent(t){const{pathname:e,search:n,hash:r}=t?t.detail:window.location;g(this.__normalizePathname(e))&&(t&&t.preventDefault&&t.preventDefault(),this.render({pathname:e,search:n,hash:r},!0))}static setTriggers(...t){var e;e=t,Q.forEach((t=>t.inactivate())),e.forEach((t=>t.activate())),Q=e}urlForName(t,e){return this.__urlForName||(this.__urlForName=G(this)),nt(this.__urlForName(t,e),this)}urlForPath(t,e){return nt(it.pathToRegexp.compile(t)(e),this)}static go(t){const{pathname:e,search:n,hash:r}=g(t)?this.__createUrl(t,"http://a"):t;return p("go",{pathname:e,search:n,hash:r})}}const ot=/\/\*\*\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i,at=window.Vaadin&&window.Vaadin.Flow&&window.Vaadin.Flow.clients;function st(t,e){if("function"!=typeof t)return;const n=ot.exec(t.toString());if(n)try{t=new Function(n[1])}catch(t){console.log("vaadin-development-mode-detector: uncommentAndRun() failed",t)}return t(e)}window.Vaadin=window.Vaadin||{};const ut=function(t,e){if(window.Vaadin.developmentMode)return st(t,e)};function ct(){}void 0===window.Vaadin.developmentMode&&(window.Vaadin.developmentMode=function(){try{return!!localStorage.getItem("vaadin.developmentmode.force")||["localhost","127.0.0.1"].indexOf(window.location.hostname)>=0&&(at?!function(){if(at){if(Object.keys(at).map((t=>at[t])).filter((t=>t.productionMode)).length>0)return!0}return!1}():!st((function(){return!0})))}catch(t){return!1}}());window.Vaadin=window.Vaadin||{},window.Vaadin.registrations=window.Vaadin.registrations||[],window.Vaadin.registrations.push({is:"@vaadin/router",version:"1.7.4"}),ut(ct),it.NavigationTrigger={POPSTATE:I,CLICK:_};var ht,lt={};ht=lt,Object.defineProperty(ht,"__esModule",{value:!0,configurable:!0}),n(lt,"firebase",(()=>qe)),n(lt,"default",(()=>Ve));var ft=function(t,e){return ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},ft(t,e)};function pt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ft(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var dt=function(){return dt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},dt.apply(this,arguments)};function vt(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function gt(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}Object.create;function mt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yt(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function bt(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _t=!1,wt=!1,It="${JSCORE_VERSION}",Tt=function(t,e){if(!t)throw Et(e)},Et=function(t){return new Error("Firebase Database ("+It+") INTERNAL ASSERT FAILED: "+t)},St=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},Ct={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(St(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var h=a<<4&240|s>>2;if(r.push(h),64!==u){var l=s<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},kt=function(t){try{return Ct.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function At(t){return Nt(void 0,t)}function Nt(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=Nt(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Rt=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=dt({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ct.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),Ct.encodeString(JSON.stringify(o),!1),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ot(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function Dt(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}}function Lt(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function Mt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ft(){return!0===_t||!0===wt}function jt(){return"indexedDB"in self&&null!=indexedDB}function Ut(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}function qt(){return!(!navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Vt=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,Bt.prototype.create),o}return pt(e,t),e}(Error),Bt=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?Kt(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new Vt(i,s,r);return u},t}();function Kt(t,e){return t.replace(Ht,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var Ht=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(t){return JSON.parse(t)}function zt(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=Wt(kt(o[0])||""),n=Wt(kt(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Qt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function $t(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function Yt(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xt(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Zt=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),a=1518500249):(o=u^c^h,a=1859775393):r<60?(o=u&c|h&(u|c),a=2400959708):(o=u^c^h,a=3395469782);i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function te(t,e){var n=new ee(t,e);return n.subscribe.bind(n)}var ee=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=ne),void 0===r.error&&(r.error=ne),void 0===r.complete&&(r.complete=ne);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function ne(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function ie(t,e){return t+" failed: "+e+" argument "}function oe(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(ie(t,e)+"must be a valid function.")}function ae(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(ie(t,e)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,Tt(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},ue=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function ce(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function he(t){return t&&t._delegate?t._delegate:t}var le=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),fe=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Rt;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(t){}try{for(var r=mt(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=yt(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return vt(this,void 0,void 0,(function(){var t;return gt(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(bt(bt([],yt(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),yt(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var s=mt(this.instancesDeferred.entries()),u=s.next();!u.done;u=s.next()){var c=yt(u.value,2),h=c[0],l=c[1];o===this.normalizeInstanceIdentifier(h)&&l.resolve(a)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=mt(i),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t="[DEFAULT]"),this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe,de=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new fe(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function ve(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge,me,ye=[];(me=ge||(ge={}))[me.DEBUG=0]="DEBUG",me[me.VERBOSE=1]="VERBOSE",me[me.INFO=2]="INFO",me[me.WARN=3]="WARN",me[me.ERROR=4]="ERROR",me[me.SILENT=5]="SILENT";var be,_e={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},we=ge.INFO,Ie=((pe={})[ge.DEBUG]="log",pe[ge.VERBOSE]="log",pe[ge.INFO]="info",pe[ge.WARN]="warn",pe[ge.ERROR]="error",pe),Te=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Ie[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,ve(["["+i+"]  "+t.name+":"],n))}},Ee=function(){function t(t){this.name=t,this._logLevel=we,this._logHandler=Te,this._userLogHandler=null,ye.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in ge))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?_e[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ve([this,ge.DEBUG],t)),this._logHandler.apply(this,ve([this,ge.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ve([this,ge.VERBOSE],t)),this._logHandler.apply(this,ve([this,ge.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ve([this,ge.INFO],t)),this._logHandler.apply(this,ve([this,ge.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ve([this,ge.WARN],t)),this._logHandler.apply(this,ve([this,ge.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ve([this,ge.ERROR],t)),this._logHandler.apply(this,ve([this,ge.ERROR],t))},t}();function Se(t){ye.forEach((function(e){e.setLogLevel(t)}))}function Ce(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=_e[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:ge[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=ye;r<i.length;r++){n(i[r])}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke,Ae=((be={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",be["bad-app-name"]="Illegal App name: '{$appName}",be["duplicate-app"]="Firebase App named '{$appName}' already exists",be["app-deleted"]="Firebase App named '{$appName}' already deleted",be["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",be["invalid-log-argument"]="First argument to `onLog` must be null or a function.",be),Ne=new Bt("app","Firebase",Ae),Re=((ke={})["@firebase/app"]="fire-core",ke["@firebase/analytics"]="fire-analytics",ke["@firebase/app-check"]="fire-app-check",ke["@firebase/auth"]="fire-auth",ke["@firebase/database"]="fire-rtdb",ke["@firebase/functions"]="fire-fn",ke["@firebase/installations"]="fire-iid",ke["@firebase/messaging"]="fire-fcm",ke["@firebase/performance"]="fire-perf",ke["@firebase/remote-config"]="fire-rc",ke["@firebase/storage"]="fire-gcs",ke["@firebase/firestore"]="fire-fst",ke["fire-js"]="fire-js",ke["firebase-wrapper"]="fire-js-all",ke),Pe=new Ee("@firebase/app"),xe=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=At(t),this.container=new de(e.name),this._addComponent(new le("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){Pe.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Ne.create("app-deleted",{appName:this.name_})},t}();xe.prototype.name&&xe.prototype.options||xe.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Oe(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw Ne.create("bad-app-name",{appName:String(a)});if(Qt(e,a))throw Ne.create("duplicate-app",{appName:a});var s=new t(n,o,r);return e[a]=s,s},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=Re[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Pe.warn(u.join(" "))}o(new le(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:Se,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Ne.create("invalid-log-argument");Ce(t,e)},apps:null,SDK_VERSION:"8.7.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!Qt(e,t=t||"[DEFAULT]"))throw Ne.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return Pe.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var s=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw Ne.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Nt(s,o.serviceProps),r[a]=s,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var h=c[u];e[h]._addComponent(o)}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De=function t(){var e=Oe(xe);return e.INTERNAL=dt(dt({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Nt(e,t)},createSubscribe:te,ErrorFactory:Bt,deepExtend:Nt}),e}(),Le=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Pe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Me=self.firebase.SDK_VERSION;Me&&Me.indexOf("LITE")>=0&&Pe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Fe=De.initializeApp;De.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Dt()&&Pe.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Fe.apply(void 0,t)};var je,Ue,qe=De;(je=qe).INTERNAL.registerComponent(new le("platform-logger",(function(t){return new Le(t)}),"PRIVATE")),je.registerVersion("@firebase/app","0.6.28",Ue),je.registerVersion("fire-js","");var Ve=qe;(function(){var e,n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var r=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t,e];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,e){if(e){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(e=e(o=i[t=t[t.length-1]]))!=o&&null!=e&&n(i,t,{configurable:!0,writable:!0,value:e})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=r.setTimeout;n.prototype.c=function(t){a(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=o(t),a=r.next();!a.done;a=r.next())i(a.value).Ra(e,n)}))},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).Ra(o(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var a=a||{},s=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function h(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function l(){}function f(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function p(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==f(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function g(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++y)}var m="closure_uid_"+(1e9*Math.random()>>>0),y=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function _(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:_).apply(null,arguments)}function I(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now;function E(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function S(t){return t}function C(t,e,n){this.code=N+t,this.message=e||R[t]||"",this.a=n||null}function k(t){var e=t&&t.code;return e?new C(e.substring(N.length),t.message,t.serverResponse):null}E(C,Error),C.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},C.prototype.toJSON=function(){return this.w()};var A,N="auth/",R={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},P={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function x(t){for(var e in P)if(P[e].id===t)return{firebaseEndpoint:(t=P[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function O(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function D(t){if(Error.captureStackTrace)Error.captureStackTrace(this,D);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function L(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");D.call(this,n+t[r])}function M(t,e){throw new L("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function F(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function j(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function U(){this.b=this.a=null}A=x("__EID__")?"__EID__":void 0,E(D,Error),D.prototype.name="CustomError",E(L,D),L.prototype.name="AssertionError",F.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var q=new F((function(){return new B}),(function(t){t.reset()}));function V(){var t=be,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function B(){this.next=this.b=this.a=null}U.prototype.add=function(t,e){var n=q.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var K=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},H=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var W=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},z=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},G=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Q(t,e){return 0<=K(t,e)}function $(t,e){var n;return(n=0<=(e=K(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Y(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function X(t){return Array.prototype.concat.apply([],arguments)}function J(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Z,tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},et=/&/g,nt=/</g,rt=/>/g,it=/"/g,ot=/'/g,at=/\x00/g,st=/[\x00&<>"']/;function ut(t,e){return-1!=t.indexOf(e)}function ct(t,e){return t<e?-1:t>e?1:0}t:{var ht=s.navigator;if(ht){var lt=ht.userAgent;if(lt){Z=lt;break t}}Z=""}function ft(t){return ut(Z,t)}function pt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function dt(t){for(var e in t)return!1;return!0}function vt(t){var e,n={};for(e in t)n[e]=t[e];return n}var gt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<gt.length;o++)n=gt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function yt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function bt(t,e){this.a=t===Tt&&e||"",this.b=It}function _t(t){return t instanceof bt&&t.constructor===bt&&t.b===It?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}bt.prototype.ta=!0,bt.prototype.sa=function(){return this.a},bt.prototype.toString=function(){return"Const{"+this.a+"}"};var wt,It={},Tt={};function Et(){if(void 0===wt){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:S,createScript:S,createScriptURL:S})}catch(t){s.console&&s.console.error(t.message)}wt=t}else wt=t}return wt}function St(t,e){this.a=e===Rt?t:""}function Ct(t){return t instanceof St&&t.constructor===St?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function kt(t,e){var n=_t(t);if(!Nt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=Et();return new St(t=e?e.createScriptURL(t):t,Rt)}(t=n.replace(At,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof bt?_t(t):encodeURIComponent(String(t))})))}St.prototype.ta=!0,St.prototype.sa=function(){return this.a.toString()},St.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var At=/%{(\w+)}/g,Nt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Rt={};function Pt(t,e){this.a=e===jt?t:""}function xt(t){return t instanceof Pt&&t.constructor===Pt?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}Pt.prototype.ta=!0,Pt.prototype.sa=function(){return this.a.toString()},Pt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ot=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Dt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Lt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Mt(t){if(t instanceof Pt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Lt.test(t))t=new Pt(t,jt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Dt);t=e&&Ot.test(e[1])?new Pt(t,jt):null}return t}function Ft(t){return t instanceof Pt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Lt.test(t)||(t="about:invalid#zClosurez"),new Pt(t,jt))}var jt={},Ut=new Pt("about:invalid#zClosurez",jt);function qt(t,e,n){this.a=n===Vt?t:""}qt.prototype.ta=!0,qt.prototype.sa=function(){return this.a.toString()},qt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Vt={};function Bt(t,e,n,r){return t=t instanceof Pt?t:Ft(t),e=e||s,n=n instanceof bt?_t(n):n||"",e.open(xt(t),n,r,void 0)}function Kt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ht(t){return st.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(et,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(nt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(rt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(it,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ot,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(at,"&#0;"))),t}function Wt(t){return Wt[" "](t),t}Wt[" "]=l;var zt,Gt=ft("Opera"),Qt=ft("Trident")||ft("MSIE"),$t=ft("Edge"),Yt=$t||Qt,Xt=ft("Gecko")&&!(ut(Z.toLowerCase(),"webkit")&&!ft("Edge"))&&!(ft("Trident")||ft("MSIE"))&&!ft("Edge"),Jt=ut(Z.toLowerCase(),"webkit")&&!ft("Edge");function Zt(){var t=s.document;return t?t.documentMode:void 0}t:{var te="",ee=function(){var t=Z;return Xt?/rv:([^\);]+)(\)|;)/.exec(t):$t?/Edge\/([\d\.]+)/.exec(t):Qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Jt?/WebKit\/(\S+)/.exec(t):Gt?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(ee&&(te=ee?ee[1]:""),Qt){var ne=Zt();if(null!=ne&&ne>parseFloat(te)){zt=String(ne);break t}}zt=te}var re,ie={};function oe(t){return function(t,e){var n=ie;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=tt(String(zt)).split("."),r=tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ct(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ct(0==a[2].length,0==s[2].length)||ct(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(s.document&&Qt){var ae=Zt();re=ae||(parseInt(zt,10)||void 0)}else re=void 0;var se=re;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var ue=!Qt||9<=Number(se);function ce(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function he(t,e){pt(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:pe.hasOwnProperty(n)?t.setAttribute(pe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var le,fe,pe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function de(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!p(o)||v(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(v(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){a="function"==typeof o.item;break t}}a=!1}H(a?J(o):o,r)}}}function ve(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ge(t){s.setTimeout((function(){throw t}),0)}function me(t,e){fe||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);fe=function(){t.then(_e)}}else fe=function(){var t=_e;!d(s.setImmediate)||s.Window&&s.Window.prototype&&!ft("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(le||(le=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ft("Presto")&&(t=function(){var t=ve(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=w((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ft("Trident")&&!ft("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),le(t)):s.setImmediate(t)}}(),ye||(fe(),ye=!0),be.add(t,e)}var ye=!1,be=new U;function _e(){for(var t;t=V();){try{t.a.call(t.b)}catch(t){ge(t)}j(q,t)}ye=!1}function we(t,e){if(this.a=Ie,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){Le(n,Te,t)}),(function(t){if(!(t instanceof Ke))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Le(n,Ee,t)}))}catch(t){Le(this,Ee,t)}}var Ie=0,Te=2,Ee=3;function Se(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Se.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ce=new F((function(){return new Se}),(function(t){t.reset()}));function ke(t,e,n){var r=Ce.get();return r.g=t,r.b=e,r.f=n,r}function Ae(t){if(t instanceof we)return t;var e=new we(l);return Le(e,Te,t),e}function Ne(t){return new we((function(e,n){n(t)}))}function Re(t,e,n){Me(t,e,n,null)||me(I(e,t))}function Pe(t){return new we((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Re(t[o],I(i,o,!0),I(i,o,!1));else e(r)}))}function xe(t,e){if(t.a==Ie)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Ie&&1==r?xe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):je(n),Ue(n,i,Ee,e)))}t.c=null}else Le(t,Ee,e)}function Oe(t,e){t.b||t.a!=Te&&t.a!=Ee||Fe(t),t.f?t.f.next=e:t.b=e,t.f=e}function De(t,e,n,r){var i=ke(null,null,null);return i.a=new we((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ke?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Oe(t,i),i.a}function Le(t,e,n){t.a==Ie&&(t===n&&(e=Ee,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Me(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Fe(t),e!=Ee||n instanceof Ke||function(t,e){t.g=!0,me((function(){t.g&&Be.call(null,e)}))}(t,n)))}function Me(t,e,n,r){if(t instanceof we)return Oe(t,ke(e||l,n||null,r)),!0;if(O(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}function a(t){s||(s=!0,n.call(i,t))}var s=!1;try{e.call(t,a,o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Fe(t){t.h||(t.h=!0,me(t.gc,t))}function je(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ue(t,e,n,r){if(n==Ee&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,qe(e,n,r);else try{e.c?e.g.call(e.f):qe(e,n,r)}catch(t){Be.call(null,t)}j(Ce,e)}function qe(t,e,n){e==Te?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}we.prototype.then=function(t,e,n){return De(this,d(t)?t:null,d(e)?e:null,n)},we.prototype.$goog_Thenable=!0,(e=we.prototype).oa=function(t,e){return(t=ke(t,t,e)).c=!0,Oe(this,t),this},e.o=function(t,e){return De(this,null,t,e)},e.cancel=function(t){if(this.a==Ie){var e=new Ke(t);me((function(){xe(this,e)}),this)}},e.$c=function(t){this.a=Ie,Le(this,Te,t)},e.ad=function(t){this.a=Ie,Le(this,Ee,t)},e.gc=function(){for(var t;t=je(this);)Ue(this,t,this.a,this.i);this.h=!1};var Be=ge;function Ke(t){D.call(this,t)}function He(){0!=We&&(ze[g(this)]=this),this.ya=this.ya,this.pa=this.pa}E(Ke,D),Ke.prototype.name="cancel";var We=0,ze={};function Ge(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=We)){var e=g(t);if(0!=We&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ze[e]}}He.prototype.ya=!1,He.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Qe=Object.freeze||function(t){return t},$e=!Qt||9<=Number(se),Ye=Qt&&!oe("9"),Xe=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",l,e),s.removeEventListener("test",l,e)}catch(t){}return t}();function Je(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ze(t,e){if(Je.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Xt){t:{try{Wt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:tn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Je.prototype.preventDefault=function(){this.defaultPrevented=!0},E(Ze,Je);var tn=Qe({2:"touch",3:"pen",4:"mouse"});Ze.prototype.preventDefault=function(){Ze.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ye)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Ze.prototype.g=function(){return this.a};var en="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++nn,this.wa=this.Qa=!1}function on(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function an(t){this.src=t,this.a={},this.b=0}function sn(t,e){var n=e.type;n in t.a&&$(t.a[n],e)&&(on(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function un(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}an.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=un(t,e,r,i);return-1<a?(e=t[a],n||(e.Qa=!1)):((e=new rn(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var cn="closure_lm_"+(1e6*Math.random()|0),hn={};function ln(t,e,n,r,i){if(r&&r.once)pn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else n=In(n),t&&t[en]?En(t,e,n,v(r)?!!r.capture:!!r,i):fn(t,e,n,!1,r,i)}function fn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=v(i)?!!i.capture:!!i,s=_n(t);if(s||(t[cn]=s=new an(t)),!(n=s.add(e,n,r,a,o)).proxy){if(r=function(){var t=bn,e=$e?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Xe||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function pn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)pn(t,e[o],n,r,i);else n=In(n),t&&t[en]?Sn(t,e,n,v(r)?!!r.capture:!!r,i):fn(t,e,n,!0,r,i)}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=In(n),t&&t[en]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=un(o=t.a[e],n,r,i))&&(on(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=_n(t))&&(e=t.a[e.toString()],t=-1,e&&(t=un(e,n,r,i)),(n=-1<t?e[t]:null)&&vn(n))}function vn(t){if("number"!=typeof t&&t&&!t.wa){var e=t.src;if(e&&e[en])sn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_n(e))?(sn(n,t),0==n.b&&(n.src=null,e[cn]=null)):on(t)}}}function gn(t){return t in hn?hn[t]:hn[t]="on"+t}function mn(t,e,n,r){var i=!0;if((t=_n(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=yn(o,r),i=i&&!1!==o)}return i}function yn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&vn(t),n.call(r,e)}function bn(t,e){if(t.wa)return!0;if(!$e){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ze(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=mn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=mn(r[i],t,!1,e),n=n&&o}return n}return yn(t,new Ze(e,this))}function _n(t){return(t=t[cn])instanceof an?t:null}var wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function In(t){return d(t)?t:(t[wn]||(t[wn]=function(e){return t.handleEvent(e)}),t[wn])}function Tn(){He.call(this),this.v=new an(this),this.bc=this,this.hb=null}function En(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Sn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Cn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,u=a.Wa||a.src;a.Qa&&sn(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function kn(t,e,n){if(d(t))n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function An(t){var e=null;return new we((function(n,r){-1==(e=kn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function Nn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Rn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(p(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Pn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Pn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];On(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)On(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function On(t,e){return Object.prototype.hasOwnProperty.call(t,e)}E(Tn,He),Tn.prototype[en]=!0,Tn.prototype.addEventListener=function(t,e,n,r){ln(this,t,e,n,r)},Tn.prototype.removeEventListener=function(t,e,n,r){dn(this,t,e,n,r)},Tn.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"==typeof t)t=new Je(t,n);else if(t instanceof Je)t.target=t.target||n;else{var i=t;mt(t=new Je(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=Cn(a,r,!0,t)&&i}if(i=Cn(a=t.b=n,r,!0,t)&&i,i=Cn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Cn(a=t.b=e[o],r,!1,t)&&i;return i},Tn.prototype.Da=function(){if(Tn.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)on(n[r]);delete e.a[t],e.b--}}this.hb=null},(e=Pn.prototype).X=function(){xn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},e.Y=function(){return xn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(t,e){return On(this.b,t)?this.b[t]:e},e.set=function(t,e){On(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},e.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Dn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ln(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Ln?(this.i=void 0!==e?e:t.i,Mn(this,t.c),this.l=t.l,this.a=t.a,Fn(this,t.g),this.f=t.f,jn(this,rr(t.b)),this.h=t.h):t&&(n=String(t).match(Dn))?(this.i=!!e,Mn(this,n[1]||"",!0),this.l=Kn(n[2]||""),this.a=Kn(n[3]||"",!0),Fn(this,n[4]),this.f=Kn(n[5]||"",!0),jn(this,n[6]||"",!0),this.h=Kn(n[7]||"")):(this.i=!!e,this.b=new Xn(null,this.i))}function Mn(t,e,n){t.c=n?Kn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Fn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function jn(t,e,n){e instanceof Xn?(t.b=e,function(t,e){e&&!t.f&&(Jn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(tr(this,e),nr(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Hn(e,$n)),t.b=new Xn(e,t.i))}function Un(t,e,n){t.b.set(e,n)}function qn(t,e){return t.b.get(e)}function Vn(t){return t instanceof Ln?new Ln(t):new Ln(t,void 0)}function Bn(t,e,n,r){var i=new Ln(null,void 0);return t&&Mn(i,t),e&&(i.a=e),n&&Fn(i,n),r&&(i.f=r),i}function Kn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Hn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Wn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Wn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ln.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Hn(e,zn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Hn(e,zn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Hn(n,"/"==n.charAt(0)?Qn:Gn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Hn(n,Yn)),t.join("")},Ln.prototype.resolve=function(t){var e=new Ln(this),n=!!t.c;n?Mn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Fn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ut(i,"./")||ut(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?jn(e,rr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var zn=/[#\/\?@]/g,Gn=/[#\?:]/g,Qn=/[#\?]/g,$n=/[#\?@]/g,Yn=/#/g;function Xn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Jn(t){t.a||(t.a=new Pn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Zn(t){var e=Rn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Xn(null,void 0);t=Nn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?nr(n,i,o):n.add(i,o)}return n}function tr(t,e){Jn(t),e=ir(t,e),On(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,On((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&xn(t)))}function er(t,e){return Jn(t),e=ir(t,e),On(t.a.b,e)}function nr(t,e,n){tr(t,e),0<n.length&&(t.c=null,t.a.set(ir(t,e),J(n)),t.b+=n.length)}function rr(t){var e=new Xn;return e.c=t.c,t.a&&(e.a=new Pn(t.a),e.b=t.b),e}function ir(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function or(t){var e=[];return sr(new ar,t,e),e.join("")}function ar(){}function sr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),sr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),hr(r,n),n.push(":"),sr(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":hr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(e=Xn.prototype).add=function(t,e){Jn(this),this.c=null,t=ir(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(t,e){Jn(this),this.a.forEach((function(n,r){H(n,(function(n){t.call(e,n,r,this)}),this)}),this)},e.Y=function(){Jn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},e.X=function(t){Jn(this);var e=[];if("string"==typeof t)er(this,t)&&(e=X(e,this.a.get(ir(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=X(e,t[n])}return e},e.set=function(t,e){return Jn(this),this.c=null,er(this,t=ir(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},e.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var ur={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},cr=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function hr(t,e){e.push('"',t.replace(cr,(function(t){var e=ur[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ur[t]=e),e})),'"')}function lr(){var t=Pr();return Qt&&!!se&&11==se||/Edge\/\d+/.test(t)}function fr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function pr(t,e){e=e||s.window;var n="about:blank";t&&(n=xt(Mt(t)||Ut)),e.location.href=n}function dr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<dr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function vr(t){return!!((t=(t||Pr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function gr(t){t=t||s.window;try{t.close()}catch(t){}}function mr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Pr().toLowerCase(),r&&(e.target=r,ut(n,"crios/")&&(e.target="_blank")),Ar(Pr())==Cr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Pt?n:Mt(void 0!==n.href?n.href:String(n))||Ut,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((ft("iPhone")&&!ft("iPod")&&!ft("iPad")||ft("iPad")||ft("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(yt(a=ve(document,"A"),"HTMLAnchorElement"),e=e instanceof Pt?e:Ft(e),a.href=xt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Bt("",r,n,a),t=xt(e),a&&(Yt&&ut(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ht(t)+'">',t=new qt(t=(r=Et())?r.createHTML(t):t,null,Vt),r=a.document)&&(r.write(function(t){return t instanceof qt&&t.constructor===qt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Bt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var yr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,br=/^[^@]+@[^@]+$/;function _r(){var t=null;return new we((function(e){"complete"==s.document.readyState?e():(t=function(){e()},pn(window,"load",t))})).o((function(e){throw dn(window,"load",t),e}))}function wr(t){return t=t||Pr(),!("file:"!==Mr()&&"ionic:"!==Mr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ir(){var t=s.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Tr(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function Er(){return Ve.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Ve.INTERNAL.hasOwnProperty("node")?"Node":Tr()?"Worker":"Browser"}function Sr(){var t=Er();return"ReactNative"===t||"Node"===t}var Cr="Firefox",kr="Chrome";function Ar(t){var e=t.toLowerCase();return ut(e,"opera/")||ut(e,"opr/")||ut(e,"opios/")?"Opera":ut(e,"iemobile")?"IEMobile":ut(e,"msie")||ut(e,"trident/")?"IE":ut(e,"edge/")?"Edge":ut(e,"firefox/")?Cr:ut(e,"silk/")?"Silk":ut(e,"blackberry")?"Blackberry":ut(e,"webos")?"Webos":!ut(e,"safari/")||ut(e,"chrome/")||ut(e,"crios/")||ut(e,"android")?!ut(e,"chrome/")&&!ut(e,"crios/")||ut(e,"edge/")?ut(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":kr:"Safari"}var Nr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Rr(t,e){e=e||[];var n,r=[],i={};for(n in Nr)i[Nr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Er())?r=Ar(i=Pr()):"Worker"===r&&(r=Ar(i=Pr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Pr(){return s.navigator&&s.navigator.userAgent||""}function xr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Or(){try{var t=s.localStorage,e=Vr();if(t)return t.setItem(e,"1"),t.removeItem(e),!lr()||!!s.indexedDB}catch(t){return Tr()&&!!s.indexedDB}return!1}function Dr(){return(Lr()||"chrome-extension:"===Mr()||wr())&&!Sr()&&Or()&&!Tr()}function Lr(){return"http:"===Mr()||"https:"===Mr()}function Mr(){return s.location&&s.location.protocol||null}function Fr(t){return!vr(t=t||Pr())&&Ar(t)!=Cr}function jr(t){return void 0===t?null:or(t)}function Ur(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function qr(t){if(null!==t)return JSON.parse(t)}function Vr(t){return t||Math.floor(1e9*Math.random()).toString()}function Br(t){return"Safari"!=Ar(t=t||Pr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Kr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Hr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Pr(),e=Er(),this.b=vr(t)||"ReactNative"===e}function Wr(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function zr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Gr(){return!(!xr("fireauth.oauthhelper",s)&&!xr("fireauth.iframe",s))}Hr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Lr()&&"chrome-extension:"!==Mr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Qr,$r={};function Yr(t){$r[t]||($r[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Xr={};Object.defineProperty(Xr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Xr,"abcd",{configurable:!0,enumerable:!0,value:2}),Qr=2==Xr.abcd}catch(t){Qr=!1}function Jr(t,e,n){Qr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Zr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Jr(t,n,e[n])}function ti(t){var e={};return Zr(e,t),e}function ei(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Jr(e,n,ei(t[n]));return e}function ni(t){var e=t&&(t[si]?"phone":null);if(!(e&&t&&t[ai]))throw new C("internal-error","Internal assert: invalid MultiFactorInfo object");Jr(this,"uid",t[ai]),Jr(this,"displayName",t[ii]||null);var n=null;t[oi]&&(n=new Date(t[oi]).toUTCString()),Jr(this,"enrollmentTime",n),Jr(this,"factorId",e)}function ri(t){try{var e=new ui(t)}catch(t){e=null}return e}ni.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ii="displayName",oi="enrolledAt",ai="mfaEnrollmentId",si="phoneInfo";function ui(t){ni.call(this,t),Jr(this,"phoneNumber",t[si])}function ci(t){var e={},n=t[pi],r=t[vi],i=t[gi];if(t=ri(t[di]),!i||i!=li&&i!=fi&&!n||i==fi&&!r||i==hi&&!t)throw Error("Invalid checkActionCode response!");i==fi?(e[yi]=n||null,e[_i]=n||null,e[mi]=r):(e[yi]=r||null,e[_i]=r||null,e[mi]=n||null),e[bi]=t||null,Jr(this,Ii,i),Jr(this,wi,ei(e))}E(ui,ni),ui.prototype.w=function(){var t=ui.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var hi="REVERT_SECOND_FACTOR_ADDITION",li="EMAIL_SIGNIN",fi="VERIFY_AND_CHANGE_EMAIL",pi="email",di="mfaInfo",vi="newEmail",gi="requestType",mi="email",yi="fromEmail",bi="multiFactorInfo",_i="previousEmail",wi="data",Ii="operation";function Ti(t){var e=qn(t=Vn(t),Ei)||null,n=qn(t,Si)||null,r=qn(t,Ai)||null;if(r=r&&Ri[r]||null,!e||!n||!r)throw new C("argument-error",Ei+", "+Si+"and "+Ai+" are required in a valid action code URL.");Zr(this,{apiKey:e,operation:r,code:n,continueUrl:qn(t,Ci)||null,languageCode:qn(t,ki)||null,tenantId:qn(t,Ni)||null})}var Ei="apiKey",Si="oobCode",Ci="continueUrl",ki="languageCode",Ai="mode",Ni="tenantId",Ri={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:hi,signIn:li,verifyAndChangeEmail:fi,verifyEmail:"VERIFY_EMAIL"};function Pi(t){try{return new Ti(t)}catch(t){return null}}function xi(t){var e=t[Fi];if(void 0===e)throw new C("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new C("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Oi];if(n&&"object"==typeof n){e=n[qi];var r=n[ji];if(n=n[Ui],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new C("argument-error",ji+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new C("argument-error",Ui+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new C("argument-error",qi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new C("missing-android-pkg-name")}}else if(void 0!==n)throw new C("argument-error",Oi+" property must be a non null object when specified.");if(this.f=null,(e=t[Mi])&&"object"==typeof e){if("string"==typeof(e=e[Vi])&&e.length)this.f=e;else if(void 0!==e)throw new C("argument-error",Vi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new C("argument-error",Mi+" property must be a non null object when specified.");if(void 0!==(e=t[Li])&&"boolean"!=typeof e)throw new C("argument-error",Li+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Di])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new C("argument-error",Di+" property must be a non empty string when specified.");this.i=t||null}var Oi="android",Di="dynamicLinkDomain",Li="handleCodeInApp",Mi="iOS",Fi="url",ji="installApp",Ui="minimumVersion",qi="packageName",Vi="bundleId";function Bi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ki=null;function Hi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Ki[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ki){Ki={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ki[o]&&(Ki[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}function Wi(t){var e=Gi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function zi(t){try{return new Wi(t)}catch(t){return null}}function Gi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=Hi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(t){}return null}Wi.prototype.T=function(){return this.f},Wi.prototype.l=function(){return this.c},Wi.prototype.toString=function(){return this.h};var Qi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),$i=["client_id","response_type","scope","redirect_uri","state"],Yi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:$i},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:$i},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:$i},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Qi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Xi(t){for(var e in Yi)if(Yi[e].fa==t)return Yi[e];return null}function Ji(t){var e={};e["facebook.com"]=ro,e["google.com"]=oo,e["github.com"]=io,e["twitter.com"]=ao;var n=t&&t[to];try{if(n)return e[n]?new e[n](t):new no(t);if(void 0!==t[Zi])return new eo(t)}catch(t){}return null}var Zi="idToken",to="providerId";function eo(t){var e=t[to];if(!e&&t[Zi]){var n=zi(t[Zi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Jr(this,"providerId",e),Jr(this,"isNewUser",n)}function no(t){eo.call(this,t),Jr(this,"profile",ei((t=qr(t.rawUserInfo||"{}"))||{}))}function ro(t){if(no.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function io(t){if(no.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Jr(this,"username",this.profile&&this.profile.login||null)}function oo(t){if(no.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ao(t){if(no.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Jr(this,"username",t.screenName||null)}function so(t){var e=Vn(t),n=qn(e,"link"),r=qn(Vn(n),"link");return e=qn(e,"deep_link_id"),qn(Vn(e),"link")||e||r||n||t}function uo(t,e){if(!t&&!e)throw new C("internal-error","Internal assert: no raw session string available");if(t&&e)throw new C("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?co:ho}E(no,eo),E(ro,no),E(io,no),E(oo,no),E(ao,no);var co="enroll",ho="signin";function lo(){}function fo(t,e){return t.then((function(t){if(t[es]){var n=zi(t[es]);if(!n||e!=n.i)throw new C("user-mismatch");return t}throw new C("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==N+"user-not-found"?new C("user-mismatch"):t}))}function po(t,e){if(!e)throw new C("internal-error","failed to construct a credential");this.a=e,Jr(this,"providerId",t),Jr(this,"signInMethod",t)}function vo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function go(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new po(t.providerId,t.pendingToken)}catch(t){}return null}function mo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Jr(this,"idToken",e.idToken),e.accessToken&&Jr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Jr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new C("internal-error","failed to construct a credential");Jr(this,"accessToken",e.oauthToken),Jr(this,"secret",e.oauthTokenSecret)}Jr(this,"providerId",t),Jr(this,"signInMethod",n)}function yo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Zn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function bo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new mo(t.providerId,e,t.signInMethod)}catch(t){}}return null}function _o(t,e){this.Qc=e||[],Zr(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Xi(t)||{}).Ja||null,this.pb=null}function wo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new C("argument-error",'SAML provider IDs must be prefixed with "saml."');_o.call(this,t,[])}function Io(t){_o.call(this,t,$i),this.a=[]}function To(){Io.call(this,"facebook.com")}function Eo(t){if(!t)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new To).credential({accessToken:e})}function So(){Io.call(this,"github.com")}function Co(t){if(!t)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new So).credential({accessToken:e})}function ko(){Io.call(this,"google.com"),this.Ca("profile")}function Ao(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new ko).credential({idToken:n,accessToken:e})}function No(){_o.call(this,"twitter.com",Qi)}function Ro(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new C("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new mo("twitter.com",n,"twitter.com")}function Po(t,e,n){this.a=t,this.f=e,Jr(this,"providerId","password"),Jr(this,"signInMethod",n===Oo.EMAIL_LINK_SIGN_IN_METHOD?Oo.EMAIL_LINK_SIGN_IN_METHOD:Oo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function xo(t){return t&&t.email&&t.password?new Po(t.email,t.password,t.signInMethod):null}function Oo(){Zr(this,{providerId:"password",isOAuthProvider:!1})}function Do(t,e){if(!(e=Lo(e)))throw new C("argument-error","Invalid email link!");return new Po(t,e.code,Oo.EMAIL_LINK_SIGN_IN_METHOD)}function Lo(t){return(t=Pi(t=so(t)))&&t.operation===li?t:null}function Mo(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new C("internal-error");this.a=t,Jr(this,"providerId","phone"),this.fa="phone",Jr(this,"signInMethod","phone")}function Fo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return H(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Mo(e)}return null}function jo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function Uo(t){try{this.a=t||Ve.auth()}catch(t){throw new C("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Zr(this,{providerId:"phone",isOAuthProvider:!1})}function qo(t,e){if(!t)throw new C("missing-verification-id");if(!e)throw new C("missing-verification-code");return new Mo({fb:t,eb:e})}function Vo(t){if(t.temporaryProof&&t.phoneNumber)return new Mo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Ao(o,n);case"facebook.com":return Eo(n);case"github.com":return Co(n);case"twitter.com":return Ro(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new po(e,a):new mo(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Io(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Bo(t){if(!t.isOAuthProvider)throw new C("invalid-oauth-provider")}function Ko(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new C("invalid-auth-event");if(this.g&&this.a)throw new C("invalid-auth-event");if(this.g&&!this.f)throw new C("invalid-auth-event")}function Ho(t){return(t=t||{}).type?new Ko(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&k(t.error),t.postBody,t.tenantId):null}function Wo(){this.b=null,this.a=[]}uo.prototype.Ha=function(){return this.a?Ae(this.a):Ae(this.b)},uo.prototype.w=function(){return this.type==co?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},lo.prototype.ka=function(){},lo.prototype.b=function(){},lo.prototype.c=function(){},lo.prototype.w=function(){},po.prototype.ka=function(t){return Ts(t,vo(this))},po.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,Es(t,n)},po.prototype.c=function(t,e){return fo(Ss(t,vo(this)),e)},po.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},mo.prototype.ka=function(t){return Ts(t,yo(this))},mo.prototype.b=function(t,e){var n=yo(this);return n.idToken=e,Es(t,n)},mo.prototype.c=function(t,e){return fo(Ss(t,yo(this)),e)},mo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},_o.prototype.Ka=function(t){return this.Jb=vt(t),this},E(wo,_o),E(Io,_o),Io.prototype.Ca=function(t){return Q(this.a,t)||this.a.push(t),this},Io.prototype.Rb=function(){return J(this.a)},Io.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new C("argument-error","credential failed: must provide the ID token and/or the access token.");return new mo(this.providerId,n,this.providerId)},E(To,Io),Jr(To,"PROVIDER_ID","facebook.com"),Jr(To,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),E(So,Io),Jr(So,"PROVIDER_ID","github.com"),Jr(So,"GITHUB_SIGN_IN_METHOD","github.com"),E(ko,Io),Jr(ko,"PROVIDER_ID","google.com"),Jr(ko,"GOOGLE_SIGN_IN_METHOD","google.com"),E(No,_o),Jr(No,"PROVIDER_ID","twitter.com"),Jr(No,"TWITTER_SIGN_IN_METHOD","twitter.com"),Po.prototype.ka=function(t){return this.signInMethod==Oo.EMAIL_LINK_SIGN_IN_METHOD?au(t,Os,{email:this.a,oobCode:this.f}):au(t,eu,{email:this.a,password:this.f})},Po.prototype.b=function(t,e){return this.signInMethod==Oo.EMAIL_LINK_SIGN_IN_METHOD?au(t,Ds,{idToken:e,email:this.a,oobCode:this.f}):au(t,Gs,{idToken:e,email:this.a,password:this.f})},Po.prototype.c=function(t,e){return fo(this.ka(t),e)},Po.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Zr(Oo,{PROVIDER_ID:"password"}),Zr(Oo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Zr(Oo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Mo.prototype.ka=function(t){return t.gb(jo(this))},Mo.prototype.b=function(t,e){var n=jo(this);return n.idToken=e,au(t,ru,n)},Mo.prototype.c=function(t,e){var n=jo(this);return n.operation="REAUTH",fo(t=au(t,iu,n),e)},Mo.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Uo.prototype.gb=function(t,e){var n=this.a.a;return Ae(e.verify()).then((function(r){if("string"!=typeof r)throw new C("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===e.type){var i,o=v(t)?t.session:null,a=v(t)?t.phoneNumber:t;return i=o&&o.type==co?o.Ha().then((function(t){return function(t,e){return au(t,$s,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r}})})):o&&o.type==ho?o.Ha().then((function(e){return function(t,e){return au(t,Ys,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return au(t,Ws,e)}(n,{phoneNumber:a,recaptchaToken:r}),i.then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}))}throw new C("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}))},Zr(Uo,{PROVIDER_ID:"phone"}),Zr(Uo,{PHONE_SIGN_IN_METHOD:"phone"}),Ko.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Ko.prototype.T=function(){return this.h},Ko.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var zo,Go=null;function Qo(t){var e="unauthorized-domain",n=void 0,r=Vn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Kt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Kt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",C.call(this,e,n)}function $o(t,e,n){C.call(this,t,n),(t=e||{}).Kb&&Jr(this,"email",t.Kb),t.ea&&Jr(this,"phoneNumber",t.ea),t.credential&&Jr(this,"credential",t.credential),t.$b&&Jr(this,"tenantId",t.$b)}function Yo(t){if(t.code){var e=t.code||"";0==e.indexOf(N)&&(e=e.substring(N.length));var n={credential:Vo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new C(e,t.message||void 0);return new $o(e,n,t.message)}return null}function Xo(){}function Jo(t){return t.c||(t.c=t.b())}function Zo(){}function ta(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function ea(){}function na(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=w(this.qc,this),this.a.onerror=w(this.Tb,this),this.a.onprogress=w(this.rc,this),this.a.ontimeout=w(this.vc,this)}function ra(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ia(t,e,n){this.reset(t,e,n,void 0,void 0)}E(Qo,C),E($o,C),$o.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&mt(t,e),t},$o.prototype.toJSON=function(){return this.w()},Xo.prototype.c=null,E(Zo,Xo),Zo.prototype.a=function(){var t=ta(this);return t?new ActiveXObject(t):new XMLHttpRequest},Zo.prototype.b=function(){var t={};return ta(this)&&(t[0]=!0,t[1]=!0),t},zo=new Zo,E(ea,Xo),ea.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new na;throw Error("Unsupported browser")},ea.prototype.b=function(){return{}},(e=na.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},e.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ra(this,4)},e.Tb=function(){this.status=500,this.response=this.responseText="",ra(this,4)},e.vc=function(){this.Tb()},e.rc=function(){this.status=200,ra(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ia.prototype.a=null;function oa(t){this.f=t,this.b=this.c=this.a=null}function aa(t,e){this.name=t,this.value=e}ia.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||T(),delete this.a},aa.prototype.toString=function(){return this.name};var sa=new aa("SEVERE",1e3),ua=new aa("WARNING",900),ca=new aa("CONFIG",700),ha=new aa("FINE",500);function la(t){return t.c?t.c:t.a?la(t.a):(M("Root logger has no level set."),null)}oa.prototype.log=function(t,e,n){if(t.value>=la(this).value)for(d(e)&&(e=e()),t=new ia(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var fa={},pa=null;function da(t){var e;if(pa||(pa=new oa(""),fa[""]=pa,pa.c=ca),!(e=fa[t])){e=new oa(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=da(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,fa[t]=e}return e}function va(t,e){t&&t.log(ha,e,void 0)}function ga(t){this.f=t}function ma(t){Tn.call(this),this.u=t,this.h=void 0,this.readyState=ya,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=da("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}E(ga,Xo),ga.prototype.a=function(){return new ma(this.f)},ga.prototype.b=function(t){return function(){return t}}({}),E(ma,Tn);var ya=0;function ba(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function _a(t){t.readyState=4,t.g=null,t.c=null,t.m=null,wa(t)}function wa(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Ia(t){Tn.call(this),this.headers=new Pn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=Ta,this.u=this.S=!1}(e=ma.prototype).open=function(t,e){if(this.readyState!=ya)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,wa(this)},e.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,_a(this)),this.readyState=ya},e.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,wa(this)),this.a&&(this.readyState=3,wa(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ba(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},e.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?_a(this):wa(this),3==this.readyState&&ba(this)}},e.tc=function(t){this.a&&(this.response=this.responseText=t,_a(this))},e.sc=function(t){this.a&&(this.response=t,_a(this))},e.Va=function(t){var e=this.i;e&&e.log(ua,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&_a(this)},e.setRequestHeader=function(t,e){this.l.append(t,e)},e.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(ua,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(ua,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ma.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),E(Ia,Tn);var Ta="";Ia.prototype.b=da("goog.net.XhrIo");var Ea=/^https?$/i,Sa=["POST","PUT"];function Ca(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():zo.a(),t.C=t.D?Jo(t.D):Jo(zo),t.a.onreadystatechange=w(t.Wb,t);try{va(t.b,La(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return va(t.b,La(t,"Error opening Xhr: "+e.message)),void Aa(t,e)}e=r||"";var o=new Pn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)H(t,e,void 0);else for(var n=Rn(t),r=Nn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=ka,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!Q(Sa,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{xa(t),0<t.g&&(t.u=function(t){return Qt&&oe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),va(t.b,La(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=w(t.Ma,t)):t.s=kn(t.Ma,t.g,t)),va(t.b,La(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){va(t.b,La(t,"Send error: "+e.message)),Aa(t,e)}}function ka(t){return"content-type"==t.toLowerCase()}function Aa(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Na(t),Pa(t)}function Na(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ra(t){if(t.c&&void 0!==a)if(t.C[1]&&4==Oa(t)&&2==Da(t))va(t.b,La(t,"Local request error detected and ignored"));else if(t.i&&4==Oa(t))kn(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Oa(t)){va(t.b,La(t,"Request complete")),t.c=!1;try{var e,n=Da(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Dn)[1]||null;if(!o&&s.self&&s.self.location){var u=s.self.location.protocol;o=u.substr(0,u.length-1)}i=!Ea.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Oa(t)?t.a.statusText:""}catch(e){va(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Da(t)+"]",Na(t)}}finally{Pa(t)}}}function Pa(t,e){if(t.a){xa(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(sa,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function xa(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Oa(t){return t.a?t.a.readyState:0}function Da(t){try{return 2<Oa(t)?t.a.status:-1}catch(t){return-1}}function La(t,e){return e+" ["+t.P+" "+t.l+" "+Da(t)+"]"}function Ma(t){var e=Ga;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Fa(t,e,n){t.a=!0,t.c=n,t.f=!e,Va(t)}function ja(t){if(t.a){if(!t.v)throw new Ba(t);t.v=!1}}function Ua(t,e,n,r){t.g.push([e,n,r]),t.a&&Va(t)}function qa(t){return G(t.g,(function(t){return d(t[1])}))}function Va(t){if(t.h&&t.a&&qa(t)){var e=t.h,n=Wa[e];n&&(s.clearTimeout(n.a),delete Wa[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(O(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,qa(t)||(n=!0)}}t.c=e,r&&(u=w(t.m,t,!0),r=w(t.m,t,!1),e instanceof Ma?(Ua(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Ha(e),Wa[e.a]=e,t.h=e.a)}function Ba(){D.call(this)}function Ka(){D.call(this)}function Ha(t){this.a=s.setTimeout(w(this.c,this),0),this.b=t}(e=Ia.prototype).Ma=function(){void 0!==a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",va(this.b,La(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(va(this.b,La(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Pa(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Pa(this,!0)),Ia.bb.Da.call(this)},e.Wb=function(){this.ya||(this.N||this.i||this.f?Ra(this):this.Jc())},e.Jc=function(){Ra(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Ta:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(sa,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return va(this.b,"Can not get response: "+t.message),null}},Ma.prototype.cancel=function(t){if(this.a)this.c instanceof Ma&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Ka(this),ja(this),Fa(this,!1,t))}},Ma.prototype.m=function(t,e){this.i=!1,Fa(this,t,e)},Ma.prototype.then=function(t,e,n){var r,i,o=new we((function(t,e){r=t,i=e}));return Ua(this,r,(function(t){t instanceof Ka?o.cancel():i(t)})),o.then(t,e,n)},Ma.prototype.$goog_Thenable=!0,E(Ba,D),Ba.prototype.message="Deferred has already fired",Ba.prototype.name="AlreadyCalledError",E(Ka,D),Ka.prototype.message="Deferred was canceled",Ka.prototype.name="CanceledError",Ha.prototype.c=function(){throw delete Wa[this.a],this.b};var Wa={};function za(t){var e={},n=e.document||document,r=Ct(t).toString(),i=ve(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new Ma(o),u=null,l=null!=e.timeout?e.timeout:5e3;return 0<l&&(u=window.setTimeout((function(){Qa(i,!0);var t=new Xa(Ya,"Timeout reached for loading script "+r);ja(a),Fa(a,!1,t)}),l),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Qa(i,e.xd||!1,u),ja(a),Fa(a,!0,null))},i.onerror=function(){Qa(i,!0,u);var t=new Xa($a,"Error while loading script "+r);ja(a),Fa(a,!1,t)},mt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),he(i,o),function(t,e){yt(t,"HTMLScriptElement"),t.src=Ct(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=h(e.document):(null===c&&(c=h(s.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Ga(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Qa(t,!0,this.Ma)}}function Qa(t,e,n){null!=n&&s.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var $a=0,Ya=1;function Xa(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),D.call(this,n),this.code=t}function Ja(t){this.f=t}function Za(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||ns,this.g=vt(t.secureTokenHeaders||rs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||is,this.a=vt(t.firebaseHeaders||os),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Er(),!(n=s.XMLHttpRequest||n&&Ve.INTERNAL.node&&Ve.INTERNAL.node.XMLHttpRequest)&&!Tr())throw new C("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Tr()?this.f=new ga(self):Sr()?this.f=new Ja(n):this.f=new ea,this.b=null}E(Xa,D),E(Ja,Xo),Ja.prototype.a=function(){return new this.f},Ja.prototype.b=function(){return{}};var ts,es="idToken",ns=new Hr(3e4,6e4),rs={"Content-Type":"application/x-www-form-urlencoded"},is=new Hr(3e4,6e4),os={"Content-Type":"application/json"};function as(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ss(t,e){e&&(t.l=us("https://securetoken.googleapis.com/v1/token",e),t.h=us("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=us("https://identitytoolkit.googleapis.com/v2/",e))}function us(t,e){return t=Vn(t),e=Vn(e.url),t.f=t.a+t.f,Mn(t,e.c),t.a=e.a,Fn(t,e.g),t.toString()}function cs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function hs(t,e,n,r,i,o,a){(function(){var t=Pr();return!((t=Ar(t)!=kr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Qt&&se&&!(9<se))})()||Tr()?t=w(t.u,t):(ts||(ts=new we((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{s[fs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ua(t,null,e,void 0)}(za(kt(ls,{onload:fs})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=w(t.s,t)),t(e,n,r,i,o,a)}Za.prototype.T=function(){return this.b},Za.prototype.u=function(t,e,n,r,i,o){if(Tr()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new C("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new Ia(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}En(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return va(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),Sn(a,"ready",(function(){u&&clearTimeout(u),Ge(this)})),Sn(a,"timeout",(function(){u&&clearTimeout(u),Ge(this),e&&e(null)})),Ca(a,t,n,r,i)};var ls=new bt(Tt,"https://apis.google.com/js/client.js?onload=%{onload}"),fs="__fcb"+Math.floor(1e6*Math.random()).toString();function ps(t,e,n,r,i,o,a){var s=Vn(e+n);Un(s,"key",t.c),a&&Un(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Un(s,c,i[c]);return new we((function(e,n){hs(t,s.toString(),(function(t){t?t.error?n(uu(t,o||{})):e(t):n(new C("network-request-failed"))}),r,u?void 0:or(Ur(i)),t.a,t.v.get())}))}function ds(t){if("string"!=typeof(t=t.email)||!br.test(t))throw new C("invalid-email")}function vs(t){"email"in t&&ds(t)}function gs(t){if(!t[es]){if(t.mfaPendingCredential)throw new C("multi-factor-auth-required",null,vt(t));throw new C("internal-error")}}function ms(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new C("internal-error")}else{if(!t.sessionInfo)throw new C("missing-verification-id");if(!t.code)throw new C("missing-verification-code")}}Za.prototype.s=function(t,e,n,r,i){var o=this;ts.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Za.prototype.Ab=function(){return au(this,Qs,{})},Za.prototype.Cb=function(t,e){return au(this,zs,{idToken:t,email:e})},Za.prototype.Db=function(t,e){return au(this,Gs,{idToken:t,password:e})};var ys={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function bs(t){if(!t.phoneVerificationInfo)throw new C("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new C("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new C("missing-verification-code")}function _s(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new C("internal-error")}function ws(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(er(t=new Xn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function Is(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Yo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Yo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Yo(t)):t.errorMessage&&(e=su(t.errorMessage)),e)throw e;gs(t)}function Ts(t,e){return e.returnIdpCredential=!0,au(t,Xs,e)}function Es(t,e){return e.returnIdpCredential=!0,au(t,Zs,e)}function Ss(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,au(t,Js,e)}function Cs(t){if(!t.oobCode)throw new C("invalid-action-code")}(e=Za.prototype).Eb=function(t,e){var n={idToken:t},r=[];return pt(ys,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),au(this,zs,n)},e.wb=function(t,e){return mt(t={requestType:"PASSWORD_RESET",email:t},e),au(this,Vs,t)},e.xb=function(t,e){return mt(t={requestType:"EMAIL_SIGNIN",email:t},e),au(this,js,t)},e.vb=function(t,e){return mt(t={requestType:"VERIFY_EMAIL",idToken:t},e),au(this,Us,t)},e.Fb=function(t,e,n){return mt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),au(this,qs,t)},e.gb=function(t){return au(this,nu,t)},e.ob=function(t,e){return au(this,Hs,{oobCode:t,newPassword:e})},e.Sa=function(t){return au(this,As,{oobCode:t})},e.kb=function(t){return au(this,ks,{oobCode:t})};var ks={endpoint:"setAccountInfo",A:Cs,Z:"email",B:!0},As={endpoint:"resetPassword",A:Cs,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new C("internal-error")},B:!0},Ns={endpoint:"signupNewUser",A:function(t){if(ds(t),!t.password)throw new C("weak-password")},G:gs,V:!0,B:!0},Rs={endpoint:"createAuthUri",B:!0},Ps={endpoint:"deleteAccount",O:["idToken"]},xs={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new C("internal-error")}},Os={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ds,G:gs,V:!0,B:!0},Ds={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ds,G:gs,V:!0},Ls={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:bs,G:gs,B:!0,Na:!0},Ms={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:bs,G:gs,B:!0,Na:!0},Fs={endpoint:"getAccountInfo"},js={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new C("internal-error");ds(t)},Z:"email",B:!0},Us={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new C("internal-error")},Z:"email",B:!0},qs={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new C("internal-error")},Z:"email",B:!0},Vs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new C("internal-error");ds(t)},Z:"email",B:!0},Bs={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Ks={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new C("internal-error")}},Hs={endpoint:"resetPassword",A:Cs,Z:"email",B:!0},Ws={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},zs={endpoint:"setAccountInfo",O:["idToken"],A:vs,V:!0},Gs={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(vs(t),!t.password)throw new C("weak-password")},G:gs,V:!0},Qs={endpoint:"signupNewUser",G:gs,V:!0,B:!0},$s={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new C("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new C("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new C("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new C("internal-error")},B:!0,Na:!0},Ys={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new C("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new C("internal-error")},B:!0,Na:!0},Xs={endpoint:"verifyAssertion",A:_s,Za:ws,G:Is,V:!0,B:!0},Js={endpoint:"verifyAssertion",A:_s,Za:ws,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new C("user-not-found");if(t.errorMessage)throw su(t.errorMessage);gs(t)},V:!0,B:!0},Zs={endpoint:"verifyAssertion",A:function(t){if(_s(t),!t.idToken)throw new C("internal-error")},Za:ws,G:Is,V:!0},tu={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new C("invalid-custom-token")},G:gs,V:!0,B:!0},eu={endpoint:"verifyPassword",A:function(t){if(ds(t),!t.password)throw new C("wrong-password")},G:gs,V:!0,B:!0},nu={endpoint:"verifyPhoneNumber",A:ms,G:gs,B:!0},ru={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new C("internal-error");ms(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Yo(t);gs(t)}},iu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ms,G:gs,B:!0},ou={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[es]^!!t.refreshToken)throw new C("internal-error")},B:!0,Na:!0};function au(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.O))return Ne(new C("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Ae(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ps(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new C("internal-error");return r[e.Z]}))}function su(t){return uu({error:{errors:[{message:t}],code:400,message:t}})}function uu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new C(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",mt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new C(r[i],e);return!e&&t&&(e=jr(t)),new C("internal-error",e)}function cu(t){this.b=t,this.a=null,this.sb=function(t){return(pu||(pu=new we((function(t,e){function n(){Kr(),xr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Kr(),e(Error("Network Error"))},timeout:lu.get()})}if(xr("gapi.iframes.Iframe"))t();else if(xr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){xr("gapi.load")?n():e(Error("Network Error"))},Ae(za(r=kt(hu,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw pu=null,t})))).then((function(){return new we((function(e,n){xr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),fu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var hu=new bt(Tt,"https://apis.google.com/js/api.js?onload=%{onload}"),lu=new Hr(3e4,6e4),fu=new Hr(5e3,15e3),pu=null;function du(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Bn((t=Vn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Bn("https",this.l,null,"/__/auth/iframe"),this.a=t,Un(this.a,"apiKey",this.h),Un(this.a,"appName",this.i),this.b=null,this.c=[]}function vu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function gu(t){try{return Ve.app(t).auth().Ga()}catch(t){return[]}}function mu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function yu(t){var e=fr();return function(t){return au(t,Bs,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Vn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Vn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:yr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Qo(fr())}))}function bu(t){return t.m||(t.m=_r().then((function(){if(!t.u){var e=t.c,n=t.i,r=gu(t.b),i=new du(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=J(r||[]),t.u=i.toString()}t.v=new cu(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Ho(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ae(n)}return n.status="ERROR",Ae(n)}))}(t)}))),t.m}function _u(t){return t.l||(t.C=t.c?Rr(t.c,gu(t.b)):null,t.l=new Za(t.g,x(t.i),t.C),t.f&&ss(t.l,t.f)),t.l}function wu(t,e,n,r,i,o,a,s,u,c,h,l){return(t=new vu(t,e,n,r,i,l)).l=o,t.g=a,t.i=s,t.b=vt(u||null),t.f=c,t.zb(h).toString()}function Iu(t){if(this.a=t||Ve.INTERNAL.reactNative&&Ve.INTERNAL.reactNative.AsyncStorage,!this.a)throw new C("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Tu(t){this.b=t,this.a={},this.f=w(this.c,this)}du.prototype.toString=function(){return this.f?Un(this.a,"v",this.f):tr(this.a.b,"v"),this.b?Un(this.a,"eid",this.b):tr(this.a.b,"eid"),this.c.length?Un(this.a,"fw",this.c.join(",")):tr(this.a.b,"fw"),this.a.toString()},vu.prototype.zb=function(t){return this.h=t,this},vu.prototype.toString=function(){if(this.v){var t=Vn(this.v.url);t=Bn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Bn("https",this.u,null,"/__/auth/handler");if(Un(t,"apiKey",this.s),Un(t,"appName",this.c),Un(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Ve.app(this.c).auth().la()}catch(t){n=null}for(var r in e.pb=n,Un(t,"providerId",this.a.providerId),e=Ur((n=this.a).Jb))e[r]=e[r].toString();r=n.Qc,e=vt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),dt(e)||Un(t,"customParameters",jr(e))}if("function"==typeof this.a.Rb&&((n=this.a.Rb()).length&&Un(t,"scopes",n.join(","))),this.l?Un(t,"redirectUrl",this.l):tr(t.b,"redirectUrl"),this.g?Un(t,"eventId",this.g):tr(t.b,"eventId"),this.i?Un(t,"v",this.i):tr(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!qn(t,a)&&Un(t,a,this.b[a]);return this.h?Un(t,"tid",this.h):tr(t.b,"tid"),this.f?Un(t,"eid",this.f):tr(t.b,"eid"),(a=gu(this.c)).length&&Un(t,"fw",a.join(",")),t.toString()},(e=mu.prototype).Pb=function(t,e,n){var r=new C("popup-closed-by-user"),i=new C("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return bu(t).then((function(){return function(t,e){return t.sb.then((function(){return new we((function(n){t.a.send(e.type,e,n,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&gr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new we((function(e){return function n(){An(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return An(n).then((function(){e(r)}))}))},e.Yb=function(){var t=Pr();return!Fr(t)&&!Br(t)},e.Ub=function(){return!1},e.Nb=function(t,e,n,r,i,o,a,s){if(!t)return Ne(new C("popup-blocked"));if(a&&!Fr())return this.ma().o((function(e){gr(t),i(e)})),r(),Ae();this.a||(this.a=yu(_u(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw gr(t),i(e),e}));return r(),e})).then((function(){(Bo(n),a)||pr(wu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},e.Ob=function(t,e,n,r){this.a||(this.a=yu(_u(this)));var i=this;return this.a.then((function(){Bo(e),pr(wu(i.s,i.g,i.b,t,e,fr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},e.ma=function(){var t=this;return bu(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new C("network-request-failed")}))},e.ac=function(){return!0},e.Ea=function(t){this.h.push(t)},e.Ta=function(t){Y(this.h,(function(e){return e==t}))},(e=Iu.prototype).get=function(t){return Ae(this.a.getItem(t)).then((function(t){return t&&qr(t)}))},e.set=function(t,e){return Ae(this.a.setItem(t,jr(e)))},e.U=function(t){return Ae(this.a.removeItem(t))},e.ca=function(){},e.ia=function(){};var Eu,Su=[];function Cu(t,e,n){dt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function ku(t){this.a=t}function Au(t){this.c=t,this.b=!1,this.a=[]}function Nu(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return Ne(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new we((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Ru(t,c),e})).o((function(e){throw Ru(t,c),e}))}function Ru(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Y(t.a,(function(t){return t==e}))}}function Pu(){if(!Lu())throw new C("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Tr()&&self?(this.v=function(){var t=Tr()?self:null;if(H(Su,(function(n){n.b==t&&(e=n)})),!e){var e=new Tu(t);Su.push(e)}return e}(),Cu(this.v,"keyChanged",(function(e,n){return qu(t).then((function(e){return 0<e.length&&H(t.a,(function(t){t(e)})),{keyProcessed:Q(e,n.key)}}))})),Cu(this.v,"ping",(function(){return Ae(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?Ae().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ae(null)}().then((function(e){(t.h=e)&&(t.g=new Au(new ku(e)),Nu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Q(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function xu(t){return new we((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new we((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return xu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Ou(t){return t.i||(t.i=xu(t)),t.i}function Du(t,e){var n=0;return new we((function r(i,o){Ou(t).then(e).then(i).o((function(e){if(!(3<++n))return Ou(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Lu(){try{return!!s.indexedDB}catch(t){return!1}}function Mu(t){return t.objectStore("firebaseLocalStorage")}function Fu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function ju(t){return new we((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Uu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Nu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ae()}function qu(t){return Ou(t).then((function(t){var e=Mu(Fu(t,!1));return e.getAll?ju(e.getAll()):new we((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=dr(t.c,n),t.c=n}return r}))}function Vu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Bu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ae().then((function(){if(Lu()){var t=Vr(),r="__sak"+t;return Eu||(Eu=new Pu),(n=Eu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){H(e.a,(function(e){e(t)}))})),t}))}function Ku(){this.a={},this.type="inMemory"}function Hu(){if(!function(){var t="Node"==Er();if(!(t=Wu()||t&&Ve.INTERNAL.node&&Ve.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Er())throw new C("internal-error","The LocalStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=Wu()||Ve.INTERNAL.node.localStorage,this.type="localStorage"}function Wu(){try{var t=s.localStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function zu(){this.type="nullStorage"}function Gu(){if(!function(){var t="Node"==Er();if(!(t=Qu()||t&&Ve.INTERNAL.node&&Ve.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Er())throw new C("internal-error","The SessionStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=Qu()||Ve.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Qu(){try{var t=s.sessionStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function $u(){var t={};t.Browser=Ju,t.Node=Zu,t.ReactNative=tc,t.Worker=ec,this.a=t[Er()]}Tu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];H(r,(function(e){i.push(Ae().then((function(){return e(t.origin,t.data.data)})))})),Pe(i).then((function(r){var i=[];H(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),H(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},ku.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Au.prototype.close=function(){for(;0<this.a.length;)Ru(this,this.a[0]);this.b=!0},(e=Pu.prototype).set=function(t,e){var n=this,r=!1;return Du(this,(function(e){return ju((e=Mu(Fu(e,!0))).get(t))})).then((function(i){return Du(n,(function(o){if(o=Mu(Fu(o,!0)),i)return i.value=e,ju(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,ju(o.add(a))}))})).then((function(){return n.c[t]=e,Uu(n,t)})).oa((function(){r&&n.b--}))},e.get=function(t){return Du(this,(function(e){return ju(Mu(Fu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},e.U=function(t){var e=this,n=!1;return Du(this,(function(r){return n=!0,e.b++,ju(Mu(Fu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Uu(e,t)})).oa((function(){n&&e.b--}))},e.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=qu(t).then((function(e){0<e.length&&H(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Vu(t),e()}(this),this.a.push(t)},e.ia=function(t){Y(this.a,(function(e){return e==t})),0==this.a.length&&Vu(this)},(e=Bu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},e.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},e.U=function(t){return this.b.then((function(e){return e.U(t)}))},e.ca=function(t){this.a.push(t)},e.ia=function(t){Y(this.a,(function(e){return e==t}))},(e=Ku.prototype).get=function(t){return Ae(this.a[t])},e.set=function(t,e){return this.a[t]=e,Ae()},e.U=function(t){return delete this.a[t],Ae()},e.ca=function(){},e.ia=function(){},(e=Hu.prototype).get=function(t){var e=this;return Ae().then((function(){return qr(e.a.getItem(t))}))},e.set=function(t,e){var n=this;return Ae().then((function(){var r=jr(e);null===r?n.U(t):n.a.setItem(t,r)}))},e.U=function(t){var e=this;return Ae().then((function(){e.a.removeItem(t)}))},e.ca=function(t){s.window&&ln(s.window,"storage",t)},e.ia=function(t){s.window&&dn(s.window,"storage",t)},(e=zu.prototype).get=function(){return Ae(null)},e.set=function(){return Ae()},e.U=function(){return Ae()},e.ca=function(){},e.ia=function(){},(e=Gu.prototype).get=function(t){var e=this;return Ae().then((function(){return qr(e.a.getItem(t))}))},e.set=function(t,e){var n=this;return Ae().then((function(){var r=jr(e);null===r?n.U(t):n.a.setItem(t,r)}))},e.U=function(t){var e=this;return Ae().then((function(){e.a.removeItem(t)}))},e.ca=function(){},e.ia=function(){};var Yu,Xu,Ju={F:Hu,cb:Gu},Zu={F:Hu,cb:Gu},tc={F:Iu,cb:zu},ec={F:Hu,cb:zu},nc={rd:"local",NONE:"none",td:"session"};function rc(){var t=!(Br(Pr())||!Ir()),e=Fr(),n=Or();this.m=t,this.h=e,this.l=n,this.a={},Yu||(Yu=new $u),t=Yu;try{this.g=!lr()&&Gr()||!s.indexedDB?new t.a.F:new Bu(Tr()?new Ku:new t.a.F)}catch(t){this.g=new Ku,this.h=!0}try{this.i=new t.a.cb}catch(t){this.i=new Ku}this.v=new Ku,this.f=w(this.Zb,this),this.b={}}function ic(){return Xu||(Xu=new rc),Xu}function oc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function ac(t,e){return"firebase:"+t.name+(e?":"+e:"")}function sc(t,e,n){return n=ac(e,n),"local"==e.F&&(t.b[n]=null),oc(t,e.F).U(n)}function uc(t){t.c&&(clearInterval(t.c),t.c=null)}function cc(t){this.a=t,this.b=ic()}(e=rc.prototype).get=function(t,e){return oc(this,t.F).get(ac(t,e))},e.set=function(t,e,n){var r=ac(t,n),i=this,o=oc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},e.addListener=function(t,e,n){t=ac(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),dt(this.a)&&(oc(this,"local").ca(this.f),this.h||(lr()||!Gr())&&s.indexedDB||!this.l||function(t){uc(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ze({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},e.removeListener=function(t,e,n){t=ac(t,e),this.a[t]&&(Y(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),dt(this.a)&&(oc(this,"local").ia(this.f),uc(this))},e.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?oc(this,"local").ia(this.f):uc(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.nb(e))},Qt&&se&&10==se&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else H(t,w(this.nb,this))},e.nb=function(t){this.a[t]&&H(this.a[t],(function(t){t()}))};var hc,lc={name:"authEvent",F:"local"};function fc(){this.a=ic()}function pc(t,e){this.b=dc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===hc&&(hc=s.Int32Array?new Int32Array(wc):wc),this.reset()}E(pc,(function(){this.b=-1}));for(var dc=64,vc=dc-1,gc=[],mc=0;mc<vc;mc++)gc[mc]=0;var yc=X(128,gc);function bc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|hc[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function _c(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(bc(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(bc(t),i=0)}}t.c=i,t.g+=n}pc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):J(this.h)};var wc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ic(){pc.call(this,8,Tc)}E(Ic,pc);var Tc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ec(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new fc,this.g=new cc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Sc(t){return new C("invalid-cordova-configuration",t)}function Cc(t){var e=new Ic;_c(e,t),t=[];var n=8*e.g;56>e.c?_c(e,yc,56-e.c):_c(e,yc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(bc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return z(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function kc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Ac(t){return t.f||(t.f=t.ma().then((function(){return new we((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Nc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=so(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=qr(qn(o=Vn(i),"firebaseError")||null))?k(o):null)?new Ko(r.c,r.b,null,null,o,null,r.T()):new Ko(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}kc(t,i)}))}var n=new Ko("unknown",null,null,null,new C("no-auth-event")),r=!1,i=An(500).then((function(){return Nc(t).then((function(){r||kc(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(xr("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Go||(Go=new Wo),function(t){var e=Go;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=xr("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Nc(t){var e=null;return function(t){return t.b.get(lc,t.a).then((function(t){return Ho(t)}))}(t.g).then((function(n){return e=n,sc((n=t.g).b,lc,n.a)})).then((function(){return e}))}function Rc(t){this.a=t,this.b=ic()}(e=Ec.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(wr(void 0)?_r().then((function(){return new we((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Ne(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof xr("universalLinks.subscribe",s))throw Sc("cordova-universal-links-plugin-fix is not installed");if(void 0===xr("BuildInfo.packageName",s))throw Sc("cordova-plugin-buildinfo is not installed");if("function"!=typeof xr("cordova.plugins.browsertab.openUrl",s))throw Sc("cordova-plugin-browsertab is not installed");if("function"!=typeof xr("cordova.InAppBrowser.open",s))throw Sc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new C("cordova-not-ready")}))},e.Pb=function(t,e){return e(new C("operation-not-supported-in-this-environment")),Ae()},e.Nb=function(){return Ne(new C("operation-not-supported-in-this-environment"))},e.ac=function(){return!1},e.Yb=function(){return!0},e.Ub=function(){return!0},e.Ob=function(t,e,n,r){if(this.c)return Ne(new C("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,h=null;return this.c=Ae().then((function(){return Bo(e),Ac(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Ko(e,r,null,o,new C("no-auth-event"),null,i),u=xr("BuildInfo.packageName",s);if("string"!=typeof u)throw new C("invalid-cordova-configuration");var c=xr("BuildInfo.displayName",s),h={};if(Pr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!Pr().toLowerCase().match(/android/))return Ne(new C("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=Cc(o),h.sessionId=o;var l=wu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(lc,a.w(),e)})).then((function(){var e=xr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new C("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=xr("cordova.plugins.browsertab.openUrl",s)))throw new C("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=xr("cordova.InAppBrowser.open",s)))throw new C("invalid-cordova-configuration");e=Pr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new we((function(t,e){u=function(){var e=xr("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=An(2e3).then((function(){e(new C("redirect-cancelled-by-user"))})))},h=function(){Wr()&&c()},o.addEventListener("resume",c,!1),Pr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Nc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),u&&i.Ta(u),i.c=null}))},e.Ea=function(t){this.b.push(t),Ac(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Ko("unknown",null,null,null,new C("no-auth-event")),t(e))}))},e.Ta=function(t){Y(this.b,(function(e){return e==t}))};var Pc={name:"pendingRedirect",F:"session"};function xc(t){return sc(t.b,Pc,t.a)}function Oc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=w(this.s,this),this.b=new Qc,this.C=new Zc,this.g=new Rc(zc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Dc(this.D,this.v,this.m,A,this.J)}function Dc(t,e,n,r,i){var o=Ve.SDK_VERSION||null;return wr()?new Ec(t,e,n,o,r,i):new mu(t,e,n,o,r,i)}function Lc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Mc(t){t.a.Yb()&&Lc(t).o((function(e){var n=new Ko("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));Bc(e)&&t.s(n)})),t.a.Ub()||$c(t.b)}function Fc(t,e){Q(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Pc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?xc(t.g).then((function(){Lc(t).o((function(e){var n=new Ko("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));Bc(e)&&t.s(n)}))})):Mc(t)})).o((function(){Mc(t)}))}function jc(t,e){Y(t.h,(function(t){return t==e}))}Oc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Dc(this.D,this.v,this.m,null,this.J),this.i={}},Oc.prototype.s=function(t){if(!t)throw new C("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return $c(this.b),e};var Uc=new Hr(2e3,1e4),qc=new Hr(3e4,6e4);function Vc(t,e,n,r,i,o,a){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Bc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Kc(t,e,n,r,i){var o;return function(t){return t.b.set(Pc,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(Bc(e))throw new C("operation-not-supported-in-this-environment");return o=e,xc(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new we((function(){})):xc(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function Hc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Uc.get())}Oc.prototype.ra=function(){return this.b.ra()};var Wc={};function zc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Gc(t,e,n,r){var i=zc(e,n,r);return Wc[i]||(Wc[i]=new Oc(t,e,n,r)),Wc[i]}function Qc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function $c(t){t.g||(t.g=!0,Jc(t,!1,null,null))}function Yc(t){t.g&&!t.i&&Jc(t,!1,null,null)}function Xc(t,e){if(t.b=function(){return Ae(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Jc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ne(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Xc(t,n):Xc(t,{user:null}),t.f=[],t.c=[]}function Zc(){}function th(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function eh(t,e){this.a=e,Jr(this,"verificationId",t)}function nh(t,e,n,r){return new Uo(t).gb(e,n).then((function(t){return new eh(t,r)}))}function rh(t){var e=Gi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new C("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Zr(this,{token:t,expirationTime:zr(1e3*e.exp),authTime:zr(1e3*e.auth_time),issuedAtTime:zr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function ih(t,e,n){var r=e&&e[ah];if(!r)throw new C("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=vt(e),this.g=n,this.c=new uo(null,r),this.b=[];var i=this;H(e[oh]||[],(function(t){(t=ri(t))&&i.b.push(t)})),Jr(this,"auth",this.a),Jr(this,"session",this.c),Jr(this,"hints",this.b)}Qc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Qc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Jc(this,!0,null,t.a),Ae()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Jc(t,s,e,null)})).o((function(e){Jc(t,s,null,e)}))}(this,t,e):Ne(new C("invalid-auth-event")):(Jc(this,!1,null,null),Ae())}else Ne(new C("invalid-auth-event"))},Qc.prototype.ra=function(){var t=this;return new we((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new C("timeout");t.a&&t.a.cancel(),t.a=An(qc.get()).then((function(){t.b||(t.g=!0,Jc(t,!0,null,e))}))}(t))}))},Zc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ae()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Ne(new C("invalid-auth-event"))}else Ne(new C("invalid-auth-event"))},eh.prototype.confirm=function(t){return t=qo(this.verificationId,t),this.a(t)};var oh="mfaInfo",ah="mfaPendingCredential";function sh(t,e,n,r){C.call(this,"multi-factor-auth-required",r,e),this.b=new ih(t,e,n),Jr(this,"resolver",this.b)}function uh(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new sh(e,t.serverResponse,n,t.message)}catch(t){}return null}function ch(){}function hh(t){Jr(this,"factorId",t.fa),this.a=t}function lh(t){if(hh.call(this,t),this.a.fa!=Uo.PROVIDER_ID)throw new C("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function fh(t,e){for(var n in Je.call(this,t),e)this[n]=e[n]}function ph(t,e){this.a=t,this.b=[],this.c=w(this.yc,this),ln(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&H(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ai]=t.uid),t.displayName&&(r[ii]=t.displayName),t.enrollmentTime&&(r[oi]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[si]=t.phoneNumber);try{e=new ui(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),dh(this,n)}function dh(t,e){t.b=e,Jr(t,"enrolledFactors",e)}function vh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function gh(t,e){t.stop(),t.b=An(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=s.document,e=null;return Wr()||!t?Ae():new we((function(n){e=function(){Wr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){gh(t,!0)})).o((function(e){t.i(e)&&gh(t,!1)}))}function mh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function yh(t,e){void 0===e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function bh(t,e){t.b=zi(e[es]||""),t.a=e.refreshToken,yh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function _h(t,e){return function(t,e){return new we((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?hs(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(uu(t)):t.access_token&&t.refresh_token?n(t):r(new C("internal-error")):r(new C("network-request-failed"))}),"POST",Zn(e).toString(),t.g,t.m.get()):r(new C("internal-error"))}))}(t.f,e).then((function(e){return t.b=zi(e.access_token),t.a=e.refresh_token,yh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function wh(t,e){this.a=t||null,this.b=e||null,Zr(this,{lastSignInTime:zr(e||null),creationTime:zr(t||null)})}function Ih(t,e,n,r,i,o){Zr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Th(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=Ve.SDK_VERSION?Rr(Ve.SDK_VERSION):null;this.a=new Za(this.l,x(A),r),(this.u=t.emulatorConfig||null)&&ss(this.a,this.u),this.h=new mh(this.a),xh(this,e[es]),bh(this.h,e),Jr(this,"refreshToken",this.h.a),Lh(this,n||{}),Tn.call(this),this.P=!1,this.s&&Dr()&&(this.b=Gc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new vh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=w(this.ib,this);var i=this;this.za=null,this.Pa=function(t){i.xa(t.h)},this.qa=null,this.Ba=function(t){Eh(i,t.c)},this.$=null,this.aa=[],this.Oa=function(t){kh(i,t.f)},this.ja=null,this.S=new ph(this,n),Jr(this,"multiFactor",this.S)}function Eh(t,e){t.u=e,ss(t.a,e),t.b&&(e=t.b,t.b=Gc(t.s,t.l,t.m,t.u),t.P&&(jc(e,t),Fc(t.b,t)))}function Sh(t,e){t.qa&&dn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&ln(e,"languageCodeChanged",t.Pa)}function Ch(t,e){t.$&&dn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&ln(e,"emulatorConfigChanged",t.Ba)}function kh(t,e){t.aa=e,cs(t.a,Ve.SDK_VERSION?Rr(Ve.SDK_VERSION,t.aa):null)}function Ah(t,e){t.ja&&dn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&ln(e,"frameworkChanged",t.Oa)}function Nh(t){try{return Ve.app(t.m).auth()}catch(e){throw new C("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Rh(t){t.J||t.D.b||(t.D.start(),dn(t,"tokenChanged",t.ba),ln(t,"tokenChanged",t.ba))}function Ph(t){dn(t,"tokenChanged",t.ba),t.D.stop()}function xh(t,e){t.Aa=e,Jr(t,"_lat",e)}function Oh(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Pe(e).then((function(){return t}))}function Dh(t){t.b&&!t.P&&(t.P=!0,Fc(t.b,t))}function Lh(t,e){Zr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new wh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Mh(){}function Fh(t){return Ae().then((function(){if(t.J)throw new C("app-deleted")}))}function jh(t){return z(t.providerData,(function(t){return t.providerId}))}function Uh(t,e){e&&(qh(t,e.providerId),t.providerData.push(e))}function qh(t,e){Y(t.providerData,(function(t){return t.providerId==e}))}function Vh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Jr(t,e,n)}function Bh(t,e){t!=e&&(Zr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Jr(t,"metadata",function(t){return new wh(t.a,t.b)}(e.metadata)):Jr(t,"metadata",new wh),H(e.providerData,(function(e){Uh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Jr(t,"refreshToken",t.h.a),dh(t.S,e.S.b))}function Kh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return au(t.a,Fs,{idToken:e}).then(w(t.Kc,t))}(t,e).then((function(){return n||Vh(t,"isAnonymous",!1),e}))}))}function Hh(t,e){e[es]&&t.Aa!=e[es]&&(bh(t.h,e),t.dispatchEvent(new fh("tokenChanged")),xh(t,e[es]),Vh(t,"refreshToken",t.h.a))}function Wh(t,e){return Kh(t).then((function(){if(Q(jh(t),e))return Oh(t).then((function(){throw new C("provider-already-linked")}))}))}function zh(t,e,n){return ti({user:t,credential:Vo(e),additionalUserInfo:e=Ji(e),operationType:n})}function Gh(t,e){return Hh(t,e),t.reload().then((function(){return t}))}function Qh(t,e,n,r,i){if(!Dr())return Ne(new C("operation-not-supported-in-this-environment"));if(t.i&&!i)return Ne(t.i);var o=Xi(n.providerId),a=Vr(t.uid+":::"),s=null;(!Fr()||Ir())&&t.s&&n.isOAuthProvider&&(s=wu(t.s,t.l,t.m,e,n,null,a,Ve.SDK_VERSION||null,null,null,t.tenantId,t.u));var u=mr(s,o&&o.va,o&&o.ua);return r=r().then((function(){if(Yh(t),!i)return t.I().then((function(){}))})).then((function(){return Vc(t.b,u,e,n,a,!!s,t.tenantId)})).then((function(){return new we((function(n,r){t.na(e,null,new C("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Hc(t.b,t,e,u,a)}))})).then((function(t){return u&&gr(u),t?ti(t):null})).o((function(t){throw u&&gr(u),t})),Xh(t,r,i)}function $h(t,e,n,r,i){if(!Dr())return Ne(new C("operation-not-supported-in-this-environment"));if(t.i&&!i)return Ne(t.i);var o=null,a=Vr(t.uid+":::");return r=r().then((function(){if(Yh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Oh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(tl,t.w(),e.a)),e})).then((function(){return Kc(t.b,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return el(t.ha);throw o})).then((function(){if(o)throw o})),Xh(t,r,i)}function Yh(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new C("internal-error");throw new C("auth-domain-config-required")}}function Xh(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),Ne(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new fh("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){$(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=uh(e.w(),Nh(t),w(t.jc,t))),n||e}))}function Jh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[es]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new Th(e,n,t);return t.providerData&&H(t.providerData,(function(t){t&&Uh(i,ti(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Zh(t){this.a=t,this.b=ic()}ih.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=vt(e.f);return delete n[oh],delete n[ah],mt(n,t),e.g(n)}))},E(sh,C),ch.prototype.tb=function(t,e,n){return e.type==co?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),mt(n,{phoneVerificationInfo:jo(t.a)}),au(e,Ls,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return mt(n={mfaPendingCredential:n},{phoneVerificationInfo:jo(t.a)}),au(e,Ms,n)}))}(this,t,e)},E(hh,ch),E(lh,hh),E(fh,Je),(e=ph.prototype).yc=function(t){dh(this,function(t){var e=[];return H(t.mfaInfo||[],(function(t){(t=ri(t))&&e.push(t)})),e}(t.hd))},e.Sb=function(){return this.a.I().then((function(t){return new uo(t,null)}))},e.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return Hh(n.a,t),n.a.reload()}))},e.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return au(r,ou,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=W(e.b,(function(t){return t.uid!=n}));return dh(e,r),Hh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},e.w=function(){return{multiFactor:{enrolledFactors:z(this.b,(function(t){return t.w()}))}}},vh.prototype.start=function(){this.a=this.c,gh(this,!0)},vh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},mh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},mh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ne(new C("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?_h(this,{grant_type:"refresh_token",refresh_token:this.a}):Ae(null):Ae({accessToken:this.b.toString(),refreshToken:this.a})},wh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},E(Th,Tn),Th.prototype.xa=function(t){this.za=t,as(this.a,t)},Th.prototype.la=function(){return this.za},Th.prototype.Ga=function(){return J(this.aa)},Th.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Jr(Th.prototype,"providerId","firebase"),(e=Th.prototype).reload=function(){var t=this;return Xh(this,Fh(this).then((function(){return Kh(t).then((function(){return Oh(t)})).then(Mh)})))},e.oc=function(t){return this.I(t).then((function(t){return new rh(t)}))},e.I=function(t){var e=this;return Xh(this,Fh(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new C("internal-error");return t.accessToken!=e.Aa&&(xh(e,t.accessToken),e.dispatchEvent(new fh("tokenChanged"))),Vh(e,"refreshToken",t.refreshToken),t.accessToken})))},e.Kc=function(t){if(!(t=t.users)||!t.length)throw new C("internal-error");Lh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?z(t,(function(t){return new Ih(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Uh(this,e[n]);Vh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new fh("userReloaded",{hd:t}))},e.Lc=function(t){return Yr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},e.ub=function(t){var e=this,n=null;return Xh(this,t.c(this.a,this.uid).then((function(t){return Hh(e,t),n=zh(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},e.Cc=function(t){return Yr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},e.rb=function(t){var e=this,n=null;return Xh(this,Wh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=zh(e,t,"link"),Gh(e,t)})).then((function(){return n})))},e.Dc=function(t,e){var n=this;return Xh(this,Wh(this,"phone").then((function(){return nh(Nh(n),t,e,w(n.rb,n))})))},e.Mc=function(t,e){var n=this;return Xh(this,Ae().then((function(){return nh(Nh(n),t,e,w(n.ub,n))})),!0)},e.Cb=function(t){var e=this;return Xh(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Hh(e,t),e.reload()})))},e.ed=function(t){var e=this;return Xh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Hh(e,t),e.reload()})))},e.Db=function(t){var e=this;return Xh(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return Hh(e,t),e.reload()})))},e.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Fh(this);var e=this;return Xh(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Hh(e,t),Vh(e,"displayName",t.displayName||null),Vh(e,"photoURL",t.photoUrl||null),H(e.providerData,(function(t){"password"===t.providerId&&(Jr(t,"displayName",e.displayName),Jr(t,"photoURL",e.photoURL))})),Oh(e)})).then(Mh))},e.cd=function(t){var e=this;return Xh(this,Kh(this).then((function(n){return Q(jh(e),t)?function(t,e,n){return au(t,xs,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return H(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),H(jh(e),(function(t){n[t]||qh(e,t)})),n[Uo.PROVIDER_ID]||Jr(e,"phoneNumber",null),Oh(e)})):Oh(e).then((function(){throw new C("no-such-provider")}))})))},e.delete=function(){var t=this;return Xh(this,this.I().then((function(e){return au(t.a,Ps,{idToken:e})})).then((function(){t.dispatchEvent(new fh("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");Sh(t,null),Ch(t,null),Ah(t,null),t.N=[],t.J=!0,Ph(t),Jr(t,"refreshToken",null),t.b&&jc(t.b,t)}))},e.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},e.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?w(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?w(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?w(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?w(this.Mb,this):null},e.Ec=function(t){var e=this;return Qh(this,"linkViaPopup",t,(function(){return Wh(e,t.providerId).then((function(){return Oh(e)}))}),!1)},e.Nc=function(t){return Qh(this,"reauthViaPopup",t,(function(){return Ae()}),!0)},e.Fc=function(t){var e=this;return $h(this,"linkViaRedirect",t,(function(){return Wh(e,t.providerId)}),!1)},e.Oc=function(t){return $h(this,"reauthViaRedirect",t,(function(){return Ae()}),!0)},e.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Xh(this,this.I().then((function(n){return Es(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=zh(i,t,"link"),Gh(i,t)})).then((function(){return o})))},e.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Xh(this,Ae().then((function(){return fo(Ss(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=zh(i,t,"reauthenticate"),Hh(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},e.vb=function(t){var e=this,n=null;return Xh(this,this.I().then((function(e){return n=e,void 0===t||dt(t)?{}:Bi(new xi(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},e.Fb=function(t,e){var n=this,r=null;return Xh(this,this.I().then((function(t){return r=t,void 0===e||dt(e)?{}:Bi(new xi(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},e.jc=function(t){var e=null,n=this;return Xh(this,t=fo(Ae(t),n.uid).then((function(t){return e=zh(n,t,"reauthenticate"),Hh(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},e.toJSON=function(){return this.w()},e.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&mt(t,this.metadata.w()),H(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),mt(t,this.S.w()),t};var tl={name:"redirectUser",F:"session"};function el(t){return sc(t.b,tl,t.a)}function nl(t){this.a=t,this.b=ic(),this.c=null,this.f=function(t){var e=ol("local"),n=ol("session"),r=ol("none");return function(t,e,n){var r=ac(e,n),i=oc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=qr(s.localStorage.getItem(r))}catch(t){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(il,t.a).then((function(t){return t?ol(t):e}))}))}))})).then((function(e){return t.c=e,rl(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(ol("local"),this.a,w(this.g,this))}function rl(t,e){var n,r=[];for(n in nc)nc[n]!==e&&r.push(sc(t.b,ol(nc[n]),t.a));return r.push(sc(t.b,il,t.a)),function(t){return new we((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Re(t[s],I(o,s),a);else e(i)}))}(r)}nl.prototype.g=function(){var t=this,e=ol("local");cl(this,(function(){return Ae().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return rl(t,"local").then((function(){t.c=e}))}))}))};var il={name:"persistence",F:"session"};function ol(t){return{name:"authUser",F:t}}function al(t,e){return cl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function sl(t){return cl(t,(function(){return sc(t.b,t.c,t.a)}))}function ul(t,e,n){return cl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Jh(t||{})}))}))}function cl(t,e){return t.f=t.f.then(e,e),t.f}function hl(t){if(this.l=!1,Jr(this,"settings",new th),Jr(this,"app",t),!bl(this).options||!bl(this).options.apiKey)throw new C("invalid-api-key");t=Ve.SDK_VERSION?Rr(Ve.SDK_VERSION):null,this.a=new Za(bl(this).options&&bl(this).options.apiKey,x(A),t),this.P=[],this.s=[],this.N=[],this.Pa=Ve.INTERNAL.createSubscribe(w(this.zc,this)),this.W=void 0,this.ib=Ve.INTERNAL.createSubscribe(w(this.Ac,this)),ml(this,null),this.i=new nl(bl(this).options.apiKey+":"+bl(this).name),this.D=new Zh(bl(this).options.apiKey+":"+bl(this).name),this.$=Tl(this,function(t){var e=bl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(tl,t.a).then((function(t){return t&&e&&(t.authDomain=e),Jh(t||{})}))}(t.D,bl(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),el(t.D)}));return Tl(t,e)}(t).then((function(){return ul(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return al(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:sl(t.i)}))):null})).then((function(e){ml(t,e||null)}));return Tl(t,n)}(this)),this.h=Tl(this,function(t){return t.$.then((function(){return vl(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(ol("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=w(this.Zc,this),this.Ba=w(this.da,this),this.qa=w(this.mc,this),this.za=w(this.wc,this),this.Aa=w(this.xc,this),this.b=null,function(t){var e=bl(t).options.authDomain,n=bl(t).options.apiKey;e&&Dr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Gc(e,n,bl(t).name,t.R),Fc(t.b,t),_l(t)&&Dh(_l(t)),t.m){Dh(t.m);var r=t.m;r.xa(t.la()),Sh(r,t),kh(r=t.m,t.J),Ah(r,t),Eh(r=t.m,t.R),Ch(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=w(this.delete,this),this.INTERNAL.logFramework=w(this.Gc,this),this.u=0,Tn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=Vn(this.R.url);t=ti({protocol:t.c,host:t.a,port:t.g,options:ti({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function ll(t){Je.call(this,"languageCodeChanged"),this.h=t}function fl(t){Je.call(this,"emulatorConfigChanged"),this.c=t}function pl(t){Je.call(this,"frameworkChanged"),this.f=t}function dl(t){return t.Oa||Ne(new C("auth-domain-config-required"))}function vl(t){if(!Dr())return Ne(new C("operation-not-supported-in-this-environment"));var e=dl(t).then((function(){return t.b.ra()})).then((function(t){return t?ti(t):null}));return Tl(t,e)}function gl(t,e){var n={};return n.apiKey=bl(t).options.apiKey,n.authDomain=bl(t).options.authDomain,n.appName=bl(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new Th(t,e);return n&&(i.ha=n),r&&kh(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return _l(t)&&e.uid==_l(t).uid?(Bh(_l(t),e),t.da(e)):(ml(t,e),Dh(e),t.da(e))})).then((function(){Il(t)}))}function ml(t,e){_l(t)&&(function(t,e){Y(t.W,(function(t){return t==e}))}(_l(t),t.Ba),dn(_l(t),"tokenChanged",t.qa),dn(_l(t),"userDeleted",t.za),dn(_l(t),"userInvalidated",t.Aa),Ph(_l(t))),e&&(e.W.push(t.Ba),ln(e,"tokenChanged",t.qa),ln(e,"userDeleted",t.za),ln(e,"userInvalidated",t.Aa),0<t.u&&Rh(e)),Jr(t,"currentUser",e),e&&(e.xa(t.la()),Sh(e,t),kh(e,t.J),Ah(e,t),Eh(e,t.R),Ch(e,t))}function yl(t,e){var n=null,r=null;return Tl(t,e.then((function(e){return n=Vo(e),r=Ji(e),gl(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=uh(e.w(),t,w(t.kc,t))),n||e})).then((function(){return ti({user:_l(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function bl(t){return t.app}function _l(t){return t.currentUser}function wl(t){return _l(t)&&_l(t)._lat||null}function Il(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](wl(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](wl(t))}}function Tl(t,e){return t.P.push(e),e.oa((function(){$(t.P,e)})),e}function El(){}function Sl(){this.a={},this.b=1e12}nl.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new C("invalid-persistence-type"),n=new C("unsupported-persistence-type");t:{for(r in nc)if(nc[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Er()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Lu()&&"none"!==t)throw n;break;default:if(!Or()&&"none"!==t)throw n}}(t),cl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,rl(n,t)})).then((function(){if(n.c=ol(t),e)return n.b.set(n.c,e,n.a)})):Ae()}))},E(hl,Tn),E(ll,Je),E(fl,Je),E(pl,Je),(e=hl.prototype).yb=function(t){return Tl(this,t=this.i.yb(t))},e.xa=function(t){this.aa===t||this.l||(this.aa=t,as(this.a,this.aa),this.dispatchEvent(new ll(this.la())))},e.la=function(){return this.aa},e.fd=function(){var t=s.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},e.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new C("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&_r().then((function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,ss(this.a,this.R),this.dispatchEvent(new fl(this.R))}},e.Gc=function(t){this.J.push(t),cs(this.a,Ve.SDK_VERSION?Rr(Ve.SDK_VERSION,this.J):null),this.dispatchEvent(new pl(this.J))},e.Ga=function(){return J(this.J)},e.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},e.T=function(){return this.S},e.toJSON=function(){return{apiKey:bl(this).options.apiKey,authDomain:bl(this).options.authDomain,appName:bl(this).name,currentUser:_l(this)&&_l(this).w()}},e.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},e.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?w(this.ic,this):null},e.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return yl(i,Ts(i.a,o))}))},e.Xc=function(t){if(!Dr())return Ne(new C("operation-not-supported-in-this-environment"));var e=this,n=Xi(t.providerId),r=Vr(),i=null;(!Fr()||Ir())&&bl(this).options.authDomain&&t.isOAuthProvider&&(i=wu(bl(this).options.authDomain,bl(this).options.apiKey,bl(this).name,"signInViaPopup",t,null,r,Ve.SDK_VERSION||null,null,null,this.T(),this.R));var o=mr(i,n&&n.va,n&&n.ua);return Tl(this,n=dl(this).then((function(n){return Vc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new we((function(t,n){e.na("signInViaPopup",null,new C("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Hc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&gr(o),t?ti(t):null})).o((function(t){throw o&&gr(o),t})))},e.Yc=function(t){if(!Dr())return Ne(new C("operation-not-supported-in-this-environment"));var e=this,n=dl(this).then((function(){return function(t){return cl(t,(function(){return t.b.set(il,t.c.F,t.a)}))}(e.i)})).then((function(){return Kc(e.b,"signInViaRedirect",t,void 0,e.T())}));return Tl(this,n)},e.ra=function(){var t=this;return vl(this).then((function(e){return t.b&&Yc(t.b.b),e})).o((function(e){throw t.b&&Yc(t.b.b),e}))},e.dd=function(t){if(!t)return Ne(new C("null-user"));if(this.S!=t.tenantId)return Ne(new C("tenant-id-mismatch"));var e=this,n={};n.apiKey=bl(this).options.apiKey,n.authDomain=bl(this).options.authDomain,n.appName=bl(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[es]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new Th(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&kh(e,r),Bh(e,t),e}(t,n,e.D,e.Ga());return Tl(this,this.h.then((function(){if(bl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return _l(e)&&t.uid==_l(e).uid?(Bh(_l(e),t),e.da(t)):(ml(e,r),Dh(r),e.da(r))})).then((function(){Il(e)})))},e.Bb=function(){var t=this;return Tl(this,this.h.then((function(){return t.b&&Yc(t.b.b),_l(t)?(ml(t,null),sl(t.i).then((function(){Il(t)}))):Ae()})))},e.Zc=function(){var t=this;return ul(this.i,bl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=_l(t)&&e){n=_l(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Bh(_l(t),e),_l(t).I();(_l(t)||e)&&(ml(t,e),e&&(Dh(e),e.ha=t.D),t.b&&Fc(t.b,t),Il(t))}}))},e.da=function(t){return al(this.i,t)},e.mc=function(){Il(this),this.da(_l(this))},e.wc=function(){this.Bb()},e.xc=function(){this.Bb()},e.kc=function(t){var e=this;return this.h.then((function(){return yl(e,Ae(t))}))},e.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(_l(e))}))},e.Ac=function(t){var e=this;!function(t,e){t.N.push(e),Tl(t,t.h.then((function(){!t.l&&Q(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(wl(t)))})))}(this,(function(){t.next(_l(e))}))},e.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(_l(r)):"function"==typeof t.next&&t.next(_l(r))})),this.Pa(t,e,n)},e.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof t?t(_l(r)):"function"==typeof t.next&&t.next(_l(r))})),this.ib(t,e,n)},e.nc=function(t){var e=this;return Tl(this,this.h.then((function(){return _l(e)?_l(e).I(t).then((function(t){return{accessToken:t}})):null})))},e.Tc=function(t){var e=this;return this.h.then((function(){return yl(e,au(e.a,tu,{token:t}))})).then((function(t){var n=t.user;return Vh(n,"isAnonymous",!1),e.da(n),t}))},e.Uc=function(t,e){var n=this;return this.h.then((function(){return yl(n,au(n.a,eu,{email:t,password:e}))}))},e.dc=function(t,e){var n=this;return this.h.then((function(){return yl(n,au(n.a,Ns,{email:t,password:e}))}))},e.ab=function(t){var e=this;return this.h.then((function(){return yl(e,t.ka(e.a))}))},e.Sc=function(t){return Yr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},e.Ab=function(){var t=this;return this.h.then((function(){var e=_l(t);if(e&&e.isAnonymous){var n=ti({providerId:null,isNewUser:!1});return ti({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return yl(t,t.a.Ab()).then((function(e){var n=e.user;return Vh(n,"isAnonymous",!0),t.da(n),e}))}))},e.getUid=function(){return _l(this)&&_l(this).uid||null},e.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&_l(this)&&Rh(_l(this))},e.Pc=function(t){var e=this;H(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&_l(this)&&Ph(_l(this)),this.removeAuthTokenListener(t)},e.addAuthTokenListener=function(t){var e=this;this.s.push(t),Tl(this,this.h.then((function(){e.l||Q(e.s,t)&&t(wl(e))})))},e.removeAuthTokenListener=function(t){Y(this.s,(function(e){return e==t}))},e.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(ol("local"),t.a,this.ja),this.b&&(jc(this.b,this),Yc(this.b.b)),Promise.resolve()},e.hc=function(t){return Tl(this,function(t,e){return au(t,Rs,{identifier:e,continueUri:Lr()?fr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},e.Bc=function(t){return!!Lo(t)},e.xb=function(t,e){var n=this;return Tl(this,Ae().then((function(){var t=new xi(e);if(!t.c)throw new C("argument-error",Li+" must be true when sending sign in link to email");return Bi(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},e.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},e.ob=function(t,e){return Tl(this,this.a.ob(t,e).then((function(){})))},e.Sa=function(t){return Tl(this,this.a.Sa(t).then((function(t){return new ci(t)})))},e.kb=function(t){return Tl(this,this.a.kb(t).then((function(){})))},e.wb=function(t,e){var n=this;return Tl(this,Ae().then((function(){return void 0===e||dt(e)?{}:Bi(new xi(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},e.Wc=function(t,e){return Tl(this,nh(this,t,e,w(this.ab,this)))},e.Vc=function(t,e){var n=this;return Tl(this,Ae().then((function(){var r=e||fr(),i=Do(t,r);if(!(r=Lo(r)))throw new C("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new C("tenant-id-mismatch");return n.ab(i)})))},El.prototype.render=function(){},El.prototype.reset=function(){},El.prototype.getResponse=function(){},El.prototype.execute=function(){};var Cl=null;function kl(t,e){return(e=Al(e))&&t.a[e]||null}function Al(t){return(t=void 0===t?1e12:t)?t.toString():null}function Nl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ce(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():ln(this.f,"click",this.i)}function Rl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Pl(){}function xl(){}Sl.prototype.render=function(t,e){return this.a[this.b.toString()]=new Nl(t,e),this.b++},Sl.prototype.reset=function(t){var e=kl(this,t);t=Al(t),e&&t&&(e.delete(),delete this.a[t])},Sl.prototype.getResponse=function(t){return(t=kl(this,t))?t.getResponse():null},Sl.prototype.execute=function(t){(t=kl(this,t))&&t.execute()},Nl.prototype.getResponse=function(){return Rl(this),this.b},Nl.prototype.execute=function(){Rl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Nl.prototype.delete=function(){Rl(this),this.g=!0,clearTimeout(this.a),this.a=null,dn(this.f,"click",this.i)},Jr(Pl,"FACTOR_ID","phone"),xl.prototype.g=function(){return Cl||(Cl=new Sl),Ae(Cl)},xl.prototype.c=function(){};var Ol=null;function Dl(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ll=new bt(Tt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ml=new Hr(3e4,6e4);Dl.prototype.g=function(t){var e=this;return new we((function(n,r){var i=setTimeout((function(){r(new C("network-request-failed"))}),Ml.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new C("internal-error"));delete s[e.a]},Ae(za(kt(Ll,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new C("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Dl.prototype.c=function(){this.b--};var Fl=null;function jl(t,e,n,r,i,o,a){if(Jr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,a?(Ol||(Ol=new xl),a=Ol):(Fl||(Fl=new Dl),a=Fl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Vl])throw new C("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Bl],!s.document)throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ce(e)||!this.i&&ce(e).hasChildNodes())throw new C("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Za(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Ul];this.a[Ul]=function(t){if(Kl(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=xr(c,s);"function"==typeof e&&e(t)}};var h=this.a[ql];this.a[ql]=function(){if(Kl(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=xr(h,s);"function"==typeof t&&t()}}}var Ul="callback",ql="expired-callback",Vl="sitekey",Bl="size";function Kl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Hl(t,e){return t.h.push(e),e.oa((function(){$(t.h,e)})),e}function Wl(t){if(t.J)throw new C("internal-error","RecaptchaVerifier instance has been destroyed.")}function zl(t,e,n){var r=!1;try{this.b=n||Ve.app()}catch(t){throw new C("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new C("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Ve.SDK_VERSION?Rr(Ve.SDK_VERSION,o):null,jl.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,x(A),r)}function Gl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new C("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Ql.length)throw new C("internal-error","Argument validator received an unsupported number of arguments.");n=Ql[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new C("argument-error",t+" failed: "+r)}(e=jl.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Hl(this,Ae().then((function(){if(Lr()&&!Tr())return _r();throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,au(t.s,Ks,{})})).then((function(e){t.a[Vl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},e.render=function(){Wl(this);var t=this;return Hl(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=ce(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ue&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Ht(a.name),'"'),a.type){o.push(' type="',Ht(a.type),'"');var s={};mt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=ve(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):he(o,a)),2<r.length&&de(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},e.verify=function(){Wl(this);var t=this;return Hl(this,this.render().then((function(e){return new we((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Y(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},e.reset=function(){Wl(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Wl(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ce(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},E(zl,jl);var Ql="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function $l(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Yl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Xl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:v}}function Jl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Zl(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function tf(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function ef(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function nf(t){return v(t)&&"string"==typeof t.uid}function rf(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function of(t,e){for(var n in e){var r=e[n].name;t[r]=uf(r,t[n],e[n].j)}}function af(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:I((function(t){return this[t]}),n),set:I((function(t,e,n,r){Gl(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function sf(t,e,n,r){t[e]=uf(e,n,r)}function uf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Gl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}of(hl.prototype,{kb:{name:"applyActionCode",j:[$l("code")]},Sa:{name:"checkActionCode",j:[$l("code")]},ob:{name:"confirmPasswordReset",j:[$l("code"),$l("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[$l("email"),$l("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[$l("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[$l("emailLink")]},Hc:{name:"onAuthStateChanged",j:[rf(Xl(),Jl(),"nextOrObserver"),Jl("opt_error",!0),Jl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[rf(Xl(),Jl(),"nextOrObserver"),Jl("opt_error",!0),Jl("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[$l("email"),rf(Xl("opt_actionCodeSettings",!0),Zl(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[$l("email"),Xl("actionCodeSettings")]},yb:{name:"setPersistence",j:[$l("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[tf()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[tf()]},Tc:{name:"signInWithCustomToken",j:[$l("token")]},Uc:{name:"signInWithEmailAndPassword",j:[$l("email"),$l("password")]},Vc:{name:"signInWithEmailLink",j:[$l("email"),$l("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[$l("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[rf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof Th)}},Zl(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[$l(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[$l("url"),Xl("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[$l("code")]}}),af(hl.prototype,{lc:{name:"languageCode",lb:rf($l(),Zl(),"languageCode")},ti:{name:"tenantId",lb:rf($l(),Zl(),"tenantId")}}),hl.Persistence=nc,hl.Persistence.LOCAL="local",hl.Persistence.SESSION="session",hl.Persistence.NONE="none",of(Th.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Yl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Yl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[tf()]},rb:{name:"linkWithCredential",j:[tf()]},Dc:{name:"linkWithPhoneNumber",j:[$l("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[tf()]},ub:{name:"reauthenticateWithCredential",j:[tf()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[$l("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[rf(Xl("opt_actionCodeSettings",!0),Zl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[$l(null,!0)]},cd:{name:"unlink",j:[$l("provider")]},Cb:{name:"updateEmail",j:[$l("email")]},Db:{name:"updatePassword",j:[$l("password")]},ed:{name:"updatePhoneNumber",j:[tf("phone")]},Eb:{name:"updateProfile",j:[Xl("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[$l("email"),rf(Xl("opt_actionCodeSettings",!0),Zl(null,!0),"opt_actionCodeSettings",!0)]}}),of(Sl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),of(El.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),of(we.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),af(th.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Yl("appVerificationDisabledForTesting")}}),of(eh.prototype,{confirm:{name:"confirm",j:[$l("verificationCode")]}}),sf(lo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[bo,xo,Fo,go],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[rf($l(),Xl(),"json")]),sf(Oo,"credential",(function(t,e){return new Po(t,e)}),[$l("email"),$l("password")]),of(Po.prototype,{w:{name:"toJSON",j:[$l(null,!0)]}}),of(To.prototype,{Ca:{name:"addScope",j:[$l("scope")]},Ka:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),sf(To,"credential",Eo,[rf($l(),Xl(),"token")]),sf(Oo,"credentialWithLink",Do,[$l("email"),$l("emailLink")]),of(So.prototype,{Ca:{name:"addScope",j:[$l("scope")]},Ka:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),sf(So,"credential",Co,[rf($l(),Xl(),"token")]),of(ko.prototype,{Ca:{name:"addScope",j:[$l("scope")]},Ka:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),sf(ko,"credential",Ao,[rf($l(),rf(Xl(),Zl()),"idToken"),rf($l(),Zl(),"accessToken",!0)]),of(No.prototype,{Ka:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),sf(No,"credential",Ro,[rf($l(),Xl(),"token"),$l("secret",!0)]),of(Io.prototype,{Ca:{name:"addScope",j:[$l("scope")]},credential:{name:"credential",j:[rf($l(),rf(Xl(),Zl()),"optionsOrIdToken"),rf($l(),Zl(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),of(mo.prototype,{w:{name:"toJSON",j:[$l(null,!0)]}}),of(po.prototype,{w:{name:"toJSON",j:[$l(null,!0)]}}),sf(Uo,"credential",qo,[$l("verificationId"),$l("verificationCode")]),of(Uo.prototype,{gb:{name:"verifyPhoneNumber",j:[rf($l(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?ef(t.session,co)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?ef(t.session,ho)&&nf(t.multiFactorHint):t.session&&t.multiFactorUid?ef(t.session,ho)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),of(Mo.prototype,{w:{name:"toJSON",j:[$l(null,!0)]}}),of(C.prototype,{toJSON:{name:"toJSON",j:[$l(null,!0)]}}),of($o.prototype,{toJSON:{name:"toJSON",j:[$l(null,!0)]}}),of(Qo.prototype,{toJSON:{name:"toJSON",j:[$l(null,!0)]}}),of(sh.prototype,{toJSON:{name:"toJSON",j:[$l(null,!0)]}}),of(ih.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),of(ph.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},$l("displayName",!0)]},bd:{name:"unenroll",j:[rf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:nf},$l(),"multiFactorInfoIdentifier")]}}),of(zl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),sf(Ti,"parseLink",Pi,[$l("link")]),sf(Pl,"assertion",(function(t){return new lh(t)}),[tf("phone")]),function(){if(void 0===Ve||!Ve.INTERNAL||!Ve.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:li,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:hi,VERIFY_AND_CHANGE_EMAIL:fi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:hl,AuthCredential:lo,Error:C};sf(t,"EmailAuthProvider",Oo,[]),sf(t,"FacebookAuthProvider",To,[]),sf(t,"GithubAuthProvider",So,[]),sf(t,"GoogleAuthProvider",ko,[]),sf(t,"TwitterAuthProvider",No,[]),sf(t,"OAuthProvider",Io,[$l("providerId")]),sf(t,"SAMLAuthProvider",wo,[$l("providerId")]),sf(t,"PhoneAuthProvider",Uo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof hl)}}]),sf(t,"RecaptchaVerifier",zl,[rf($l(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Xl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Ve.app.App)}}]),sf(t,"ActionCodeURL",Ti,[]),sf(t,"PhoneMultiFactorGenerator",Pl,[]),Ve.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new hl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),Ve.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:w((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:w(t.nc,t),addAuthTokenListener:w(t.cc,t),removeAuthTokenListener:w(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Ve.registerVersion("@firebase/auth","0.16.8"),Ve.INTERNAL.extendNamespace({User:Th})}()}).apply(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Be,Ke,He,We=Be={};function ze(){throw new Error("setTimeout has not been defined")}function Ge(){throw new Error("clearTimeout has not been defined")}function Qe(t){if(Ke===setTimeout)return setTimeout(t,0);if((Ke===ze||!Ke)&&setTimeout)return Ke=setTimeout,setTimeout(t,0);try{return Ke(t,0)}catch(e){try{return Ke.call(null,t,0)}catch(e){return Ke.call(this,t,0)}}}!function(){try{Ke="function"==typeof setTimeout?setTimeout:ze}catch(t){Ke=ze}try{He="function"==typeof clearTimeout?clearTimeout:Ge}catch(t){He=Ge}}();var $e,Ye=[],Xe=!1,Je=-1;function Ze(){Xe&&$e&&(Xe=!1,$e.length?Ye=$e.concat(Ye):Je=-1,Ye.length&&tn())}function tn(){if(!Xe){var t=Qe(Ze);Xe=!0;for(var e=Ye.length;e;){for($e=Ye,Ye=[];++Je<e;)$e&&$e[Je].run();Je=-1,e=Ye.length}$e=null,Xe=!1,function(t){if(He===clearTimeout)return clearTimeout(t);if((He===Ge||!He)&&clearTimeout)return He=clearTimeout,clearTimeout(t);try{He(t)}catch(e){try{return He.call(null,t)}catch(e){return He.call(this,t)}}}(t)}}function en(t,e){this.fun=t,this.array=e}function nn(){}We.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Ye.push(new en(t,e)),1!==Ye.length||Xe||Qe(tn)},en.prototype.run=function(){this.fun.apply(null,this.array)},We.title="browser",We.browser=!0,We.env={},We.argv=[],We.version="",We.versions={},We.on=nn,We.addListener=nn,We.once=nn,We.off=nn,We.removeListener=nn,We.removeAllListeners=nn,We.emit=nn,We.prependListener=nn,We.prependOnceListener=nn,We.listeners=function(t){return[]},We.binding=function(t){throw new Error("process.binding is not supported")},We.cwd=function(){return"/"},We.chdir=function(t){throw new Error("process.chdir is not supported")},We.umask=function(){return 0};var rn="";function on(t){rn=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var an,sn=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),zt(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Wt(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),un=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Qt(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),cn=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new sn(e)}}catch(t){}return new un},hn=cn("localStorage"),ln=cn("sessionStorage"),fn=new Ee("@firebase/database"),pn=(an=1,function(){return an++}),dn=function(t){var e=se(t),n=new Zt;n.update(e);var r=n.digest();return Ct.encodeByteArray(r)},vn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=vn.apply(null,i):n+="object"==typeof i?zt(i):i,n+=" "}return n},gn=null,mn=!0,yn=function(t,e){Tt(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(fn.logLevel=ge.VERBOSE,gn=fn.log.bind(fn),e&&ln.set("logging_enabled",!0)):"function"==typeof t?gn=t:(gn=null,ln.remove("logging_enabled"))},bn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===mn&&(mn=!1,null===gn&&!0===ln.get("logging_enabled")&&yn(!0)),gn){var n=vn.apply(null,t);gn(n)}},_n=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];bn.apply(void 0,bt([t],yt(e)))}},wn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+vn.apply(void 0,bt([],yt(t)));fn.error(n)},In=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+vn.apply(void 0,bt([],yt(t)));throw fn.error(n),new Error(n)},Tn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+vn.apply(void 0,bt([],yt(t)));fn.warn(n)},En=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Sn=function(t,e){if(t===e)return 0;if("[MIN_NAME]"===t||"[MAX_NAME]"===e)return-1;if("[MIN_NAME]"===e||"[MAX_NAME]"===t)return 1;var n=On(t),r=On(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},Cn=function(t,e){return t===e?0:t<e?-1:1},kn=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+zt(e))},An=function(t){if("object"!=typeof t||null===t)return zt(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=zt(e[i]),r+=":",r+=An(t[e[i]]);return r+="}"},Nn=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var Pn=function(t){Tt(!En(t),"Invalid JSON number");var e,n,r,i,o,a=1023;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),a))+a,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var u=s.join(""),c="";for(o=0;o<64;o+=8){var h=parseInt(u.substr(o,8),2).toString(16);1===h.length&&(h="0"+h),c+=h}return c.toLowerCase()};var xn=new RegExp("^-?(0*)\\d{1,10}$"),On=function(t){if(xn.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Dn=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw Tn("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Ln=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},Mn=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then((function(t){return n.appCheck=t}))}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise((function(n,r){setTimeout((function(){e.appCheck?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((function(e){return e.addTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){Tn('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),Fn=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(t){return r.auth_=t}))}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(bn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):new Promise((function(n,r){setTimeout((function(){e.auth_?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Tn(t)},t}(),jn=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),Un=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,qn=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=hn.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&hn.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}();function Vn(t,e,n){var r;if(Tt("string"==typeof e,"typeof type must == string"),Tt("object"==typeof n,"typeof params must == object"),"websocket"===e)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if("long_polling"!==e)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return Rn(n,(function(t,e){i.push(t+"="+e)})),r+i.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Qt(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return At(this.counters_)},t}(),Kn={},Hn={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(t){var e=t.toString();return Kn[e]||(Kn[e]=new Bn),Kn[e]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var zn=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&Dn((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},t}(),Gn=function(){function t(t,e,n,r,i,o,a){var s=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=_n(t),this.stats_=Wn(e),this.urlFn=function(t){return s.appCheckToken&&(t.ac=s.appCheckToken),Vn(e,"long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new zn(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Ft()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Qn((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=yt(t,5),i=r[0],o=r[1],a=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=yt(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&Un.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!Ft()&&(!!t.forceAllow_||!(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=zt(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=St(e),Ct.encodeByteArray(n,!0)),i=Nn(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Ft()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=zt(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Qn=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Ft())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=pn(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))o='<script>document.domain="'+document.domain+'";<\/script>';var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(t){bn("frame writing exception"),t.stack&&bn(t.stack),bn(t)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||bn("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;Ft()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){bn("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},t}(),$n=null;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */"undefined"!=typeof MozWebSocket?$n=MozWebSocket:"undefined"!=typeof WebSocket&&($n=WebSocket);var Yn=function(){function t(e,n,r,i,o,a,s){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=_n(this.connId),this.stats_=Wn(n),this.connURL=t.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var i={v:"5"};return!Ft()&&"undefined"!=typeof location&&location.hostname&&Un.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),Vn(t,"websocket",i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,hn.set("previous_websocket_failure",!0);try{if(Ft()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+rn+"/"+Be.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization=this.authToken),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var o={},a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a}),this.mySock=new $n(this.connURL,[],i)}else{i={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new $n(this.connURL,[],i)}}catch(t){this.log_("Error instantiating WebSocket.");var s=t.message||t.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==$n&&!t.forceDisallow_},t.previouslyFailed=function(){return hn.isInMemoryStorage||!0===hn.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){hn.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Wt(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Tt(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=zt(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=Nn(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Xn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Gn,Yn]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=Yn&&Yn.isAvailable(),o=i&&!Yn.previouslyFailed();if(e.webSocketOnly&&(i||Tn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Yn];else{var a=this.transports_=[];try{for(var s=mt(t.ALL_TRANSPORTS),u=s.next();!u.done;u=s.next()){var c=u.value;c&&c.isAvailable()&&a.push(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Jn=function(){function t(t,e,n,r,i,o,a,s,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=_n("c:"+this.id+":"),this.transportManager_=new Xn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ln((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=kn("t",t),n=kn("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=kn("t",t),n=kn("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=kn("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?wn("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wn("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Tn("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ln((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ln((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(hn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Zn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),tr=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Tt(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=bt([],yt(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Tt(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),er=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Ot()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return pt(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Tt("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(tr),nr=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(){return new nr("")}function ir(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function or(t){return t.pieces_.length-t.pieceNum_}function ar(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new nr(t.pieces_,e)}function sr(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ur(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function cr(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new nr(e,0)}function hr(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof nr)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new nr(n,0)}function lr(t){return t.pieceNum_>=t.pieces_.length}function fr(t,e){var n=ir(t),r=ir(e);if(null===n)return e;if(n===r)return fr(ar(t),ar(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function pr(t,e){for(var n=ur(t,0),r=ur(e,0),i=0;i<n.length&&i<r.length;i++){var o=Sn(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function dr(t,e){if(or(t)!==or(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function vr(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(or(t)>or(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var gr=function(t,e){this.errorPrefix_=e,this.parts_=ur(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=ue(this.parts_[n]);mr(this)};function mr(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+yr(t))}function yr(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var br,_r,wr=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return pt(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Tt("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(tr),Ir=function(t){function e(n,r,i,o,a,s,u,c){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=o,h.onServerInfoUpdate_=a,h.authTokenProvider_=s,h.appCheckTokenProvider_=u,h.authOverride_=c,h.id=e.nextPersistentConnectionId_++,h.log_=_n("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=1e3,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,c&&!Ft())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return wr.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&er.getInstance().on("online",h.onOnline_,h),h}return pt(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(zt(i)),Tt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new Rt,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[o];void 0!==t&&i===t&&(delete e.outstandingGets_[o],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Tt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Tt(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Qt(t,"w")){var n=$t(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();Tn("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=Gt(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},e.prototype.tryAuth=function(){var t,e=this;if(this.connected_&&this.authToken_){var n=this.authToken_,r=(t=Gt(n).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,(function(t){var r=t.s,i=t.d||"error";e.authToken_===n&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)}))},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Tt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+zt(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):wn("Unrecognized action received from server: "+zt(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Tt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return vt(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,c,h,l,f,p,d,v=this;return gt(this,(function(g){switch(g.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this.lastSessionId,a=!1,s=null,u=function(){s?s.close():(a=!0,r())},c=function(t){Tt(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(t)},this.realtime_={close:u,sendRequest:c},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,g.label=1;case 1:return g.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return l=yt.apply(void 0,[g.sent(),2]),f=l[0],p=l[1],a?bn("getToken() completed but was canceled"):(bn("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,s=new Jn(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,(function(t){Tn(t+" ("+v.repoInfo_.toString()+")"),v.interrupt("server_kill")}),o)),[3,4];case 3:return d=g.sent(),this.log_("Failed to get token: "+d),a||(this.repoInfo_.nodeAdmin&&Tn(d),u()),[3,4];case 4:return[2]}}))}))},e.prototype.interrupt=function(t){bn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){bn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Yt(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return An(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new nr(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){bn("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){bn("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=mt(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,mt(a.values())),u=s.next();!u.done;u=s.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},e.prototype.sendConnectStats_=function(){var t={},e="js";Ft()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+rn.replace(/\./g,"-")]=1,Ot()?t["framework.cordova"]=1:Mt()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=er.getInstance().currentlyOnline();return Yt(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Zn),Tr=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Er=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Tr("[MIN_NAME]",t),r=new Tr("[MIN_NAME]",e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Tr.MIN},t}(),Sr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return br},set:function(t){br=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return Sn(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Et("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Tr.MIN},e.prototype.maxPost=function(){return new Tr("[MAX_NAME]",br)},e.prototype.makePost=function(t,e){return Tt("string"==typeof t,"KeyIndex indexValue must always be a string."),new Tr(t,br)},e.prototype.toString=function(){return".key"},e}(Er),Cr=new Sr,kr=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ar=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Rr.EMPTY_NODE,this.right=null!=o?o:Rr.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Rr.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Rr.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Nr=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ar(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Rr=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ar.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ar.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new kr(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new kr(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new kr(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new kr(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Nr,t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Pr(t,e){return Sn(t.name,e.name)}function xr(t,e){return Sn(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Or,Dr,Lr,Mr=function(t){return"number"==typeof t?"number:"+Pn(t):"string:"+t},Fr=function(t){if(t.isLeafNode()){var e=t.val();Tt("string"==typeof e||"number"==typeof e||"object"==typeof e&&Qt(e,".sv"),"Priority must be a string or number.")}else Tt(t===_r||t.isEmpty(),"priority of unexpected type.");Tt(t===_r||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},jr=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Tt(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Fr(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Or},set:function(t){Or=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return lr(e)?this:".priority"===ir(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=ir(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Tt(".priority"!==r||1===or(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ar(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Mr(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?Pn(this.value_):this.value_,this.lazyHash_=dn(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Tt(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return Tt(i>=0,"Unknown leaf type: "+n),Tt(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var Ur,qr,Vr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?Sn(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Tr.MIN},e.prototype.maxPost=function(){return new Tr("[MAX_NAME]",new jr("[PRIORITY-POST]",Lr))},e.prototype.makePost=function(t,e){var n=Dr(t);return new Tr(e,new jr("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Er),Br=new Vr,Kr=Math.log(2),Hr=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Kr,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Wr=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new Ar(a,o.node,Ar.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),h=i(u+1,r);return o=t[u],a=n?n(o):o,new Ar(a,o.node,Ar.BLACK,c,h)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),h=t[o],l=n?n(h):h;u(new Ar(l,h.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var h=e.nextBitIsOne(),l=Math.pow(2,e.count-(c+1));h?s(l,Ar.BLACK):(s(l,Ar.BLACK),s(l,Ar.RED))}return o}(new Hr(t.length));return new Rr(r||e,o)},zr={},Gr=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Tt(zr&&Br,"ChildrenNode.ts has not been loaded"),Ur=Ur||new t({".priority":zr},{".priority":Br})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=$t(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Rr?e:null},t.prototype.hasIndex=function(t){return Qt(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Tt(e!==Cr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(Tr.Wrap),s=a.getNext();s;)o=o||e.isDefinedOn(s.node),i.push(s),s=a.getNext();r=o?Wr(i,e.getCompare()):zr;var u=e.toString(),c=dt({},this.indexSet_);c[u]=e;var h=dt({},this.indexes_);return h[u]=r,new t(h,c)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Xt(this.indexes_,(function(t,i){var o=$t(r.indexSet_,i);if(Tt(o,"Missing index implementation for "+i),t===zr){if(o.isDefinedOn(e.node)){for(var a=[],s=n.getIterator(Tr.Wrap),u=s.getNext();u;)u.name!==e.name&&a.push(u),u=s.getNext();return a.push(e),Wr(a,o.getCompare())}return zr}var c=n.get(e.name),h=t;return c&&(h=h.remove(new Tr(e.name,c))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Xt(this.indexes_,(function(t){if(t===zr)return t;var r=n.get(e.name);return r?t.remove(new Tr(e.name,r)):t})),this.indexSet_)},t}(),Qr=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Fr(this.priorityNode_),this.children_.isEmpty()&&Tt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return qr||(qr=new t(new Rr(xr),null,Gr.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||qr},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?qr:e},t.prototype.getChild=function(t){var e=ir(t);return null===e?this:this.getImmediateChild(e).getChild(ar(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Tt(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Tr(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?qr:this.priorityNode_;return new t(i,a,o)},t.prototype.updateChild=function(t,e){var n=ir(t);if(null===n)return e;Tt(".priority"!==ir(t)||1===or(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(ar(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Br,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Mr(this.getPriority().val())+":"),this.forEachChild(Br,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":dn(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Tr(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Tr(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Tr(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Tr.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Tr.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===$r?-1:0},t.prototype.withIndex=function(e){if(e===Cr||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Cr||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Br),r=e.getIterator(Br),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Cr?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),$r=new(function(t){function e(){return t.call(this,new Rr(xr),Qr.EMPTY_NODE,Gr.Default)||this}return pt(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Qr.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Qr));Object.defineProperties(Tr,{MIN:{value:new Tr("[MIN_NAME]",Qr.EMPTY_NODE)},MAX:{value:new Tr("[MAX_NAME]",$r)}}),Sr.__EMPTY_NODE=Qr.EMPTY_NODE,jr.__childrenNodeConstructor=Qr,_r=$r,function(t){Lr=t}($r);function Yr(t,e){if(void 0===e&&(e=null),null===t)return Qr.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Tt(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new jr(t,Yr(e));if(t instanceof Array){var n=Qr.EMPTY_NODE;return Rn(t,(function(e,r){if(Qt(t,e)&&"."!==e.substring(0,1)){var i=Yr(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(Yr(e))}var r=[],i=!1;if(Rn(t,(function(t,e){if("."!==t.substring(0,1)){var n=Yr(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Tr(t,n)))}})),0===r.length)return Qr.EMPTY_NODE;var o=Wr(r,Pr,(function(t){return t.name}),xr);if(i){var a=Wr(r,Br.getCompare());return new Qr(o,Yr(e),new Gr({".priority":a},{".priority":Br}))}return new Qr(o,Yr(e),Gr.Default)}!function(t){Dr=t}(Yr);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Xr,Jr,Zr=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Tt(!lr(e)&&".priority"!==ir(e),"Can't create PathIndex with empty path or .priority key"),n}return pt(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?Sn(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Yr(t),r=Qr.EMPTY_NODE.updateChild(this.indexPath_,n);return new Tr(e,r)},e.prototype.maxPost=function(){var t=Qr.EMPTY_NODE.updateChild(this.indexPath_,$r);return new Tr("[MAX_NAME]",t)},e.prototype.toString=function(){return ur(this.indexPath_,0).join("/")},e}(Er),ti=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?Sn(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Tr.MIN},e.prototype.maxPost=function(){return Tr.MAX},e.prototype.makePost=function(t,e){var n=Yr(t);return new Tr(e,n)},e.prototype.toString=function(){return".value"},e}(Er),ei=new ti,ni="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ri=(Xr=0,Jr=[],function(t){var e,n=t===Xr;Xr=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=ni.charAt(t%64),t=Math.floor(t/64);Tt(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===Jr[e];e--)Jr[e]=0;Jr[e]++}else for(e=0;e<12;e++)Jr[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=ni.charAt(Jr[e]);return Tt(20===i.length,"nextPushId: Length should be 20."),i}),ii=function(t){if("2147483647"===t)return"-";var e=On(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return"[MAX_NAME]";var o=n[i],a=ni.charAt(ni.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},oi=function(t){if("-2147483648"===t)return"[MIN_NAME]";var e=On(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=ni.charAt(ni.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ai(t){return{type:"value",snapshotNode:t}}function si(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ui(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ci(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var hi=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){Tt(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(ui(e,a)):Tt(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(si(e,n)):o.trackChildChange(ci(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Br,(function(t,r){e.hasChild(t)||n.trackChildChange(ui(t,r))})),e.isLeafNode()||e.forEachChild(Br,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ci(e,r,i))}else n.trackChildChange(si(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Qr.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),li=function(){function t(e){this.indexedFilter_=new hi(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Tr(e,n))||(n=Qr.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Qr.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Qr.EMPTY_NODE);var i=this;return e.forEachChild(Br,(function(t,e){i.matches(new Tr(t,e))||(r=r.updateImmediateChild(t,Qr.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),fi=function(){function t(t){this.rangedFilter_=new li(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Tr(e,n))||(n=Qr.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Qr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Qr.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Qr.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var l=!1;i.hasNext();){a=i.getNext();!l&&c(s,a)<=0&&(l=!0),l&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,Qr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var s=t;Tt(s.numChildren()===this.limit_,"");var u=new Tr(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var l=s.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(ci(e,n,l)),s.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ui(e,l));var d=s.updateImmediateChild(e,Qr.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(si(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?t:h&&o(c,u)>=0?(null!=i&&(i.trackChildChange(ui(c.name,c.node)),i.trackChildChange(si(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,Qr.EMPTY_NODE)):t},t}(),pi=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Br}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Tt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Tt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:"[MIN_NAME]"},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Tt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Tt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:"[MAX_NAME]"},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Tt(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Br},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function vi(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function gi(t,e){var n=t.copy();return n.index_=e,n}function mi(t){var e,n={};return t.isDefault()||(t.index_===Br?e="$priority":t.index_===ei?e="$value":t.index_===Cr?e="$key":(Tt(t.index_ instanceof Zr,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=zt(e),t.startSet_&&(n.startAt=zt(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+zt(t.indexStartName_))),t.endSet_&&(n.endAt=zt(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+zt(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function yi(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Br&&(e.i=t.index_.toString()),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bi=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=_n("p:rest:"),o.listens_={},o}return pt(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Tt(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var s=e.getListenId_(t,r),u={};this.listens_[s]=u;var c=mi(t._queryParams);this.restRequest_(a+".json",c,(function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),$t(o.listens_,s)===u)&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=mi(t._queryParams),r=t._path.toString(),i=new Rt;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var o=yt(i,2),a=o[0],s=o[1];a&&a.accessToken&&(e.auth=a.accessToken),s&&s.token&&(e.ac=s.token);var u=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Jt(e);r.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(n&&4===c.readyState){r.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var t=null;if(c.status>=200&&c.status<300){try{t=Wt(c.responseText)}catch(t){Tn("Failed to parse JSON response for "+u+": "+c.responseText)}n(null,t)}else 401!==c.status&&404!==c.status&&Tn("Got unsuccessful REST response for "+u+" Status: "+c.status),n(c.status);n=null}},c.open("GET",u,!0),c.send()}))},e}(Zn),_i=function(){function t(){this.rootNode_=Qr.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function wi(){return{value:null,children:new Map}}function Ii(t,e,n){if(lr(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=ir(e);t.children.has(r)||t.children.set(r,wi()),Ii(t.children.get(r),e=ar(e),n)}}function Ti(t,e){if(lr(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Br,(function(e,n){Ii(t,new nr(e),n)})),Ti(t,e)}if(t.children.size>0){var r=ir(e);if(e=ar(e),t.children.has(r))Ti(t.children.get(r),e)&&t.children.delete(r);return 0===t.children.size}return!0}function Ei(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((function(t,n){e(n,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,(function(t,r){Ei(r,new nr(e.toString()+"/"+t),n)}))}var Si,Ci,ki=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=dt({},t);return this.last_&&Rn(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Ai=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new ki(t);var n=1e4+2e4*Math.random();Ln(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;Rn(e,(function(e,i){i>0&&Qt(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),Ln(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Ci=Si||(Si={}))[Ci.OVERWRITE=0]="OVERWRITE",Ci[Ci.MERGE=1]="MERGE",Ci[Ci.ACK_USER_WRITE=2]="ACK_USER_WRITE",Ci[Ci.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Ri,Pi=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Si.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(lr(this.path)){if(null!=this.affectedTree.value)return Tt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new nr(e));return new t(rr(),n,this.revert)}return Tt(ir(this.path)===e,"operationForChild called for unrelated child."),new t(ar(this.path),this.affectedTree,this.revert)},t}(),xi=function(){function t(t,e){this.source=t,this.path=e,this.type=Si.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return lr(this.path)?new t(this.source,rr()):new t(this.source,ar(this.path))},t}(),Oi=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Si.OVERWRITE}return t.prototype.operationForChild=function(e){return lr(this.path)?new t(this.source,rr(),this.snap.getImmediateChild(e)):new t(this.source,ar(this.path),this.snap)},t}(),Di=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Si.MERGE}return t.prototype.operationForChild=function(e){if(lr(this.path)){var n=this.children.subtree(new nr(e));return n.isEmpty()?null:n.value?new Oi(this.source,rr(),n.value):new t(this.source,rr(),n)}return Tt(ir(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,ar(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Li=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(lr(t))return this.isFullyInitialized()&&!this.filtered_;var e=ir(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Mi=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t,e,n,r,i,o){var a=r.filter((function(t){return t.type===n}));a.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Et("Should only compare child_ events.");var r=new Tr(e.childName,e.snapshotNode),i=new Tr(n.childName,n.snapshotNode);return t.index_.compare(r,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e,n)})),a.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,o);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function ji(t,e){return{eventCache:t,serverCache:e}}function Ui(t,e,n,r){return ji(new Li(e,n,r),t.serverCache)}function qi(t,e,n,r){return ji(t.eventCache,new Li(e,n,r))}function Vi(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Bi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ki=function(){function t(t,e){void 0===e&&(Ri||(Ri=new Rr(Cn)),e=Ri),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return Rn(e,(function(t,e){n=n.set(new nr(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:rr(),value:this.value};if(lr(t))return null;var n=ir(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(ar(t),e);return null!=i?{path:hr(new nr(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(lr(e))return this;var n=ir(e),r=this.children.get(n);return null!==r?r.subtree(ar(e)):new t(null)},t.prototype.set=function(e,n){if(lr(e))return new t(n,this.children);var r=ir(e),i=(this.children.get(r)||new t(null)).set(ar(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(lr(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=ir(e),r=this.children.get(n);if(r){var i=r.remove(ar(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(lr(t))return this.value;var e=ir(t),n=this.children.get(e);return n?n.get(ar(t)):null},t.prototype.setTree=function(e,n){if(lr(e))return n;var r=ir(e),i=(this.children.get(r)||new t(null)).setTree(ar(e),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(rr(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(hr(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,rr(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(lr(t))return null;var i=ir(t),o=this.children.get(i);return o?o.findOnPath_(ar(t),hr(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,rr(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(lr(e))return this;this.value&&r(n,this.value);var i=ir(e),o=this.children.get(i);return o?o.foreachOnPath_(ar(e),hr(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(rr(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(hr(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),Hi=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ki(null))},t}();function Wi(t,e,n){if(lr(e))return new Hi(new Ki(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=fr(i,e);return o=o.updateChild(a,n),new Hi(t.writeTree_.set(i,o))}var s=new Ki(n),u=t.writeTree_.setTree(e,s);return new Hi(u)}function zi(t,e,n){var r=t;return Rn(n,(function(t,n){r=Wi(r,hr(e,t),n)})),r}function Gi(t,e){if(lr(e))return Hi.empty();var n=t.writeTree_.setTree(e,new Ki(null));return new Hi(n)}function Qi(t,e){return null!=$i(t,e)}function $i(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(fr(n.path,e)):null}function Yi(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Br,(function(t,n){e.push(new Tr(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new Tr(t,n.value))})),e}function Xi(t,e){if(lr(e))return t;var n=$i(t,e);return new Hi(null!=n?new Ki(n):t.writeTree_.subtree(e))}function Ji(t){return t.writeTree_.isEmpty()}function Zi(t,e){return to(rr(),t.writeTree_,e)}function to(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?(Tt(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=to(hr(t,e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(hr(t,".priority"),r)),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t,e){return vo(e,t)}function no(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));Tt(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,o=!1,a=t.allWrites.length-1;i&&a>=0;){var s=t.allWrites[a];s.visible&&(a>=n&&ro(s,r.path)?i=!1:vr(r.path,s.path)&&(o=!0)),a--}if(i){if(o)return function(t){t.visibleWrites=oo(t.allWrites,io,rr()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}(t),!0;r.snap?t.visibleWrites=Gi(t.visibleWrites,r.path):Rn(r.children,(function(e){t.visibleWrites=Gi(t.visibleWrites,hr(r.path,e))}));return!0}return!1}function ro(t,e){if(t.snap)return vr(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&vr(hr(t.path,n),e))return!0;return!1}function io(t){return t.visible}function oo(t,e,n){for(var r=Hi.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)vr(n,a)?r=Wi(r,s=fr(n,a),o.snap):vr(a,n)&&(s=fr(a,n),r=Wi(r,rr(),o.snap.getChild(s)));else{if(!o.children)throw Et("WriteRecord should have .snap or .children");if(vr(n,a))r=zi(r,s=fr(n,a),o.children);else if(vr(a,n))if(lr(s=fr(a,n)))r=zi(r,rr(),o.children);else{var u=$t(o.children,ir(s));if(u){var c=u.getChild(ar(s));r=Wi(r,rr(),c)}}}}}return r}function ao(t,e,n,r,i){if(r||i){var o=Xi(t.visibleWrites,e);if(!i&&Ji(o))return n;if(i||null!=n||Qi(o,rr())){return Zi(oo(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(vr(t.path,e)||vr(e,t.path))}),e),n||Qr.EMPTY_NODE)}return null}var a=$i(t.visibleWrites,e);if(null!=a)return a;var s=Xi(t.visibleWrites,e);return Ji(s)?n:null!=n||Qi(s,rr())?Zi(s,n||Qr.EMPTY_NODE):null}function so(t,e,n,r){return ao(t.writeTree,t.treePath,e,n,r)}function uo(t,e){return function(t,e,n){var r=Qr.EMPTY_NODE,i=$i(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Br,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=Xi(t.visibleWrites,e);return n.forEachChild(Br,(function(t,e){var n=Zi(Xi(o,new nr(t)),e);r=r.updateImmediateChild(t,n)})),Yi(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return Yi(Xi(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function co(t,e,n,r){return function(t,e,n,r,i){Tt(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=hr(e,n);if(Qi(t.visibleWrites,o))return null;var a=Xi(t.visibleWrites,o);return Ji(a)?i.getChild(n):Zi(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function ho(t,e){return function(t,e){return $i(t.visibleWrites,e)}(t.writeTree,hr(t.treePath,e))}function lo(t,e,n,r,i,o){return function(t,e,n,r,i,o,a){var s,u=Xi(t.visibleWrites,e),c=$i(u,rr());if(null!=c)s=c;else{if(null==n)return[];s=Zi(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var h=[],l=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),p=f.getNext();p&&h.length<i;)0!==l(p,r)&&h.push(p),p=f.getNext();return h}(t.writeTree,t.treePath,e,n,r,i,o)}function fo(t,e,n){return function(t,e,n,r){var i=hr(e,n),o=$i(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?Zi(Xi(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function po(t,e){return vo(hr(t.treePath,e),t.writeTree)}function vo(t,e){return{treePath:t,writeTree:e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var go=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Tt("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Tt(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,ci(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,ui(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,si(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Et("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ci(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),mo=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),yo=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Li(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return fo(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Bi(this.viewCache_),i=lo(this.writes_,r,e,1,n,t);return 0===i.length?null:i[0]},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t,e,n,r,i){var o,a,s=new go;if(n.type===Si.OVERWRITE){var u=n;u.source.fromUser?o=Io(t,e,u.path,u.snap,r,i,s):(Tt(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!lr(u.path),o=wo(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===Si.MERGE){var c=n;c.source.fromUser?o=function(t,e,n,r,i,o,a){var s=e;return r.foreach((function(r,u){var c=hr(n,r);To(e,ir(c))&&(s=Io(t,s,c,u,i,o,a))})),r.foreach((function(r,u){var c=hr(n,r);To(e,ir(c))||(s=Io(t,s,c,u,i,o,a))})),s}(t,e,c.path,c.children,r,i,s):(Tt(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=So(t,e,c.path,c.children,r,i,a,s))}else if(n.type===Si.ACK_USER_WRITE){var h=n;o=h.revert?function(t,e,n,r,i,o){var a;if(null!=ho(r,n))return e;var s=new yo(r,e,i),u=e.eventCache.getNode(),c=void 0;if(lr(n)||".priority"===ir(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=so(r,Bi(e));else{var l=e.serverCache.getNode();Tt(l instanceof Qr,"serverChildren would be complete if leaf node"),h=uo(r,l)}c=t.filter.updateFullNode(u,h,o)}else{var f=ir(n),p=fo(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=u.getImmediateChild(f)),(c=null!=p?t.filter.updateChild(u,f,p,ar(n),s,o):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(u,f,Qr.EMPTY_NODE,ar(n),s,o):u).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=so(r,Bi(e))).isLeafNode()&&(c=t.filter.updateFullNode(c,a,o))}return a=e.serverCache.isFullyInitialized()||null!=ho(r,rr()),Ui(e,c,a,t.filter.filtersNodes())}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e,h.path,r,i,s):function(t,e,n,r,i,o,a){if(null!=ho(i,n))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(lr(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return wo(t,e,n,u.getNode().getChild(n),i,o,s,a);if(lr(n)){var c=new Ki(null);return u.getNode().forEachChild(Cr,(function(t,e){c=c.set(new nr(t),e)})),So(t,e,n,c,i,o,s,a)}return e}var h=new Ki(null);return r.foreach((function(t,e){var r=hr(n,t);u.isCompleteForPath(r)&&(h=h.set(t,u.getNode().getChild(r)))})),So(t,e,n,h,i,o,s,a)}(t,e,h.path,h.affectedTree,r,i,s)}else{if(n.type!==Si.LISTEN_COMPLETE)throw Et("Unknown operation type: "+n.type);o=function(t,e,n,r,i){var o=e.serverCache,a=qi(e,o.getNode(),o.isFullyInitialized()||lr(n),o.isFiltered());return _o(t,a,n,r,mo,i)}(t,e,n.path,r,s)}var l=s.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Vi(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ai(Vi(e)))}}(e,o,l),{viewCache:o,changes:l}}function _o(t,e,n,r,i,o){var a=e.eventCache;if(null!=ho(r,n))return e;var s=void 0,u=void 0;if(lr(n))if(Tt(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var c=Bi(e),h=uo(r,c instanceof Qr?c:Qr.EMPTY_NODE);s=t.filter.updateFullNode(e.eventCache.getNode(),h,o)}else{var l=so(r,Bi(e));s=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{var f=ir(n);if(".priority"===f){Tt(1===or(n),"Can't have a priority with additional path components");var p=a.getNode(),d=co(r,n,p,u=e.serverCache.getNode());s=null!=d?t.filter.updatePriority(p,d):a.getNode()}else{var v=ar(n),g=void 0;if(a.isCompleteForChild(f)){u=e.serverCache.getNode();var m=co(r,n,a.getNode(),u);g=null!=m?a.getNode().getImmediateChild(f).updateChild(v,m):a.getNode().getImmediateChild(f)}else g=fo(r,f,e.serverCache);s=null!=g?t.filter.updateChild(a.getNode(),f,g,v,i,o):a.getNode()}}return Ui(e,s,a.isFullyInitialized()||lr(n),t.filter.filtersNodes())}function wo(t,e,n,r,i,o,a,s){var u,c=e.serverCache,h=a?t.filter:t.filter.getIndexedFilter();if(lr(n))u=h.updateFullNode(c.getNode(),r,null);else if(h.filtersNodes()&&!c.isFiltered()){var l=c.getNode().updateChild(n,r);u=h.updateFullNode(c.getNode(),l,null)}else{var f=ir(n);if(!c.isCompleteForPath(n)&&or(n)>1)return e;var p=ar(n),d=c.getNode().getImmediateChild(f).updateChild(p,r);u=".priority"===f?h.updatePriority(c.getNode(),d):h.updateChild(c.getNode(),f,d,p,mo,null)}var v=qi(e,u,c.isFullyInitialized()||lr(n),h.filtersNodes());return _o(t,v,n,i,new yo(i,v,o),s)}function Io(t,e,n,r,i,o,a){var s,u,c=e.eventCache,h=new yo(i,e,o);if(lr(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),s=Ui(e,u,!0,t.filter.filtersNodes());else{var l=ir(n);if(".priority"===l)u=t.filter.updatePriority(e.eventCache.getNode(),r),s=Ui(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=ar(n),p=c.getNode().getImmediateChild(l),d=void 0;if(lr(f))d=r;else{var v=h.getCompleteChild(l);d=null!=v?".priority"===sr(f)&&v.getChild(cr(f)).isEmpty()?v:v.updateChild(f,r):Qr.EMPTY_NODE}if(p.equals(d))s=e;else s=Ui(e,t.filter.updateChild(c.getNode(),l,d,f,h,a),c.isFullyInitialized(),t.filter.filtersNodes())}}return s}function To(t,e){return t.eventCache.isCompleteForChild(e)}function Eo(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function So(t,e,n,r,i,o,a,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=lr(n)?r:new Ki(null).setTree(n,r);var h=e.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(h.hasChild(n)){var u=Eo(0,e.serverCache.getNode().getImmediateChild(n),r);c=wo(t,c,new nr(n),u,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!h.hasChild(n)&&!u){var l=Eo(0,e.serverCache.getNode().getImmediateChild(n),r);c=wo(t,c,new nr(n),l,i,o,a,s)}})),c}var Co,ko=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new hi(r.getIndex()),o=(n=r).loadsAllData()?new hi(n.getIndex()):n.hasLimit()?new fi(n):new li(n);this.processor_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){return{filter:t}}(o);var a=e.serverCache,s=e.eventCache,u=i.updateFullNode(Qr.EMPTY_NODE,a.getNode(),null),c=o.updateFullNode(Qr.EMPTY_NODE,s.getNode(),null),h=new Li(u,a.isFullyInitialized(),i.filtersNodes()),l=new Li(c,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=ji(l,h),this.eventGenerator_=new Mi(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Ao(t,e){var n=Bi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!lr(e)&&!n.getImmediateChild(ir(e)).isEmpty())?n.getChild(e):null}function No(t){return 0===t.eventRegistrations_.length}function Ro(t,e,n){var r=[];if(n){Tt(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach((function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)}))}if(e){for(var o=[],a=0;a<t.eventRegistrations_.length;++a){var s=t.eventRegistrations_[a];if(s.matches(e)){if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(a+1));break}}else o.push(s)}t.eventRegistrations_=o}else t.eventRegistrations_=[];return r}function Po(t,e,n,r){e.type===Si.MERGE&&null!==e.source.queryId&&(Tt(Bi(t.viewCache_),"We should always have a full cache before handling merges"),Tt(Vi(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,o,a=t.viewCache_,s=bo(t.processor_,a,e,n,r);return i=t.processor_,o=s.viewCache,Tt(o.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Tt(o.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Tt(s.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,xo(t,s.changes,s.viewCache.eventCache.getNode(),null)}function xo(t,e,n,r){var i=r?[r]:t.eventRegistrations_;return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),Fi(t,i,"child_removed",e,r,n),Fi(t,i,"child_added",e,r,n),Fi(t,i,"child_moved",o,r,n),Fi(t,i,"child_changed",e,r,n),Fi(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oo,Do=function(){this.views=new Map};function Lo(t,e,n,r){var i,o,a=e.source.queryId;if(null!==a){var s=t.views.get(a);return Tt(null!=s,"SyncTree gave us an op for an invalid query."),Po(s,e,n,r)}var u=[];try{for(var c=mt(t.views.values()),h=c.next();!h.done;h=c.next()){s=h.value;u=u.concat(Po(s,e,n,r))}}catch(t){i={error:t}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u}function Mo(t,e,n,r,i){var o=e._queryIdentifier,a=t.views.get(o);if(!a){var s=so(n,i?r:null),u=!1;s?u=!0:r instanceof Qr?(s=uo(n,r),u=!1):(s=Qr.EMPTY_NODE,u=!1);var c=ji(new Li(s,u,!1),new Li(r,i,!1));return new ko(e,c)}return a}function Fo(t,e,n,r,i,o){var a=Mo(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),function(t,e){t.eventRegistrations_.push(e)}(a,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Br,(function(t,e){r.push(si(t,e))})),n.isFullyInitialized()&&r.push(ai(n.getNode())),xo(t,r,n.getNode(),e)}(a,n)}function jo(t,e,n,r){var i,o,a=e._queryIdentifier,s=[],u=[],c=Ko(t);if("default"===a)try{for(var h=mt(t.views.entries()),l=h.next();!l.done;l=h.next()){var f=yt(l.value,2),p=f[0],d=f[1];u=u.concat(Ro(d,n,r)),No(d)&&(t.views.delete(p),d.query._queryParams.loadsAllData()||s.push(d.query))}}catch(t){i={error:t}}finally{try{l&&!l.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else(d=t.views.get(a))&&(u=u.concat(Ro(d,n,r)),No(d)&&(t.views.delete(a),d.query._queryParams.loadsAllData()||s.push(d.query)));return c&&!Ko(t)&&s.push(new(Tt(Co,"Reference.ts has not been loaded"),Co)(e._repo,e._path)),{removed:s,events:u}}function Uo(t){var e,n,r=[];try{for(var i=mt(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function qo(t,e){var n,r,i=null;try{for(var o=mt(t.views.values()),a=o.next();!a.done;a=o.next()){var s=a.value;i=i||Ao(s,e)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Vo(t,e){if(e._queryParams.loadsAllData())return Ho(t);var n=e._queryIdentifier;return t.views.get(n)}function Bo(t,e){return null!=Vo(t,e)}function Ko(t){return null!=Ho(t)}function Ho(t){var e,n;try{for(var r=mt(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wo=1,zo=function(t){this.listenProvider_=t,this.syncPointTree_=new Ki(null),this.pendingWriteTree_={visibleWrites:Hi.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Go(t,e,n,r,i){return function(t,e,n,r,i){Tt(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Wi(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?ea(t,new Oi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Qo(t,e,n,r){!function(t,e,n,r){Tt(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=zi(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=Ki.fromObject(n);return ea(t,new Di({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}function $o(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(no(t.pendingWriteTree_,e)){var i=new Ki(null);return null!=r.snap?i=i.set(rr(),!0):Rn(r.children,(function(t){i=i.set(new nr(t),!0)})),ea(t,new Pi(r.path,i,n))}return[]}function Yo(t,e,n){return ea(t,new Oi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Xo(t,e,n,r){var i=e._path,o=t.syncPointTree_.get(i),a=[];if(o&&("default"===e._queryIdentifier||Bo(o,e))){var s=jo(o,e,n,r);0===o.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex((function(t){return t._queryParams.loadsAllData()})),h=t.syncPointTree_.findOnPath(i,(function(t,e){return Ko(e)}));if(c&&!h){var l=t.syncPointTree_.subtree(i);if(!l.isEmpty())for(var f=function(t){return t.fold((function(t,e,n){if(e&&Ko(e))return[Ho(e)];var r=[];return e&&(r=Uo(e)),Rn(n,(function(t,e){r=r.concat(e)})),r}))}(l),p=0;p<f.length;++p){var d=f[p],v=d.query,g=ia(t,d);t.listenProvider_.startListening(ha(v),oa(t,v),g.hashFn,g.onComplete)}}if(!h&&u.length>0&&!r)if(c){t.listenProvider_.stopListening(ha(e),null)}else u.forEach((function(e){var n=t.queryToTagMap.get(aa(e));t.listenProvider_.stopListening(ha(e),n)}));!function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=aa(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,u)}return a}function Jo(t,e,n){var r=e._path,i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){var n=fr(t,r);i=i||qo(e,n),o=o||Ko(e)}));var a,s=t.syncPointTree_.get(r);(s?(o=o||Ko(s),i=i||qo(s,rr())):(s=new Do,t.syncPointTree_=t.syncPointTree_.set(r,s)),null!=i)?a=!0:(a=!1,i=Qr.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=qo(e,rr());n&&(i=i.updateImmediateChild(t,n))})));var u=Bo(s,e);if(!u&&!e._queryParams.loadsAllData()){var c=aa(e);Tt(!t.queryToTagMap.has(c),"View does not exist, but we have a tag");var h=Wo++;t.queryToTagMap.set(c,h),t.tagToQueryMap.set(h,c)}var l=Fo(s,e,n,eo(t.pendingWriteTree_,r),i,a);if(!u&&!o){var f=Vo(s,e);l=l.concat(function(t,e,n){var r=e._path,i=oa(t,e),o=ia(t,n),a=t.listenProvider_.startListening(ha(e),i,o.hashFn,o.onComplete),s=t.syncPointTree_.subtree(r);if(i)Tt(!Ko(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(t,e,n){if(!lr(t)&&e&&Ko(e))return[Ho(e).query];var r=[];return e&&(r=r.concat(Uo(e).map((function(t){return t.query})))),Rn(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var h=u[c];t.listenProvider_.stopListening(ha(h),oa(t,h))}return a}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e,f))}return l}function Zo(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(function(t,n){var r=qo(n,fr(t,e));if(r)return r}));return ao(r,e,i,n,!0)}function ta(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){var i=fr(t,n);r=r||qo(e,i)}));var i=t.syncPointTree_.get(n);i?r=r||qo(i,rr()):(i=new Do,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,a=o?new Li(r,!0,!1):null;return function(t){return Vi(t.viewCache_)}(Mo(i,e,eo(t.pendingWriteTree_,e._path),o?a.getNode():Qr.EMPTY_NODE,o))}function ea(t,e){return na(e,t.syncPointTree_,null,eo(t.pendingWriteTree_,rr()))}function na(t,e,n,r){if(lr(t.path))return ra(t,e,n,r);var i=e.get(rr());null==n&&null!=i&&(n=qo(i,rr()));var o=[],a=ir(t.path),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,h=po(r,a);o=o.concat(na(s,u,c,h))}return i&&(o=o.concat(Lo(i,t,r,n))),o}function ra(t,e,n,r){var i=e.get(rr());null==n&&null!=i&&(n=qo(i,rr()));var o=[];return e.children.inorderTraversal((function(e,i){var a=n?n.getImmediateChild(e):null,s=po(r,e),u=t.operationForChild(e);u&&(o=o.concat(ra(u,i,a,s)))})),i&&(o=o.concat(Lo(i,t,r,n))),o}function ia(t,e){var n=e.query,r=oa(t,n);return{hashFn:function(){var t=function(t){return t.viewCache_.serverCache.getNode()}(e)||Qr.EMPTY_NODE;return t.hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=sa(t,n);if(r){var i=ua(r),o=i.path,a=i.queryId,s=fr(o,e);return ca(t,o,new xi(Ni(a),s))}return[]}(t,n._path,r):function(t,e){return ea(t,new xi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Xo(t,n,null,i)}}}function oa(t,e){var n=aa(e);return t.queryToTagMap.get(n)}function aa(t){return t._path.toString()+"$"+t._queryIdentifier}function sa(t,e){return t.tagToQueryMap.get(e)}function ua(t){var e=t.indexOf("$");return Tt(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new nr(t.substr(0,e))}}function ca(t,e,n){var r=t.syncPointTree_.get(e);return Tt(r,"Missing sync point for query tag that we're tracking"),Lo(r,n,eo(t.pendingWriteTree_,e),null)}function ha(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Tt(Oo,"Reference.ts has not been loaded"),Oo)(t._repo,t._path):t}var la=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),fa=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=hr(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return Zo(this.syncTree_,this.path_)},t}(),pa=function(t,e,n){return t&&"object"==typeof t?(Tt(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?da(t[".sv"],e,n):"object"==typeof t[".sv"]?va(t[".sv"],e):void Tt(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},da=function(t,e,n){if("timestamp"===t)return n.timestamp;Tt(!1,"Unexpected server value: "+t)},va=function(t,e,n){t.hasOwnProperty("increment")||Tt(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Tt(!1,"Unexpected increment value: "+r);var i=e.node();if(Tt(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},ga=function(t,e,n,r){return ya(e,new fa(n,t),r)},ma=function(t,e,n){return ya(t,new la(e),n)};function ya(t,e,n){var r,i=t.getPriority().val(),o=pa(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=pa(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new jr(s,Yr(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new jr(o))),u.forEachChild(Br,(function(t,i){var o=ya(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ba=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function _a(t,e){for(var n=e instanceof nr?e:new nr(e),r=t,i=ir(n);null!==i;){var o=$t(r.node.children,i)||{children:{},childCount:0};r=new ba(i,r,o),i=ir(n=ar(n))}return r}function wa(t){return t.node.value}function Ia(t,e){t.node.value=e,ka(t)}function Ta(t){return t.node.childCount>0}function Ea(t,e){Rn(t.node.children,(function(n,r){e(new ba(n,t,r))}))}function Sa(t,e,n,r){n&&!r&&e(t),Ea(t,(function(t){Sa(t,e,!0,r)})),n&&r&&e(t)}function Ca(t){return new nr(null===t.parent?t.name:Ca(t.parent)+"/"+t.name)}function ka(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===wa(t)&&!Ta(t)}(n),i=Qt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,ka(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,ka(t))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t.parent,t.name,t)}var Aa=/[\[\].#$\/\u0000-\u001F\u007F]/,Na=/[\[\].#$\u0000-\u001F\u007F]/,Ra=function(t){return"string"==typeof t&&0!==t.length&&!Aa.test(t)},Pa=function(t){return"string"==typeof t&&0!==t.length&&!Na.test(t)},xa=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!En(t)||t&&"object"==typeof t&&Qt(t,".sv")},Oa=function(t,e,n,r){r&&void 0===e||Da(ie(t,"value"),e,n)},Da=function(t,e,n){var r=n instanceof nr?new gr(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+yr(r));if("function"==typeof e)throw new Error(t+"contains a function "+yr(r)+" with contents = "+e.toString());if(En(e))throw new Error(t+"contains "+e.toString()+" "+yr(r));if("string"==typeof e&&e.length>10485760/3&&ue(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+yr(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(Rn(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!Ra(e)))throw new Error(t+" contains an invalid key ("+e+") "+yr(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,s;s=e,(a=r).parts_.length>0&&(a.byteLength_+=1),a.parts_.push(s),a.byteLength_+=ue(s),mr(a),Da(t,n,r),function(t){var e=t.parts_.pop();t.byteLength_-=ue(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)})),i&&o)throw new Error(t+' contains ".value" child '+yr(r)+" in addition to actual children.")}},La=function(t,e,n,r){if(!r||void 0!==e){var i=ie(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var o=[];Rn(e,(function(t,e){var r=new nr(t);if(Da(i,e,hr(n,r)),".priority"===sr(r)&&!xa(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=ur(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Ra(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(pr);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&vr(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,o)}},Ma=function(t,e,n){if(!n||void 0!==e){if(En(e))throw new Error(ie(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!xa(e))throw new Error(ie(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Fa=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(ie(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ja=function(t,e,n,r){if(!(r&&void 0===n||Ra(n)))throw new Error(ie(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ua=function(t,e,n,r){if(!(r&&void 0===n||Pa(n)))throw new Error(ie(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},qa=function(t,e){if(".info"===ir(e))throw new Error(t+" failed = Can't modify data under /.info/")},Va=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Ra(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Pa(t)}(n))throw new Error(ie(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Ba=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(ie(t,e)+"must be a boolean.")},Ka=function(){this.eventLists_=[],this.recursionDepth_=0};function Ha(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||dr(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Wa(t,e,n){Ha(t,n),Ga(t,(function(t){return dr(t,e)}))}function za(t,e,n){Ha(t,n),Ga(t,(function(t){return vr(t,e)||vr(e,t)}))}function Ga(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];if(i)e(i.path)?(Qa(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}n&&(t.eventLists_=[]),t.recursionDepth_--}function Qa(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();gn&&bn("event: "+n.toString()),Dn(r)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $a=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ka,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=wi(),this.transactionQueueTree_=new ba,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Ya(t,e,n){if(t.stats_=Wn(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new bi(t.repoInfo_,(function(e,n,r,i){Za(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((function(){return ts(t,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{zt(n)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}t.persistentConnection_=new Ir(t.repoInfo_,e,(function(e,n,r,i){Za(t,e,n,r,i)}),(function(e){ts(t,e)}),(function(e){!function(t,e){Rn(e,(function(e,n){es(t,e,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,i,o;t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((function(e){t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=(r=t.repoInfo_,i=function(){return new Ai(t.stats_,t.server_)},o=r.toString(),Hn[o]||(Hn[o]=i()),Hn[o]),t.infoData_=new _i,t.infoSyncTree_=new zo({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e._path);return a.isEmpty()||(o=Yo(t.infoSyncTree_,e._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),es(t,"connected",!1),t.serverSyncTree_=new zo({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);za(t.eventQueue_,e._path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}function Xa(t){var e=t.infoData_.getNode(new nr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Ja(t){return(e=(e={timestamp:Xa(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function Za(t,e,n,r,i){t.dataUpdateCount++;var o=new nr(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var s=Xt(n,(function(t){return Yr(t)}));a=function(t,e,n,r){var i=sa(t,r);if(i){var o=ua(i),a=o.path,s=o.queryId,u=fr(a,e),c=Ki.fromObject(n);return ca(t,a,new Di(Ni(s),u,c))}return[]}(t.serverSyncTree_,o,s,i)}else{var u=Yr(n);a=function(t,e,n,r){var i=sa(t,r);if(null!=i){var o=ua(i),a=o.path,s=o.queryId,u=fr(a,e);return ca(t,a,new Oi(Ni(s),u,n))}return[]}(t.serverSyncTree_,o,u,i)}else if(r){var c=Xt(n,(function(t){return Yr(t)}));a=function(t,e,n){var r=Ki.fromObject(n);return ea(t,new Di({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,o,c)}else{var h=Yr(n);a=Yo(t.serverSyncTree_,o,h)}var l=o;a.length>0&&(l=fs(t,o)),za(t.eventQueue_,l,a)}function ts(t,e){es(t,"connected",e),!1===e&&function(t){us(t,"onDisconnectEvents");var e=Ja(t),n=wi();Ei(t.onDisconnect_,rr(),(function(r,i){var o=ga(r,i,t.serverSyncTree_,e);Ii(n,r,o)}));var r=[];Ei(n,rr(),(function(e,n){r=r.concat(Yo(t.serverSyncTree_,e,n));var i=ms(t,e);fs(t,i)})),t.onDisconnect_=wi(),za(t.eventQueue_,rr(),r)}(t)}function es(t,e,n){var r=new nr("/.info/"+e),i=Yr(n);t.infoData_.updateSnapshot(r,i);var o=Yo(t.infoSyncTree_,r,i);za(t.eventQueue_,r,o)}function ns(t){return t.nextWriteId_++}function rs(t,e,n,r,i){us(t,"set",{path:e.toString(),value:n,priority:r});var o=Ja(t),a=Yr(n,r),s=Zo(t.serverSyncTree_,e),u=ma(a,s,o),c=ns(t),h=Go(t.serverSyncTree_,e,u,c,!0);Ha(t.eventQueue_,h),t.server_.put(e.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||Tn("set at "+e+" failed: "+n);var a=$o(t.serverSyncTree_,c,!o);za(t.eventQueue_,e,a),cs(t,i,n,r)}));var l=ms(t,e);fs(t,l),za(t.eventQueue_,l,[])}function is(t,e,n){t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&Ti(t.onDisconnect_,e),cs(t,n,r,i)}))}function os(t,e,n,r){var i=Yr(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&Ii(t.onDisconnect_,e,i),cs(t,r,n,o)}))}function as(t,e,n){var r;r=".info"===ir(e._path)?Xo(t.infoSyncTree_,e,n):Xo(t.serverSyncTree_,e,n),Wa(t.eventQueue_,e._path,r)}function ss(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}function us(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),bn.apply(void 0,bt([r],yt(e)))}function cs(t,e,n,r){e&&Dn((function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}}))}function hs(t,e,n){return Zo(t.serverSyncTree_,e,n)||Qr.EMPTY_NODE}function ls(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||gs(t,e),wa(e)){var n=ds(t,e);Tt(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),i=hs(t,e,r),o=i,a=i.hash(),s=0;s<n.length;s++){var u=n[s];Tt(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=fr(e,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var h=o.val(!0),l=e;t.server_.put(l.toString(),h,(function(r){us(t,"transaction put response",{path:l.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(e){n[e].status=2,i=i.concat($o(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()},s=0;s<n.length;s++)a(s);gs(t,_a(t.transactionQueueTree_,e)),ls(t,t.transactionQueueTree_),za(t.eventQueue_,e,i);for(s=0;s<o.length;s++)Dn(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)3===n[s].status?n[s].status=4:n[s].status=0;else{Tn("transaction at "+l.toString()+" failed: "+r);for(s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r}fs(t,e)}}),a)}(t,Ca(e),n)}else Ta(e)&&Ea(e,(function(e){ls(t,e)}))}function fs(t,e){var n=ps(t,e),r=Ca(n);return function(t,e,n){if(0===e.length)return;for(var r=[],i=[],o=e.filter((function(t){return 0===t.status})).map((function(t){return t.currentWriteId})),a=function(a){var s,u,c=e[a],h=fr(n,c.path),l=!1;if(Tt(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)l=!0,s=c.abortReason,i=i.concat($o(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)l=!0,s="maxretry",i=i.concat($o(t.serverSyncTree_,c.currentWriteId,!0));else{var f=hs(t,c.path,o);c.currentInputSnapshot=f;var p=e[a].update(f.val());if(void 0!==p){Da("transaction failed: Data returned ",p,c.path);var d=Yr(p);"object"==typeof p&&null!=p&&Qt(p,".priority")||(d=d.updatePriority(f.getPriority()));var v=c.currentWriteId,g=Ja(t),m=ma(d,f,g);c.currentOutputSnapshotRaw=d,c.currentOutputSnapshotResolved=m,c.currentWriteId=ns(t),o.splice(o.indexOf(v),1),i=(i=i.concat(Go(t.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally))).concat($o(t.serverSyncTree_,v,!0))}else l=!0,s="nodata",i=i.concat($o(t.serverSyncTree_,c.currentWriteId,!0))}za(t.eventQueue_,n,i),i=[],l&&(e[a].status=2,u=e[a].unwatcher,setTimeout(u,Math.floor(0)),e[a].onComplete&&("nodata"===s?r.push((function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)})):r.push((function(){return e[a].onComplete(new Error(s),!1,null)}))))},s=0;s<e.length;s++)a(s);gs(t,t.transactionQueueTree_);for(s=0;s<r.length;s++)Dn(r[s]);ls(t,t.transactionQueueTree_)}(t,ds(t,n),r),r}function ps(t,e){var n,r=t.transactionQueueTree_;for(n=ir(e);null!==n&&void 0===wa(r);)r=_a(r,n),n=ir(e=ar(e));return r}function ds(t,e){var n=[];return vs(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function vs(t,e,n){var r=wa(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Ea(e,(function(e){vs(t,e,n)}))}function gs(t,e){var n=wa(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Ia(e,n.length>0?n:void 0)}Ea(e,(function(e){gs(t,e)}))}function ms(t,e){var n=Ca(ps(t,e)),r=_a(t.transactionQueueTree_,e);return function(t,e,n){for(var r=n?t:t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,(function(e){ys(t,e)})),ys(t,r),Sa(r,(function(e){ys(t,e)})),n}function ys(t,e){var n=wa(e);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Tt(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=3,n[a].abortReason="set"):(Tt(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat($o(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));-1===o?Ia(e,void 0):n.length=o+1,za(t.eventQueue_,Ca(e),i);for(a=0;a<r.length;a++)Dn(r[a])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bs=function(t,e){var n=_s(t),r=n.namespace;"firebase.com"===n.domain&&In(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||In("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Tn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new qn(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new nr(n.pathString)}},_s=function(t){var e="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"==typeof t){var c=t.indexOf("//");c>=0&&(s=t.substring(0,c-1),t=t.substring(c+2));var h=t.indexOf("/");-1===h&&(h=t.length);var l=t.indexOf("?");-1===l&&(l=t.length),e=t.substring(0,Math.min(h,l)),h<l&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(h,l)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=mt(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Tn("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,l)));(c=e.indexOf(":"))>=0?(a="https"===s||"wss"===s,u=parseInt(e.substring(c+1),10)):c=e.length;var p=e.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),n=e.substring(d+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},ws=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+zt(this.snapshot.exportVal())},t}(),Is=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Ts=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Tt(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Es=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new Rt;return is(this._repo,this._path,t.wrapCallback((function(){}))),t.promise},t.prototype.remove=function(){qa("OnDisconnect.remove",this._path);var t=new Rt;return os(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},t.prototype.set=function(t){qa("OnDisconnect.set",this._path),Oa("OnDisconnect.set",t,this._path,!1);var e=new Rt;return os(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t.prototype.setWithPriority=function(t,e){qa("OnDisconnect.setWithPriority",this._path),Oa("OnDisconnect.setWithPriority",t,this._path,!1),Ma("OnDisconnect.setWithPriority",e,!1);var n=new Rt;return function(t,e,n,r,i){var o=Yr(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(function(n,r){"ok"===n&&Ii(t.onDisconnect_,e,o),cs(0,i,n,r)}))}(this._repo,this._path,t,e,n.wrapCallback((function(){}))),n.promise},t.prototype.update=function(t){qa("OnDisconnect.update",this._path),La("OnDisconnect.update",t,this._path,!1);var e=new Rt;return function(t,e,n,r){if(Yt(n))return bn("onDisconnect().update() called with empty data.  Don't do anything."),void cs(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&Rn(n,(function(n,r){var i=Yr(r);Ii(t.onDisconnect_,hr(e,n),i)})),cs(0,r,i,o)}))}(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t}(),Ss=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return lr(this._path)?null:sr(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ns(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=yi(this._queryParams),e=An(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return yi(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=he(e))instanceof t))return!1;var n=this._repo===e._repo,r=dr(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function Cs(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function ks(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Cr){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if("[MIN_NAME]"!==t.getIndexStartName())throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if("[MAX_NAME]"!==t.getIndexEndName())throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Br){if(null!=e&&!xa(e)||null!=n&&!xa(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Tt(t.getIndex()instanceof Zr||t.getIndex()===ei,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function As(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ns=function(t){function e(e,n){return t.call(this,e,n,new pi,!1)||this}return pt(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=cr(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Ss),Rs=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new nr(e),r=Os(this.ref,e);return new t(this._node.getChild(n),r,Br)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return e(new t(i,Os(n.ref,r),Br))}))},t.prototype.hasChild=function(t){var e=new nr(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Ps(t,e){return(t=he(t))._checkNotDeleted("ref"),void 0!==e?Os(t._root,e):t._root}function xs(t,e){(t=he(t))._checkNotDeleted("refFromURL");var n=bs(e,t._repo.repoInfo_.nodeAdmin);Va("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||In("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Ps(t,n.path.toString())}function Os(t,e){var n,r,i,o;return null===ir((t=he(t))._path)?(n="child",r="path",o=!1,(i=e)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Ua(n,r,i,o)):Ua("child","path",e,!1),new Ns(t._repo,hr(t._path,e))}function Ds(t,e){t=he(t),qa("push",t._path),Oa("push",e,t._path,!0);var n,r=Xa(t._repo),i=ri(r),o=Os(t,i),a=Os(t,i);return n=null!=e?Ms(a,e).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),o}function Ls(t){return qa("remove",t._path),Ms(t,null)}function Ms(t,e){t=he(t),qa("set",t._path),Oa("set",e,t._path,!1);var n=new Rt;return rs(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function Fs(t,e){t=he(t),qa("setPriority",t._path),Ma("setPriority",e,!1);var n=new Rt;return rs(t._repo,hr(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}function js(t,e,n){if(qa("setWithPriority",t._path),Oa("setWithPriority",e,t._path,!1),Ma("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new Rt;return rs(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}function Us(t,e){La("update",e,t._path,!1);var n=new Rt;return function(t,e,n,r){us(t,"update",{path:e.toString(),value:n});var i=!0,o=Ja(t),a={};if(Rn(n,(function(n,r){i=!1,a[n]=ga(hr(e,n),Yr(r),t.serverSyncTree_,o)})),i)bn("update() called with empty data.  Don't do anything."),cs(0,r,"ok",void 0);else{var s=ns(t),u=Qo(t.serverSyncTree_,e,a,s);Ha(t.eventQueue_,u),t.server_.merge(e.toString(),n,(function(n,i){var o="ok"===n;o||Tn("update at "+e+" failed: "+n);var a=$o(t.serverSyncTree_,s,!o),u=a.length>0?fs(t,e):e;za(t.eventQueue_,u,a),cs(0,r,n,i)})),Rn(n,(function(n){var r=ms(t,hr(e,n));fs(t,r)})),za(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}function qs(t){return function(t,e){var n=ta(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then((function(n){var r=Yr(n).withIndex(e._queryParams.getIndex()),i=Yo(t.serverSyncTree_,e._path,r);return Wa(t.eventQueue_,e._path,i),Promise.resolve(r)}),(function(n){return us(t,"get for query "+zt(e)+" failed: "+n),Promise.reject(new Error(n))}))}((t=he(t))._repo,t).then((function(e){return new Rs(e,new Ns(t._repo,t._path),t._queryParams.getIndex())}))}var Vs=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new ws("value",this,new Rs(t.snapshotNode,new Ns(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Is(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Bs=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Is(this,t,e):null},t.prototype.createEvent=function(t,e){Tt(null!=t.childName,"Child events should have a childName.");var n=Os(new Ns(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new ws(t.type,this,new Rs(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Ks(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(e,n){as(t._repo,t,c),a(e,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new Ts(n,o||void 0),c="value"===e?new Vs(u):new Bs(e,u);return function(t,e,n){var r;r=".info"===ir(e._path)?Jo(t.infoSyncTree_,e,n):Jo(t.serverSyncTree_,e,n),Wa(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return as(t._repo,t,c)}}function Hs(t,e,n,r){return Ks(t,"value",e,n,r)}function Ws(t,e,n,r){return Ks(t,"child_added",e,n,r)}function zs(t,e,n,r){return Ks(t,"child_changed",e,n,r)}function Gs(t,e,n,r){return Ks(t,"child_moved",e,n,r)}function Qs(t,e,n,r){return Ks(t,"child_removed",e,n,r)}function $s(t,e,n){var r=null,i=n?new Ts(n):null;"value"===e?r=new Vs(i):e&&(r=new Bs(e,i)),as(t._repo,t,r)}var Ys=function(){},Xs=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return pt(e,t),e.prototype._apply=function(t){Oa("endAt",this._value,t._path,!0);var e=vi(t._queryParams,this._value,this._key);if(As(e),ks(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ss(t._repo,t._path,e,t._orderByCalled)},e}(Ys);function Js(t,e){return ja("endAt","key",e,!0),new Xs(t,e)}var Zs=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return pt(e,t),e.prototype._apply=function(t){Oa("endBefore",this._value,t._path,!1);var e,n,r,i,o=(e=t._queryParams,n=this._value,r=this._key,e.index_===Cr?("string"==typeof n&&(n=oi(n)),i=vi(e,n,r)):i=vi(e,n,null==r?"[MIN_NAME]":oi(r)),i.endBeforeSet_=!0,i);if(As(o),ks(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ss(t._repo,t._path,o,t._orderByCalled)},e}(Ys);function tu(t,e){return ja("endBefore","key",e,!0),new Zs(t,e)}var eu=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return pt(e,t),e.prototype._apply=function(t){Oa("startAt",this._value,t._path,!0);var e=di(t._queryParams,this._value,this._key);if(As(e),ks(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ss(t._repo,t._path,e,t._orderByCalled)},e}(Ys);function nu(t,e){return void 0===t&&(t=null),ja("startAt","key",e,!0),new eu(t,e)}var ru=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return pt(e,t),e.prototype._apply=function(t){Oa("startAfter",this._value,t._path,!1);var e=function(t,e,n){var r;t.index_===Cr?("string"==typeof e&&(e=ii(e)),r=di(t,e,n)):r=di(t,e,null==n?"[MAX_NAME]":ii(n));return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(As(e),ks(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ss(t._repo,t._path,e,t._orderByCalled)},e}(Ys);function iu(t,e){return ja("startAfter","key",e,!0),new ru(t,e)}var ou=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return pt(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ss(t._repo,t._path,(e=t._queryParams,n=this._limit,(r=e.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="l",r),t._orderByCalled);var e,n,r},e}(Ys);function au(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new ou(t)}var su=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return pt(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ss(t._repo,t._path,(e=t._queryParams,n=this._limit,(r=e.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="r",r),t._orderByCalled);var e,n,r},e}(Ys);function uu(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new su(t)}var cu=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return pt(e,t),e.prototype._apply=function(t){Cs(t,"orderByChild");var e=new nr(this._path);if(lr(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new Zr(e),r=gi(t._queryParams,n);return ks(r),new Ss(t._repo,t._path,r,!0)},e}(Ys);function hu(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ua("orderByChild","path",t,!1),new cu(t)}var lu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype._apply=function(t){Cs(t,"orderByKey");var e=gi(t._queryParams,Cr);return ks(e),new Ss(t._repo,t._path,e,!0)},e}(Ys);function fu(){return new lu}var pu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype._apply=function(t){Cs(t,"orderByPriority");var e=gi(t._queryParams,Br);return ks(e),new Ss(t._repo,t._path,e,!0)},e}(Ys);function du(){return new pu}var vu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype._apply=function(t){Cs(t,"orderByValue");var e=gi(t._queryParams,ei);return ks(e),new Ss(t._repo,t._path,e,!0)},e}(Ys);function gu(){return new vu}var mu=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return pt(e,t),e.prototype._apply=function(t){if(Oa("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Xs(this._value,this._key)._apply(new eu(this._value,this._key)._apply(t))},e}(Ys);function yu(t,e){return ja("equalTo","key",e,!0),new mu(t,e)}function bu(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=he(t);try{for(var a=mt(r),s=a.next();!s.done;s=a.next()){var u=s.value;o=u._apply(o)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return o}!function(t){Tt(!Co,"__referenceConstructor has already been defined"),Co=t}(Ns),function(t){Tt(!Oo,"__referenceConstructor has already been defined"),Oo=t}(Ns);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _u={},wu=!1;function Iu(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||In("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bn("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var a,s=bs(o,i),u=s.repoInfo,c=void 0;void 0!==Be&&(c=Be.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(a=!0,o="http://"+c+"?ns="+u.namespace,u=(s=bs(o,i)).repoInfo):a=!s.repoInfo.secure;var h=i&&a?new jn(jn.OWNER):new Fn(t.name,t.options,e);Va("Invalid Firebase Database URL",s),lr(s.path)||In("Database URL must point to the root of a Firebase Database (not including a child path).");var l=function(t,e,n,r){var i=_u[e.name];i||(i={},_u[e.name]=i);var o=i[t.toURLString()];o&&In("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new $a(t,wu,n,r),i[t.toURLString()]=o,o}(u,t,h,new Mn(t.name,n));return new Tu(l,t)}var Tu=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(Ya(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Ns(this._repo,rr())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,e=this.app.name,(n=_u[e])&&n[t.key]===t||In("Database "+e+"("+t.repoInfo_+") has already been deleted."),ss(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&In("Cannot call "+t+" on a deleted database.")},t}();function Eu(t,e,n,r){void 0===r&&(r={}),(t=he(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&In("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,o=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&In('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new jn(jn.OWNER);else if(r.mockUserToken){var a=Pt(r.mockUserToken,t.app.options.projectId);o=new jn(a)}!function(t,e,n,r){t.repoInfo_=new qn(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(i,e,n,o)}function Su(t){(t=he(t))._checkNotDeleted("goOffline"),ss(t._repo)}function Cu(t){var e;(t=he(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume("repo_interrupt")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ku={".sv":"timestamp"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Au=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function Nu(t,e,n){var r;if(t=he(t),qa("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,o=new Rt,a=Hs(t,(function(){}));return function(t,e,n,r,i,o){us(t,"transaction on "+e);var a={path:e,update:n,onComplete:r,status:null,order:pn(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=hs(t,e,void 0);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{Da("transaction failed: Data returned ",u,a.path),a.status=0;var c=_a(t.transactionQueueTree_,e),h=wa(c)||[];h.push(a),Ia(c,h);var l=void 0;"object"==typeof u&&null!==u&&Qt(u,".priority")?(l=$t(u,".priority"),Tt(xa(l),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):l=(Zo(t.serverSyncTree_,e)||Qr.EMPTY_NODE).getPriority().val();var f=Ja(t),p=Yr(u,l),d=ma(p,s,f);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=d,a.currentWriteId=ns(t);var v=Go(t.serverSyncTree_,e,d,a.currentWriteId,a.applyLocally);za(t.eventQueue_,e,v),ls(t,t.transactionQueueTree_)}}(t._repo,t._path,e,(function(e,n,r){var i=null;e?o.reject(e):(i=new Rs(r,new Ns(t._repo,t._path),Br),o.resolve(new Au(n,i)))}),a,i),o.promise}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ru=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){re("OnDisconnect.cancel",0,1,arguments.length),oe("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.remove=function(t){re("OnDisconnect.remove",0,1,arguments.length),oe("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.set=function(t,e){re("OnDisconnect.set",1,2,arguments.length),oe("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},t.prototype.setWithPriority=function(t,e,n){re("OnDisconnect.setWithPriority",2,3,arguments.length),oe("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},t.prototype.update=function(t,e){if(re("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Tn("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}oe("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},t}(),Pu=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return re("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),xu=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return re("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return re("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return re("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return re("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return re("DataSnapshot.child",0,1,arguments.length),e=String(e),Ua("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return re("DataSnapshot.hasChild",1,1,arguments.length),Ua("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return re("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return re("DataSnapshot.forEach",1,1,arguments.length),oe("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((function(r){return e(new t(n._database,r))}))},t.prototype.hasChildren=function(){return re("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return re("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return re("DataSnapshot.ref",0,0,arguments.length),new Du(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Ou=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var o,a=this;re("Query.on",2,4,arguments.length),oe("Query.on","callback",n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i),u=function(t,e){n.call(s.context,new xu(a.database,t),e)};u.userCallback=n,u.context=s.context;var c=null===(o=s.cancel)||void 0===o?void 0:o.bind(s.context);switch(e){case"value":return Hs(this._delegate,u,c),n;case"child_added":return Ws(this._delegate,u,c),n;case"child_removed":return Qs(this._delegate,u,c),n;case"child_changed":return zs(this._delegate,u,c),n;case"child_moved":return Gs(this._delegate,u,c),n;default:throw new Error(ie("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(re("Query.off",0,3,arguments.length),Fa("Query.off",t,!0),oe("Query.off","callback",e,!0),ae("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,$s(this._delegate,t,r)}else $s(this._delegate,t)},t.prototype.get=function(){var t=this;return qs(this._delegate).then((function(e){return new xu(t.database,e)}))},t.prototype.once=function(e,n,r,i){var o=this;re("Query.once",1,4,arguments.length),oe("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),s=new Rt,u=function(t,e){var r=new xu(o.database,t);n&&n.call(a.context,r,e),s.resolve(r)};u.userCallback=n,u.context=a.context;var c=function(t){a.cancel&&a.cancel.call(a.context,t),s.reject(t)};switch(e){case"value":Hs(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":Ws(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":Qs(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":zs(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":Gs(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(ie("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise},t.prototype.limitToFirst=function(e){return re("Query.limitToFirst",1,1,arguments.length),new t(this.database,bu(this._delegate,au(e)))},t.prototype.limitToLast=function(e){return re("Query.limitToLast",1,1,arguments.length),new t(this.database,bu(this._delegate,uu(e)))},t.prototype.orderByChild=function(e){return re("Query.orderByChild",1,1,arguments.length),new t(this.database,bu(this._delegate,hu(e)))},t.prototype.orderByKey=function(){return re("Query.orderByKey",0,0,arguments.length),new t(this.database,bu(this._delegate,fu()))},t.prototype.orderByPriority=function(){return re("Query.orderByPriority",0,0,arguments.length),new t(this.database,bu(this._delegate,du()))},t.prototype.orderByValue=function(){return re("Query.orderByValue",0,0,arguments.length),new t(this.database,bu(this._delegate,gu()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),re("Query.startAt",0,2,arguments.length),new t(this.database,bu(this._delegate,nu(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),re("Query.startAfter",0,2,arguments.length),new t(this.database,bu(this._delegate,iu(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),re("Query.endAt",0,2,arguments.length),new t(this.database,bu(this._delegate,Js(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),re("Query.endBefore",0,2,arguments.length),new t(this.database,bu(this._delegate,tu(e,n)))},t.prototype.equalTo=function(e,n){return re("Query.equalTo",1,2,arguments.length),new t(this.database,bu(this._delegate,yu(e,n)))},t.prototype.toString=function(){return re("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return re("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(re("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,oe(t,"cancel",r.cancel,!0),r.context=n,ae(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(ie(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Du(this.database,new Ns(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Du=function(t){function e(e,n){var r=t.call(this,e,new Ss(n._repo,n._path,new pi,!1))||this;return r.database=e,r._delegate=n,r}return pt(e,t),e.prototype.getKey=function(){return re("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return re("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Os(this._delegate,t))},e.prototype.getParent=function(){re("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return re("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){re("Reference.set",1,2,arguments.length),oe("Reference.set","onComplete",e,!0);var n=Ms(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.update=function(t,e){if(re("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Tn("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}qa("Reference.update",this._delegate._path),oe("Reference.update","onComplete",e,!0);var i=Us(this._delegate,t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},e.prototype.setWithPriority=function(t,e,n){re("Reference.setWithPriority",2,3,arguments.length),oe("Reference.setWithPriority","onComplete",n,!0);var r=js(this._delegate,t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},e.prototype.remove=function(t){re("Reference.remove",0,1,arguments.length),oe("Reference.remove","onComplete",t,!0);var e=Ls(this._delegate);return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},e.prototype.transaction=function(t,e,n){var r=this;re("Reference.transaction",1,3,arguments.length),oe("Reference.transaction","transactionUpdate",t,!1),oe("Reference.transaction","onComplete",e,!0),Ba("Reference.transaction","applyLocally",n,!0);var i=Nu(this._delegate,t,{applyLocally:n}).then((function(t){return new Pu(t.committed,new xu(r.database,t.snapshot))}));return e&&i.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),i},e.prototype.setPriority=function(t,e){re("Reference.setPriority",1,2,arguments.length),oe("Reference.setPriority","onComplete",e,!0);var n=Fs(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.push=function(t,n){var r=this;re("Reference.push",0,2,arguments.length),oe("Reference.push","onComplete",n,!0);var i=Ds(this._delegate,t),o=i.then((function(t){return new e(r.database,t)}));n&&o.then((function(){return n(null)}),(function(t){return n(t)}));var a=new e(this.database,i);return a.then=o.then.bind(o),a.catch=o.catch.bind(o,void 0),a},e.prototype.onDisconnect=function(){return qa("Reference.onDisconnect",this._delegate._path),new Ru(new Es(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Ou),Lu=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),Eu(this._delegate,t,e,n)},t.prototype.ref=function(t){if(re("database.ref",0,1,arguments.length),t instanceof Du){var e=xs(this._delegate,t.toString());return new Du(this,e)}e=Ps(this._delegate,t);return new Du(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";re(e,1,1,arguments.length);var n=xs(this._delegate,t);return new Du(this,n)},t.prototype.goOffline=function(){return re("database.goOffline",0,0,arguments.length),Su(this._delegate)},t.prototype.goOnline=function(){return re("database.goOnline",0,0,arguments.length),Cu(this._delegate)},t.ServerValue={TIMESTAMP:ku,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mu=Object.freeze({__proto__:null,forceLongPolling:function(){Yn.forceDisallow(),Gn.forceAllow()},forceWebSockets:function(){Gn.forceDisallow()},isWebSocketsAvailable:function(){return Yn.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new ki(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);Rn(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){var n,r;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */t.stats_.incrementCounter(e),n=t.statsReporter_,r=e,n.statsToReport_[r]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,a=t.nodeAdmin,s=void 0!==a&&a;on(r);var u=new fe("auth-internal",new de("database-standalone"));return u.setComponent(new le("auth-internal",(function(){return i}),"PRIVATE")),{instance:new Lu(Iu(e,u,void 0,n,s),e),namespace:o}}}),Fu=Ir;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Ir.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var ju=Jn,Uu=qn,qu=Object.freeze({__proto__:null,DataConnection:Fu,RealTimeConnection:ju,hijackHash:function(t){var e=Ir.prototype.put;return Ir.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Ir.prototype.put=e}},ConnectionTarget:Uu,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){wu=t}(t)}}),Vu=Lu.ServerValue;!function(t){on(t.SDK_VERSION);var e=t.INTERNAL.registerComponent(new le("database",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Lu(Iu(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:Du,Query:Ou,Database:Lu,DataSnapshot:xu,enableLogging:yn,INTERNAL:Mu,ServerValue:Vu,TEST_ACCESS:qu}).setMultipleInstances(!0));t.registerVersion("@firebase/database","0.10.7"),Ft()&&e}(Ve);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Bu=function(t,e){return Bu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Bu(t,e)};function Ku(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Hu,Wu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},zu=zu||{},Gu=Wu||self;function Qu(){}function $u(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Yu(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Xu="closure_uid_"+(1e9*Math.random()>>>0),Ju=0;function Zu(t,e,n){return t.call.apply(t.bind,arguments)}function tc(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ec(t,e,n){return(ec=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Zu:tc).apply(null,arguments)}function nc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function rc(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ic(){this.s=this.s,this.o=this.o}var oc={};ic.prototype.s=!1,ic.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Xu)&&t[Xu]||(t[Xu]=++Ju)}(this);delete oc[t]}},ic.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ac=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},sc=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function uc(t){return Array.prototype.concat.apply([],arguments)}function cc(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function hc(t){return/^[\s\xa0]*$/.test(t)}var lc,fc=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function pc(t,e){return-1!=t.indexOf(e)}function dc(t,e){return t<e?-1:t>e?1:0}t:{var vc=Gu.navigator;if(vc){var gc=vc.userAgent;if(gc){lc=gc;break t}}lc=""}function mc(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function yc(t){var e={};for(var n in t)e[n]=t[n];return e}var bc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _c(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<bc.length;o++)n=bc[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function wc(t){return wc[" "](t),t}wc[" "]=Qu;var Ic,Tc=pc(lc,"Opera"),Ec=pc(lc,"Trident")||pc(lc,"MSIE"),Sc=pc(lc,"Edge"),Cc=Sc||Ec,kc=pc(lc,"Gecko")&&!(pc(lc.toLowerCase(),"webkit")&&!pc(lc,"Edge"))&&!(pc(lc,"Trident")||pc(lc,"MSIE"))&&!pc(lc,"Edge"),Ac=pc(lc.toLowerCase(),"webkit")&&!pc(lc,"Edge");function Nc(){var t=Gu.document;return t?t.documentMode:void 0}t:{var Rc="",Pc=function(){var t=lc;return kc?/rv:([^\);]+)(\)|;)/.exec(t):Sc?/Edge\/([\d\.]+)/.exec(t):Ec?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Ac?/WebKit\/(\S+)/.exec(t):Tc?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Pc&&(Rc=Pc?Pc[1]:""),Ec){var xc=Nc();if(null!=xc&&xc>parseFloat(Rc)){Ic=String(xc);break t}}Ic=Rc}var Oc,Dc={};function Lc(){return function(t){var e=Dc;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=fc(String(Ic)).split("."),n=fc("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=dc(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||dc(0==o[2].length,0==a[2].length)||dc(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t}))}if(Gu.document&&Ec){var Mc=Nc();Oc=Mc||(parseInt(Ic,10)||void 0)}else Oc=void 0;var Fc=Oc,jc=function(){if(!Gu.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Gu.addEventListener("test",Qu,e),Gu.removeEventListener("test",Qu,e)}catch(t){}return t}();function Uc(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function qc(t,e){if(Uc.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(kc){t:{try{wc(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Vc[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&qc.Z.h.call(this)}}Uc.prototype.h=function(){this.defaultPrevented=!0},rc(qc,Uc);var Vc={2:"touch",3:"pen",4:"mouse"};qc.prototype.h=function(){qc.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Bc="closure_listenable_"+(1e6*Math.random()|0),Kc=0;function Hc(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Kc,this.ca=this.fa=!1}function Wc(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function zc(t){this.src=t,this.g={},this.h=0}function Gc(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=ac(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Wc(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Qc(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}zc.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var a=Qc(t,e,r,i);return-1<a?(e=t[a],n||(e.fa=!1)):((e=new Hc(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var $c="closure_lm_"+(1e6*Math.random()|0),Yc={};function Xc(t,e,n,r,i){if(r&&r.once)return Zc(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Xc(t,e[o],n,r,i);return null}return n=ah(n),t&&t[Bc]?t.N(e,n,Yu(r)?!!r.capture:!!r,i):Jc(t,e,n,!1,r,i)}function Jc(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=Yu(i)?!!i.capture:!!i,s=ih(t);if(s||(t[$c]=s=new zc(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=rh;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)jc||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(nh(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Zc(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Zc(t,e[o],n,r,i);return null}return n=ah(n),t&&t[Bc]?t.O(e,n,Yu(r)?!!r.capture:!!r,i):Jc(t,e,n,!0,r,i)}function th(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)th(t,e[o],n,r,i);else r=Yu(r)?!!r.capture:!!r,n=ah(n),t&&t[Bc]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=Qc(o=t.g[e],n,r,i))&&(Wc(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=ih(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Qc(e,n,r,i)),(n=-1<t?e[t]:null)&&eh(n))}function eh(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Bc])Gc(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(nh(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ih(e))?(Gc(n,t),0==n.h&&(n.src=null,e[$c]=null)):Wc(t)}}}function nh(t){return t in Yc?Yc[t]:Yc[t]="on"+t}function rh(t,e){if(t.ca)t=!0;else{e=new qc(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&eh(t),t=n.call(r,e)}return t}function ih(t){return(t=t[$c])instanceof zc?t:null}var oh="__closure_events_fn_"+(1e9*Math.random()>>>0);function ah(t){return"function"==typeof t?t:(t[oh]||(t[oh]=function(e){return t.handleEvent(e)}),t[oh])}function sh(){ic.call(this),this.i=new zc(this),this.P=this,this.I=null}function uh(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Uc(e,t);else if(e instanceof Uc)e.target=e.target||t;else{var i=e;_c(e=new Uc(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.g=n[o];i=ch(a,r,!0,e)&&i}if(i=ch(a=e.g=t,r,!0,e)&&i,i=ch(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=ch(a=e.g=n[o],r,!1,e)&&i}function ch(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&Gc(t.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}rc(sh,ic),sh.prototype[Bc]=!0,sh.prototype.removeEventListener=function(t,e,n,r){th(this,t,e,n,r)},sh.prototype.M=function(){if(sh.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Wc(n[r]);delete e.g[t],e.h--}}this.I=null},sh.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},sh.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var hh=Gu.JSON.stringify;function lh(){var t=bh,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var fh,ph=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=dh.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),dh=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new vh}),(function(t){return t.reset()})),vh=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function gh(t){Gu.setTimeout((function(){throw t}),0)}function mh(t,e){fh||function(){var t=Gu.Promise.resolve(void 0);fh=function(){t.then(_h)}}(),yh||(fh(),yh=!0),bh.add(t,e)}var yh=!1,bh=new ph;function _h(){for(var t;t=lh();){try{t.h.call(t.g)}catch(t){gh(t)}var e=dh;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}yh=!1}function wh(t,e){sh.call(this),this.h=t||1,this.g=e||Gu,this.j=ec(this.kb,this),this.l=Date.now()}function Ih(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Th(t,e,n){if("function"==typeof t)n&&(t=ec(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ec(t.handleEvent,t)}return 2147483647<Number(e)?-1:Gu.setTimeout(t,e||0)}function Eh(t){t.g=Th((function(){t.g=null,t.i&&(t.i=!1,Eh(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}rc(wh,sh),(Hu=wh.prototype).da=!1,Hu.S=null,Hu.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),uh(this,"tick"),this.da&&(Ih(this),this.start()))}},Hu.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Hu.M=function(){wh.Z.M.call(this),Ih(this),delete this.g};var Sh=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Bu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Eh(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Gu.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(ic);function Ch(t){ic.call(this),this.h=t,this.g={}}rc(Ch,ic);var kh=[];function Ah(t,e,n,r){Array.isArray(n)||(n&&(kh[0]=n.toString()),n=kh);for(var i=0;i<n.length;i++){var o=Xc(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Nh(t){mc(t.g,(function(t,e){this.g.hasOwnProperty(e)&&eh(t)}),t),t.g={}}function Rh(){this.g=!0}function Ph(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return hh(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Ch.prototype.M=function(){Ch.Z.M.call(this),Nh(this)},Ch.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Rh.prototype.Aa=function(){this.g=!1},Rh.prototype.info=function(){};var xh={},Oh=null;function Dh(){return Oh=Oh||new sh}function Lh(t){Uc.call(this,xh.Ma,t)}function Mh(t){var e=Dh();uh(e,new Lh(e,t))}function Fh(t,e){Uc.call(this,xh.STAT_EVENT,t),this.stat=e}function jh(t){var e=Dh();uh(e,new Fh(e,t))}function Uh(t,e){Uc.call(this,xh.Na,t),this.size=e}function qh(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Gu.setTimeout((function(){t()}),e)}xh.Ma="serverreachability",rc(Lh,Uc),xh.STAT_EVENT="statevent",rc(Fh,Uc),xh.Na="timingevent",rc(Uh,Uc);var Vh={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Bh={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Kh(){}function Hh(t){return t.h||(t.h=t.i())}function Wh(){}Kh.prototype.h=null;var zh,Gh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Qh(){Uc.call(this,"d")}function $h(){Uc.call(this,"c")}function Yh(){}function Xh(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Ch(this),this.P=Zh,t=Cc?125:void 0,this.W=new wh(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Jh}function Jh(){this.i=null,this.g="",this.h=!1}rc(Qh,Uc),rc($h,Uc),rc(Yh,Kh),Yh.prototype.g=function(){return new XMLHttpRequest},Yh.prototype.i=function(){return{}},zh=new Yh;var Zh=45e3,tl={},el={};function nl(t,e,n){t.K=1,t.v=Sl(bl(e)),t.s=n,t.U=!0,rl(t,null)}function rl(t,e){t.F=Date.now(),sl(t),t.A=bl(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),jl(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Jh,t.g=qf(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Sh(ec(t.Ia,t,t.g),t.O)),Ah(t.V,t.g,"readystatechange",t.gb),e=t.H?yc(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Mh(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");a=2<=l.length&&"type"==l[1]?a+(h+"=")+c+"&":a+(h+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function il(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function ol(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=al(t,n))==el){4==e&&(t.o=4,jh(14),i=!1),Ph(t.j,t.m,null,"[Incomplete Response]");break}if(r==tl){t.o=4,jh(15),Ph(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Ph(t.j,t.m,r,null),fl(t,r)}il(t)&&r!=el&&r!=tl&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,jh(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),xf(e),e.L=!0,jh(11))):(Ph(t.j,t.m,n,"[Invalid Chunked Response]"),ll(t),hl(t))}function al(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?el:(n=Number(e.substring(n,r)),isNaN(n)?tl:(r+=1)+n>e.length?el:(e=e.substr(r,n),t.C=r+n,e))}function sl(t){t.Y=Date.now()+t.P,ul(t,t.P)}function ul(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=qh(ec(t.eb,t),e)}function cl(t){t.B&&(Gu.clearTimeout(t.B),t.B=null)}function hl(t){0==t.l.G||t.I||Lf(t.l,t)}function ll(t){cl(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Ih(t.W),Nh(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function fl(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Wl(n.i,t)))if(n.I=t.N,!t.J&&Wl(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Df(n),Tf(n)}Pf(n),jh(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=qh(ec(n.ab,n),6e3));if(1>=Hl(n.i)&&n.ka){try{n.ka()}catch(t){}n.ka=void 0}}else Ff(n,11)}else if((t.J||n.g==t)&&Df(n),!hc(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var h=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=r.i;!l.g&&(pc(h,"spdy")||pc(h,"quic")||pc(h,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(zl(l,l.h),l.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,El(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=Uf(r,r.H?r.la:null,r.W),p.J){Gl(r.i,p);var d=p,v=r.K;v&&d.setTimeout(v),d.B&&(cl(d),sl(d)),r.g=p}else Rf(r);0<n.l.length&&Cf(n)}else"stop"!=o[0]&&"close"!=o[0]||Ff(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Ff(n,7):If(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Mh(4)}catch(t){}}function pl(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if($u(t)||"string"==typeof t)sc(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if($u(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if($u(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function dl(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof dl)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function vl(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];gl(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)gl(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function gl(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Hu=Xh.prototype).setTimeout=function(t){this.P=t},Hu.gb=function(t){t=t.target;var e=this.L;e&&3==mf(t)?e.l():this.Ia(t)},Hu.Ia=function(t){try{if(t==this.g)t:{var e=mf(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||Cc||this.g&&(this.h.h||this.g.ga()||yf(this.g)))){this.I||4!=e||7==n||Mh(8==n||0>=r?3:2),cl(this);var i=this.g.ba();this.N=i;e:if(il(this)){var o=yf(this.g);t="";var a=o.length,s=4==mf(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ll(this),hl(this);var u="";break e}this.h.i=new Gu.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hc(c)){var l=c;break e}}l=null}if(!(i=l)){this.i=!1,this.o=3,jh(12),ll(this),hl(this);break t}Ph(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,fl(this,i)}this.U?(ol(this,e,u),Cc&&this.i&&3==e&&(Ah(this.V,this.W,"tick",this.fb),this.W.start())):(Ph(this.j,this.m,u,null),fl(this,u)),4==e&&ll(this),this.i&&!this.I&&(4==e?Lf(this.l,this):(this.i=!1,sl(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,jh(12)):(this.o=0,jh(13)),ll(this),hl(this)}}}catch(t){}},Hu.fb=function(){if(this.g){var t=mf(this.g),e=this.g.ga();this.C<e.length&&(cl(this),ol(this,t,e),this.i&&4!=t&&sl(this))}},Hu.cancel=function(){this.I=!0,ll(this)},Hu.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Mh(3),jh(17)),ll(this),this.o=2,hl(this)):ul(this,this.Y-t)},(Hu=dl.prototype).R=function(){vl(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Hu.T=function(){return vl(this),this.g.concat()},Hu.get=function(t,e){return gl(this.h,t)?this.h[t]:e},Hu.set=function(t,e){gl(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Hu.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ml=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function yl(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof yl){this.g=void 0!==e?e:t.g,_l(this,t.j),this.s=t.s,wl(this,t.i),Il(this,t.m),this.l=t.l,e=t.h;var n=new Dl;n.i=e.i,e.g&&(n.g=new dl(e.g),n.h=e.h),Tl(this,n),this.o=t.o}else t&&(n=String(t).match(ml))?(this.g=!!e,_l(this,n[1]||"",!0),this.s=Cl(n[2]||""),wl(this,n[3]||"",!0),Il(this,n[4]),this.l=Cl(n[5]||"",!0),Tl(this,n[6]||"",!0),this.o=Cl(n[7]||"")):(this.g=!!e,this.h=new Dl(null,this.g))}function bl(t){return new yl(t)}function _l(t,e,n){t.j=n?Cl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function wl(t,e,n){t.i=n?Cl(e,!0):e}function Il(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Tl(t,e,n){e instanceof Dl?(t.h=e,function(t,e){e&&!t.j&&(Ll(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Ml(this,e),jl(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=kl(e,xl)),t.h=new Dl(e,t.g))}function El(t,e,n){t.h.set(e,n)}function Sl(t){return El(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Cl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function kl(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Al),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Al(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}yl.prototype.toString=function(){var t=[],e=this.j;e&&t.push(kl(e,Nl,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(kl(e,Nl,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(kl(n,"/"==n.charAt(0)?Pl:Rl,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",kl(n,Ol)),t.join("")};var Nl=/[#\/\?@]/g,Rl=/[#\?:]/g,Pl=/[#\?]/g,xl=/[#\?@]/g,Ol=/#/g;function Dl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ll(t){t.g||(t.g=new dl,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Ml(t,e){Ll(t),e=Ul(t,e),gl(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,gl((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&vl(t)))}function Fl(t,e){return Ll(t),e=Ul(t,e),gl(t.g.h,e)}function jl(t,e,n){Ml(t,e),0<n.length&&(t.i=null,t.g.set(Ul(t,e),cc(n)),t.h+=n.length)}function Ul(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Hu=Dl.prototype).add=function(t,e){Ll(this),this.i=null,t=Ul(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Hu.forEach=function(t,e){Ll(this),this.g.forEach((function(n,r){sc(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Hu.T=function(){Ll(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Hu.R=function(t){Ll(this);var e=[];if("string"==typeof t)Fl(this,t)&&(e=uc(e,this.g.get(Ul(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=uc(e,t[n])}return e},Hu.set=function(t,e){return Ll(this),this.i=null,Fl(this,t=Ul(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Hu.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Hu.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.i=t.join("&")};var ql=function(t,e){this.h=t,this.g=e};function Vl(t){this.l=t||Bl,Gu.PerformanceNavigationTiming?t=0<(t=Gu.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(Gu.g&&Gu.g.Ea&&Gu.g.Ea()&&Gu.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Bl=10;function Kl(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Hl(t){return t.h?1:t.g?t.g.size:0}function Wl(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function zl(t,e){t.g?t.g.add(e):t.h=e}function Gl(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Ql(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Ku(t.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return cc(t.i)}function $l(){}function Yl(){this.g=new $l}function Xl(t,e,n){var r=n||"";try{pl(t,(function(t,n){var i=t;Yu(t)&&(i=hh(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Jl(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function Zl(t){this.l=t.$b||null,this.j=t.ib||!1}function tf(t,e){sh.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=ef,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Vl.prototype.cancel=function(){var t,e;if(this.i=Ql(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Ku(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},$l.prototype.stringify=function(t){return Gu.JSON.stringify(t,void 0)},$l.prototype.parse=function(t){return Gu.JSON.parse(t,void 0)},rc(Zl,Kh),Zl.prototype.g=function(){return new tf(this.l,this.j)},Zl.prototype.i=function(t){return function(){return t}}({}),rc(tf,sh);var ef=0;function nf(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function rf(t){t.readyState=4,t.l=null,t.j=null,t.A=null,of(t)}function of(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Hu=tf.prototype).open=function(t,e){if(this.readyState!=ef)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,of(this)},Hu.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Gu).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Hu.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,rf(this)),this.readyState=ef},Hu.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,of(this)),this.g&&(this.readyState=3,of(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Gu.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;nf(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Hu.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?rf(this):of(this),3==this.readyState&&nf(this)}},Hu.Ua=function(t){this.g&&(this.response=this.responseText=t,rf(this))},Hu.Ta=function(t){this.g&&(this.response=t,rf(this))},Hu.ha=function(){this.g&&rf(this)},Hu.setRequestHeader=function(t,e){this.v.append(t,e)},Hu.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Hu.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(tf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var af=Gu.JSON.parse;function sf(t){sh.call(this),this.headers=new dl,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=uf,this.K=this.L=!1}rc(sf,sh);var uf="",cf=/^https?$/i,hf=["POST","PUT"];function lf(t){return"content-type"==t.toLowerCase()}function ff(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,pf(t),vf(t)}function pf(t){t.D||(t.D=!0,uh(t,"complete"),uh(t,"error"))}function df(t){if(t.h&&void 0!==zu&&(!t.C[1]||4!=mf(t)||2!=t.ba()))if(t.v&&4==mf(t))Th(t.Fa,0,t);else if(uh(t,"readystatechange"),4==mf(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(ml)[1]||null;if(!o&&Gu.self&&Gu.self.location){var a=Gu.self.location.protocol;o=a.substr(0,a.length-1)}i=!cf.test(o?o.toLowerCase():"")}e=i}if(e)uh(t,"complete"),uh(t,"success");else{t.m=6;try{var s=2<mf(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.ba()+"]",pf(t)}}finally{vf(t)}}}function vf(t,e){if(t.g){gf(t);var n=t.g,r=t.C[0]?Qu:null;t.g=null,t.C=null,e||uh(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function gf(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Gu.clearTimeout(t.A),t.A=null)}function mf(t){return t.g?t.g.readyState:0}function yf(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case uf:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function bf(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return mc(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):El(t,e,n))}function _f(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function wf(t){this.za=0,this.l=[],this.h=new Rh,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=_f("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=_f("baseRetryDelayMs",5e3,t),this.$a=_f("retryDelaySeedMs",1e4,t),this.Ya=_f("forwardChannelMaxRetries",2,t),this.ra=_f("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Vl(t&&t.concurrentRequestLimit),this.Ca=new Yl,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function If(t){if(Ef(t),3==t.G){var e=t.V++,n=bl(t.F);El(n,"SID",t.J),El(n,"RID",e),El(n,"TYPE","terminate"),Af(t,n),(e=new Xh(t,t.h,e,void 0)).K=2,e.v=Sl(bl(n)),n=!1,Gu.navigator&&Gu.navigator.sendBeacon&&(n=Gu.navigator.sendBeacon(e.v.toString(),"")),!n&&Gu.Image&&((new Image).src=e.v,n=!0),n||(e.g=qf(e.l,null),e.g.ea(e.v)),e.F=Date.now(),sl(e)}jf(t)}function Tf(t){t.g&&(xf(t),t.g.cancel(),t.g=null)}function Ef(t){Tf(t),t.u&&(Gu.clearTimeout(t.u),t.u=null),Df(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Gu.clearTimeout(t.m),t.m=null)}function Sf(t,e){t.l.push(new ql(t.Za++,e)),3==t.G&&Cf(t)}function Cf(t){Kl(t.i)||t.m||(t.m=!0,mh(t.Ha,t),t.C=0)}function kf(t,e){var n;n=e?e.m:t.V++;var r=bl(t.F);El(r,"SID",t.J),El(r,"RID",n),El(r,"AID",t.U),Af(t,r),t.o&&t.s&&bf(r,t.o,t.s),n=new Xh(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Nf(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),zl(t.i,n),nl(n,r,e)}function Af(t,e){t.j&&pl({},(function(t,n){El(e,n,t)}))}function Nf(t,e,n){n=Math.min(t.l.length,n);var r=t.j?ec(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,h=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),s=!1;else try{Xl(h,a,"req"+c+"_")}catch(t){r&&r(h)}}if(s){r=a.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Rf(t){t.g||t.u||(t.Y=1,mh(t.Ga,t),t.A=0)}function Pf(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=qh(ec(t.Ga,t),Mf(t,t.A)),t.A++,!0)}function xf(t){null!=t.B&&(Gu.clearTimeout(t.B),t.B=null)}function Of(t){t.g=new Xh(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=bl(t.oa);El(e,"RID","rpc"),El(e,"SID",t.J),El(e,"CI",t.N?"0":"1"),El(e,"AID",t.U),Af(t,e),El(e,"TYPE","xmlhttp"),t.o&&t.s&&bf(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Sl(bl(e)),n.s=null,n.U=!0,rl(n,t)}function Df(t){null!=t.v&&(Gu.clearTimeout(t.v),t.v=null)}function Lf(t,e){var n=null;if(t.g==e){Df(t),xf(t),t.g=null;var r=2}else{if(!Wl(t.i,e))return;n=e.D,Gl(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;uh(r=Dh(),new Uh(r,n,e,i)),Cf(t)}else Rf(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Hl(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=qh(ec(t.Ha,t,e),Mf(t,t.C)),t.C++,0)))}(t,e)||2==r&&Pf(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ff(t,5);break;case 4:Ff(t,10);break;case 3:Ff(t,6);break;default:Ff(t,2)}}function Mf(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Ff(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=ec(t.jb,t);n||(n=new yl("//www.google.com/images/cleardot.gif"),Gu.location&&"http"==Gu.location.protocol||_l(n,"https"),Sl(n)),function(t,e){var n=new Rh;if(Gu.Image){var r=new Image;r.onload=nc(Jl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=nc(Jl,n,r,"TestLoadImage: error",!1,e),r.onabort=nc(Jl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=nc(Jl,n,r,"TestLoadImage: timeout",!1,e),Gu.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else jh(2);t.G=0,t.j&&t.j.va(e),jf(t),Ef(t)}function jf(t){t.G=0,t.I=-1,t.j&&(0==Ql(t.i).length&&0==t.l.length||(t.i.i.length=0,cc(t.l),t.l.length=0),t.j.ua())}function Uf(t,e,n){var r=function(t){return t instanceof yl?bl(t):new yl(t,void 0)}(n);if(""!=r.i)e&&wl(r,e+"."+r.i),Il(r,r.m);else{var i=Gu.location;r=function(t,e,n,r){var i=new yl(null,void 0);return t&&_l(i,t),e&&wl(i,e),n&&Il(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&mc(t.aa,(function(t,e){El(r,e,t)})),e=t.D,n=t.sa,e&&n&&El(r,e,n),El(r,"VER",t.ma),Af(t,r),r}function qf(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new sf(new Zl({ib:!0})):new sf(t.qa)).L=t.H,e}function Vf(){}function Bf(){if(Ec&&!(10<=Number(Fc)))throw Error("Environmental error: no available transport.")}function Kf(t,e){sh.call(this),this.g=new wf(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!hc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!hc(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new zf(this)}function Hf(t){Qh.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Wf(){$h.call(this),this.status=1}function zf(t){this.g=t}(Hu=sf.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():zh.g(),this.C=this.u?Hh(this.u):Hh(zh),this.g.onreadystatechange=ec(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void ff(this,t)}t=n||"";var i=new dl(this.headers);r&&pl(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=lf,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=Gu.FormData&&t instanceof Gu.FormData,!(0<=ac(hf,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{gf(this),0<this.B&&((this.K=function(t){return Ec&&Lc()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ec(this.pa,this)):this.A=Th(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){ff(this,t)}},Hu.pa=function(){void 0!==zu&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,uh(this,"timeout"),this.abort(8))},Hu.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,uh(this,"complete"),uh(this,"abort"),vf(this))},Hu.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vf(this,!0)),sf.Z.M.call(this)},Hu.Fa=function(){this.s||(this.F||this.v||this.l?df(this):this.cb())},Hu.cb=function(){df(this)},Hu.ba=function(){try{return 2<mf(this)?this.g.status:-1}catch(t){return-1}},Hu.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Hu.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),af(e)}},Hu.Da=function(){return this.m},Hu.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Hu=wf.prototype).ma=8,Hu.G=1,Hu.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},Hu.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Xh(this,this.h,t,void 0),n=this.s;if(this.P&&(n?_c(n=yc(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Nf(this,e,r),El(i=bl(this.F),"RID",t),El(i,"CVER",22),this.D&&El(i,"X-HTTP-Session-Id",this.D),Af(this,i),this.o&&n&&bf(i,this.o,n),zl(this.i,e),this.Ra&&El(i,"TYPE","init"),this.ja?(El(i,"$req",r),El(i,"SID","null"),e.$=!0,nl(e,i,null)):nl(e,i,r),this.G=2}}else 3==this.G&&(t?kf(this,t):0==this.l.length||Kl(this.i)||kf(this))},Hu.Ga=function(){if(this.u=null,Of(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=qh(ec(this.bb,this),t)}},Hu.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,jh(10),Tf(this),Of(this))},Hu.ab=function(){null!=this.v&&(this.v=null,Tf(this),Pf(this),jh(19))},Hu.jb=function(t){t?(this.h.info("Successfully pinged google.com"),jh(2)):(this.h.info("Failed to ping google.com"),jh(1))},(Hu=Vf.prototype).xa=function(){},Hu.wa=function(){},Hu.va=function(){},Hu.ua=function(){},Hu.Oa=function(){},Bf.prototype.g=function(t,e){return new Kf(t,e)},rc(Kf,sh),Kf.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),mh(ec(t.hb,t,e))),jh(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Uf(t,null,t.W),Cf(t)},Kf.prototype.close=function(){If(this.g)},Kf.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Sf(this.g,e)}else this.v?((e={}).__data__=hh(t),Sf(this.g,e)):Sf(this.g,t)},Kf.prototype.M=function(){this.g.j=null,delete this.j,If(this.g),delete this.g,Kf.Z.M.call(this)},rc(Hf,Qh),rc(Wf,$h),rc(zf,Vf),zf.prototype.xa=function(){uh(this.g,"a")},zf.prototype.wa=function(t){uh(this.g,new Hf(t))},zf.prototype.va=function(t){uh(this.g,new Wf(t))},zf.prototype.ua=function(){uh(this.g,"b")},Bf.prototype.createWebChannel=Bf.prototype.g,Kf.prototype.send=Kf.prototype.u,Kf.prototype.open=Kf.prototype.m,Kf.prototype.close=Kf.prototype.close,Vh.NO_ERROR=0,Vh.TIMEOUT=8,Vh.HTTP_ERROR=6,Bh.COMPLETE="complete",Wh.EventType=Gh,Gh.OPEN="a",Gh.CLOSE="b",Gh.ERROR="c",Gh.MESSAGE="d",sh.prototype.listen=sh.prototype.N,sf.prototype.listenOnce=sf.prototype.O,sf.prototype.getLastError=sf.prototype.La,sf.prototype.getLastErrorCode=sf.prototype.Da,sf.prototype.getStatus=sf.prototype.ba,sf.prototype.getResponseJson=sf.prototype.Qa,sf.prototype.getResponseText=sf.prototype.ga,sf.prototype.send=sf.prototype.ea;var Gf=function(){return new Bf},Qf=function(){return Dh()},$f=Vh,Yf=Bh,Xf=xh,Jf={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Zf=Zl,tp=Wh,ep=sf,np=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();np.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var rp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ip=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return pt(e,t),e}(Error),op=new Ee("@firebase/firestore");function ap(){return op.logLevel}function sp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(op.logLevel<=ge.DEBUG){var r=e.map(hp);op.debug.apply(op,bt(["Firestore (8.7.0): "+t],r))}}function up(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(op.logLevel<=ge.ERROR){var r=e.map(hp);op.error.apply(op,bt(["Firestore (8.7.0): "+t],r))}}function cp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(op.logLevel<=ge.WARN){var r=e.map(hp);op.warn.apply(op,bt(["Firestore (8.7.0): "+t],r))}}function hp(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.7.0) INTERNAL ASSERTION FAILED: "+t;throw up(e),new Error(e)}function fp(t,e){t||lp()}function pp(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vp=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=dp(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function gp(t,e){return t<e?-1:t>e?1:0}function mp(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function yp(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bp=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ip(rp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ip(rp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ip(rp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ip(rp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?gp(this.nanoseconds,t.nanoseconds):gp(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),_p=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new bp(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ip(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Tp(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ep=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&lp(),void 0===n?n=t.length-e:n>t.length-e&&lp(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Sp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new ip(rp.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Ep),Cp=/^[_a-zA-Z][_a-zA-Z0-9]*$/,kp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Cp.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new ip(rp.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new ip(rp.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ip(rp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new ip(rp.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Ep),Ap=function(){function t(t){this.fields=t,t.sort(kp.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return mp(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Np=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){var t;return t=this.binaryString,btoa(t)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return gp(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Np.EMPTY_BYTE_STRING=new Np("");var Rp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pp(t){if(fp(!!t),"string"==typeof t){var e=0,n=Rp.exec(t);if(fp(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:xp(t.seconds),nanos:xp(t.nanos)}}function xp(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Op(t){return"string"==typeof t?Np.fromBase64String(t):Np.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Lp(t){var e=t.mapValue.fields.__previous_value__;return Dp(e)?Lp(e):e}function Mp(t){var e=Pp(t.mapValue.fields.__local_write_time__.timestampValue);return new bp(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(t){return null==t}function jp(t){return 0===t&&1/t==-1/0}function Up(t){return"number"==typeof t&&Number.isInteger(t)&&!jp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qp=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Sp.fromString(e))},t.fromName=function(e){return new t(Sp.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Sp.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Sp.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Sp(e.slice()))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dp(t)?4:10:lp()}function Bp(t,e){var n=Vp(t);if(n!==Vp(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Mp(t).isEqual(Mp(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Pp(t.timestampValue),r=Pp(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Op(t.bytesValue).isEqual(Op(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return xp(t.geoPointValue.latitude)===xp(e.geoPointValue.latitude)&&xp(t.geoPointValue.longitude)===xp(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return xp(t.integerValue)===xp(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=xp(t.doubleValue),r=xp(e.doubleValue);return n===r?jp(n)===jp(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return mp(t.arrayValue.values||[],e.arrayValue.values||[],Bp);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(wp(n)!==wp(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Bp(n[i],r[i])))return!1;return!0}(t,e);default:return lp()}}function Kp(t,e){return void 0!==(t.values||[]).find((function(t){return Bp(t,e)}))}function Hp(t,e){var n=Vp(t),r=Vp(e);if(n!==r)return gp(n,r);switch(n){case 0:return 0;case 1:return gp(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=xp(t.integerValue||t.doubleValue),r=xp(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Wp(t.timestampValue,e.timestampValue);case 4:return Wp(Mp(t),Mp(e));case 5:return gp(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Op(t),r=Op(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=gp(n[i],r[i]);if(0!==o)return o}return gp(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=gp(xp(t.latitude),xp(e.latitude));return 0!==n?n:gp(xp(t.longitude),xp(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Hp(n[i],r[i]);if(o)return o}return gp(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=gp(r[a],o[a]);if(0!==s)return s;var u=Hp(n[r[a]],i[o[a]]);if(0!==u)return u}return gp(r.length,o.length)}(t.mapValue,e.mapValue);default:throw lp()}}function Wp(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return gp(t,e);var n=Pp(t),r=Pp(e),i=gp(n.seconds,r.seconds);return 0!==i?i:gp(n.nanos,r.nanos)}function zp(t){return Gp(t)}function Gp(t){var e,n;return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Pp(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Op(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,qp.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Gp(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Gp(t.fields[o])}return e+"}"}(t.mapValue):lp()}function Qp(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function $p(t){return!!t&&"integerValue"in t}function Yp(t){return!!t&&"arrayValue"in t}function Xp(t){return!!t&&"nullValue"in t}function Jp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zp(t){return!!t&&"mapValue"in t}function td(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},Pp(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return Ip(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=td(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=td(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ed=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Zp(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=td(e)},t.prototype.setAll=function(t){var e=this,n=kp.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var a=e.getFieldsMap(n);e.applyChanges(a,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=td(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Zp(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Bp(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Zp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Ip(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(td(this.value))},t}();function nd(t){var e=[];return Ip(t.fields,(function(t,n){var r=new kp([t]);if(Zp(n)){var i=nd(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new Ap(e)}var rd=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,_p.min(),ed.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,ed.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,ed.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=ed.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=ed.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),id=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new id(t,e,n,r,i,o,a)}function ad(t){var e=pp(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+zp(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),Fp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=bd(e.startAt)),e.endAt&&(n+="|ub:",n+=bd(e.endAt)),e.h=n}return e.h}function sd(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!wd(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Bp(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Td(t.startAt,e.startAt)&&Td(t.endAt,e.endAt)}function ud(t){return qp.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var cd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return pt(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new hd(t,n,r):"array-contains"===n?new dd(t,r):"in"===n?new vd(t,r):"not-in"===n?new gd(t,r):"array-contains-any"===n?new md(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new ld(t,n):new fd(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Hp(e,this.value)):null!==e&&Vp(this.value)===Vp(e)&&this.m(Hp(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return lp()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),hd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=qp.fromName(r.referenceValue),i}return pt(e,t),e.prototype.matches=function(t){var e=qp.comparator(t.key,this.key);return this.m(e)},e}(cd),ld=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=pd("in",n),r}return pt(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(cd),fd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=pd("not-in",n),r}return pt(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(cd);function pd(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return qp.fromName(t.referenceValue)}))}var dd=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return pt(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Yp(e)&&Kp(e.arrayValue,this.value)},e}(cd),vd=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return pt(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Kp(this.value.arrayValue,e)},e}(cd),gd=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return pt(e,t),e.prototype.matches=function(t){if(Kp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Kp(this.value.arrayValue,e)},e}(cd),md=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return pt(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Yp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Kp(e.value.arrayValue,t)}))},e}(cd),yd=function(t,e){this.position=t,this.before=e};function bd(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return zp(t)})).join(",")}var _d=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function wd(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Id(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?qp.comparator(qp.fromName(a.referenceValue),n.key):Hp(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Td(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Bp(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ed=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Sd(t,e,n,r,i,o,a,s){return new Ed(t,e,n,r,i,o,a,s)}function Cd(t){return new Ed(t)}function kd(t){return!Fp(t.limit)&&"F"===t.limitType}function Ad(t){return!Fp(t.limit)&&"L"===t.limitType}function Nd(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Rd(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Pd(t){return null!==t.collectionGroup}function xd(t){var e=pp(t);if(null===e.p){e.p=[];var n=Rd(e),r=Nd(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new _d(n)),e.p.push(new _d(kp.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new _d(kp.keyField(),u))}}}return e.p}function Od(t){var e=pp(t);if(!e.T)if("F"===e.limitType)e.T=od(e.path,e.collectionGroup,xd(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=xd(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new _d(o.field,a))}var s=e.endAt?new yd(e.endAt.position,!e.endAt.before):null,u=e.startAt?new yd(e.startAt.position,!e.startAt.before):null;e.T=od(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function Dd(t,e,n){return new Ed(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ld(t,e){return sd(Od(t),Od(e))&&t.limitType===e.limitType}function Md(t){return ad(Od(t))+"|lt:"+t.limitType}function Fd(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){var e;return(e=t).field.canonicalString()+" "+e.op+" "+zp(e.value)})).join(", ")+"]"),Fp(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+bd(t.startAt)),t.endAt&&(e+=", endAt: "+bd(t.endAt)),"Target("+e+")"}(Od(t))+"; limitType="+t.limitType+")"}function jd(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):qp.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Id(t.startAt,xd(t),e)||t.endAt&&Id(t.endAt,xd(t),e))}(t,e)}function Ud(t){return function(e,n){for(var r=!1,i=0,o=xd(t);i<o.length;i++){var a=o[i],s=qd(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function qd(t,e,n){var r=t.field.isKeyField()?qp.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Hp(r,i):lp()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return lp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jp(e)?"-0":e}}function Bd(t){return{integerValue:""+t}}function Kd(t,e){return Up(e)?Bd(e):Vd(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hd=function(){this._=void 0};function Wd(t,e,n){return t instanceof Qd?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof $d?Yd(t,e):t instanceof Xd?Jd(t,e):function(t,e){var n=Gd(t,e),r=tv(n)+tv(t.A);return $p(n)&&$p(t.A)?Bd(r):Vd(t.R,r)}(t,e)}function zd(t,e,n){return t instanceof $d?Yd(t,e):t instanceof Xd?Jd(t,e):n}function Gd(t,e){var n;return t instanceof Zd?$p(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null}var Qd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e}(Hd),$d=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return pt(e,t),e}(Hd);function Yd(t,e){for(var n=ev(e),r=function(t){n.some((function(e){return Bp(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Xd=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return pt(e,t),e}(Hd);function Jd(t,e){for(var n=ev(e),r=function(t){n=n.filter((function(e){return!Bp(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Zd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return pt(e,t),e}(Hd);function tv(t){return xp(t.integerValue||t.doubleValue)}function ev(t){return Yp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nv=function(t,e){this.field=t,this.transform=e},rv=function(t,e){this.version=t,this.transformResults=e},iv=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function ov(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var av=function(){};function sv(t,e,n){t instanceof fv?function(t,e,n){var r=t.value.clone(),i=vv(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof pv?function(t,e,n){if(ov(t.precondition,e)){var r=vv(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(dv(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function uv(t,e,n){t instanceof fv?function(t,e,n){if(ov(t.precondition,e)){var r=t.value.clone(),i=gv(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(lv(e),r).setHasLocalMutations()}}(t,e,n):t instanceof pv?function(t,e,n){if(ov(t.precondition,e)){var r=gv(t.fieldTransforms,n,e),i=e.data;i.setAll(dv(t)),i.setAll(r),e.convertToFoundDocument(lv(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){ov(t.precondition,e)&&e.convertToNoDocument(_p.min())}(t,e)}function cv(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=Gd(o.transform,a||null);null!=s&&(null==n&&(n=ed.empty()),n.set(o.field,s))}return n||null}function hv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&mp(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof $d&&e instanceof $d||t instanceof Xd&&e instanceof Xd?mp(t.elements,e.elements,Bp):t instanceof Zd&&e instanceof Zd?Bp(t.A,e.A):t instanceof Qd&&e instanceof Qd}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function lv(t){return t.isFoundDocument()?t.version:_p.min()}var fv=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return pt(e,t),e}(av),pv=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return pt(e,t),e}(av);function dv(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function vv(t,e,n){var r=new Map;fp(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,zd(a,s,n[i]))}return r}function gv(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,Wd(s,u,e))}return r}var mv,yv,bv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return pt(e,t),e}(av),_v=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return pt(e,t),e}(av),wv=function(t){this.count=t};function Iv(t){switch(t){case rp.OK:return lp();case rp.CANCELLED:case rp.UNKNOWN:case rp.DEADLINE_EXCEEDED:case rp.RESOURCE_EXHAUSTED:case rp.INTERNAL:case rp.UNAVAILABLE:case rp.UNAUTHENTICATED:return!1;case rp.INVALID_ARGUMENT:case rp.NOT_FOUND:case rp.ALREADY_EXISTS:case rp.PERMISSION_DENIED:case rp.FAILED_PRECONDITION:case rp.ABORTED:case rp.OUT_OF_RANGE:case rp.UNIMPLEMENTED:case rp.DATA_LOSS:return!0;default:return lp()}}function Tv(t){if(void 0===t)return up("GRPC error has no .code"),rp.UNKNOWN;switch(t){case mv.OK:return rp.OK;case mv.CANCELLED:return rp.CANCELLED;case mv.UNKNOWN:return rp.UNKNOWN;case mv.DEADLINE_EXCEEDED:return rp.DEADLINE_EXCEEDED;case mv.RESOURCE_EXHAUSTED:return rp.RESOURCE_EXHAUSTED;case mv.INTERNAL:return rp.INTERNAL;case mv.UNAVAILABLE:return rp.UNAVAILABLE;case mv.UNAUTHENTICATED:return rp.UNAUTHENTICATED;case mv.INVALID_ARGUMENT:return rp.INVALID_ARGUMENT;case mv.NOT_FOUND:return rp.NOT_FOUND;case mv.ALREADY_EXISTS:return rp.ALREADY_EXISTS;case mv.PERMISSION_DENIED:return rp.PERMISSION_DENIED;case mv.FAILED_PRECONDITION:return rp.FAILED_PRECONDITION;case mv.ABORTED:return rp.ABORTED;case mv.OUT_OF_RANGE:return rp.OUT_OF_RANGE;case mv.UNIMPLEMENTED:return rp.UNIMPLEMENTED;case mv.DATA_LOSS:return rp.DATA_LOSS;default:return lp()}}(yv=mv||(mv={}))[yv.OK=0]="OK",yv[yv.CANCELLED=1]="CANCELLED",yv[yv.UNKNOWN=2]="UNKNOWN",yv[yv.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yv[yv.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yv[yv.NOT_FOUND=5]="NOT_FOUND",yv[yv.ALREADY_EXISTS=6]="ALREADY_EXISTS",yv[yv.PERMISSION_DENIED=7]="PERMISSION_DENIED",yv[yv.UNAUTHENTICATED=16]="UNAUTHENTICATED",yv[yv.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yv[yv.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yv[yv.ABORTED=10]="ABORTED",yv[yv.OUT_OF_RANGE=11]="OUT_OF_RANGE",yv[yv.UNIMPLEMENTED=12]="UNIMPLEMENTED",yv[yv.INTERNAL=13]="INTERNAL",yv[yv.UNAVAILABLE=14]="UNAVAILABLE",yv[yv.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ev=function(){function t(t,e){this.comparator=t,this.root=e||Cv.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Cv.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cv.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Sv(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Sv(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Sv(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Sv(this.root,t,this.comparator,!0)},t}(),Sv=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Cv=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw lp();if(this.right.isRed())throw lp();var t=this.left.check();if(t!==this.right.check())throw lp();return t+(this.isRed()?0:1)},t}();Cv.EMPTY=null,Cv.RED=!0,Cv.BLACK=!1,Cv.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw lp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw lp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw lp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw lp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw lp()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Cv(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var kv=function(){function t(t){this.comparator=t,this.data=new Ev(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Av(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Av(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Av=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Nv=new Ev(qp.comparator);function Rv(){return Nv}var Pv=new Ev(qp.comparator);function xv(){return Pv}var Ov=new Ev(qp.comparator);function Dv(){return Ov}var Lv=new kv(qp.comparator);function Mv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Lv,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Fv=new kv(gp);function jv(){return Fv}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uv=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,qv.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(_p.min(),r,jv(),Rv(),Mv())},t}(),qv=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Np.EMPTY_BYTE_STRING,n,Mv(),Mv(),Mv())},t}(),Vv=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Bv=function(t,e){this.targetId=t,this.V=e},Kv=function(t,e,n,r){void 0===n&&(n=Np.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Hv=function(){function t(){this.S=0,this.D=Gv(),this.C=Np.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Mv(),e=Mv(),n=Mv();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:lp()}})),new qv(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Gv()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Wv=function(){function t(t){this.W=t,this.G=new Map,this.H=Rv(),this.J=zv(),this.Y=new kv(gp)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:lp()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(ud(i))if(0===n){var o=new qp(i.path);this.tt(e,o,rd.newNoDocument(o,_p.min()))}else fp(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&ud(o.target)){var a=new qp(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,rd.newNoDocument(a,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=Mv();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Uv(t,n,this.Y,this.H,r);return this.H=Rv(),this.J=zv(),this.Y=new kv(gp),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Hv,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new kv(gp),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||sp("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Hv),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function zv(){return new Ev(qp.comparator)}function Gv(){return new Ev(qp.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qv={asc:"ASCENDING",desc:"DESCENDING"},$v={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Yv=function(t,e){this.databaseId=t,this.I=e};function Xv(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jv(t,e){return t.I?e.toBase64():e.toUint8Array()}function Zv(t,e){return Xv(t,e.toTimestamp())}function tg(t){return fp(!!t),_p.fromTimestamp(function(t){var e=Pp(t);return new bp(e.seconds,e.nanos)}(t))}function eg(t,e){return function(t){return new Sp(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function ng(t){var e=Sp.fromString(t);return fp(Cg(e)),e}function rg(t,e){return eg(t.databaseId,e.path)}function ig(t,e){var n=ng(e);if(n.get(1)!==t.databaseId.projectId)throw new ip(rp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ip(rp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new qp(ug(n))}function og(t,e){return eg(t.databaseId,e)}function ag(t){var e=ng(t);return 4===e.length?Sp.emptyPath():ug(e)}function sg(t){return new Sp(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ug(t){return fp(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function cg(t,e,n){return{name:rg(t,e),fields:n.value.mapValue.fields}}function hg(t,e,n){var r=ig(t,e.name),i=tg(e.updateTime),o=new ed({mapValue:{fields:e.fields}}),a=rd.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function lg(t,e){var n;if(e instanceof fv)n={update:cg(t,e.key,e.value)};else if(e instanceof bv)n={delete:rg(t,e.key)};else if(e instanceof pv)n={update:cg(t,e.key,e.data),updateMask:Sg(e.fieldMask)};else{if(!(e instanceof _v))return lp();n={verify:rg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Qd)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof $d)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Xd)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Zd)return{fieldPath:e.field.canonicalString(),increment:n.A};throw lp()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Zv(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:lp()}(t,e.precondition)),n}function fg(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?iv.updateTime(tg(t.updateTime)):void 0!==t.exists?iv.exists(t.exists):iv.none()}(e.currentDocument):iv.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)fp("REQUEST_TIME"===e.setToServerValue),n=new Qd;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new $d(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Xd(i)}else"increment"in e?n=new Zd(t,e.increment):lp();var o=kp.fromServerFormat(e.fieldPath);return new nv(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=ig(t,e.update.name),o=new ed({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new Ap(e.map((function(t){return kp.fromServerFormat(t)})))}(e.updateMask);return new pv(i,o,a,n,r)}return new fv(i,o,n,r)}if(e.delete){var s=ig(t,e.delete);return new bv(s,n)}if(e.verify){var u=ig(t,e.verify);return new _v(u,n)}return lp()}function pg(t,e){return{documents:[og(t,e.path)]}}function dg(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=og(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=og(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Jp(t.value))return{unaryFilter:{field:wg(t.field),op:"IS_NAN"}};if(Xp(t.value))return{unaryFilter:{field:wg(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Jp(t.value))return{unaryFilter:{field:wg(t.field),op:"IS_NOT_NAN"}};if(Xp(t.value))return{unaryFilter:{field:wg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wg(t.field),op:_g(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:wg(t.field),direction:bg(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||Fp(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=mg(e.startAt)),e.endAt&&(n.structuredQuery.endAt=mg(e.endAt)),n}function vg(t){var e=ag(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){fp(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=gg(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new _d(Ig(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Fp(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=yg(n.startAt));var h=null;return n.endAt&&(h=yg(n.endAt)),Sd(e,i,s,a,u,"F",c,h)}function gg(t){return t?void 0!==t.unaryFilter?[Eg(t)]:void 0!==t.fieldFilter?[Tg(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return gg(t)})).reduce((function(t,e){return t.concat(e)})):lp():[]}function mg(t){return{before:t.before,values:t.position}}function yg(t){var e=!!t.before,n=t.values||[];return new yd(n,e)}function bg(t){return Qv[t]}function _g(t){return $v[t]}function wg(t){return{fieldPath:t.canonicalString()}}function Ig(t){return kp.fromServerFormat(t.fieldPath)}function Tg(t){return cd.create(Ig(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lp()}}(t.fieldFilter.op),t.fieldFilter.value)}function Eg(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Ig(t.unaryFilter.field);return cd.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Ig(t.unaryFilter.field);return cd.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ig(t.unaryFilter.field);return cd.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ig(t.unaryFilter.field);return cd.create(i,"!=",{nullValue:"NULL_VALUE"});default:return lp()}}function Sg(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Cg(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ng(e)),e=Ag(t.get(n),e);return Ng(e)}function Ag(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Ng(t){return t+""}function Rg(t){var e=t.length;if(fp(e>=2),2===e)return fp(""===t.charAt(0)&&""===t.charAt(1)),Sp.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&lp(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:lp()}o=a+2}return new Sp(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pg=function(t,e){this.seconds=t,this.nanoseconds=e},xg=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};xg.store="owner",xg.key="owner";var Og=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Og.store="mutationQueues",Og.keyPath="userId";var Dg=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Dg.store="mutations",Dg.keyPath="batchId",Dg.userMutationsIndex="userMutationsIndex",Dg.userMutationsKeyPath=["userId","batchId"];var Lg=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,kg(e)]},t.key=function(t,e,n){return[t,kg(e),n]},t}();Lg.store="documentMutations",Lg.PLACEHOLDER=new Lg;var Mg=function(t,e){this.path=t,this.readTime=e},Fg=function(t,e){this.path=t,this.version=e},jg=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};jg.store="remoteDocuments",jg.readTimeIndex="readTimeIndex",jg.readTimeIndexPath="readTime",jg.collectionReadTimeIndex="collectionReadTimeIndex",jg.collectionReadTimeIndexPath=["parentPath","readTime"];var Ug=function(t){this.byteSize=t};Ug.store="remoteDocumentGlobal",Ug.key="remoteDocumentGlobalKey";var qg=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};qg.store="targets",qg.keyPath="targetId",qg.queryTargetsIndexName="queryTargetsIndex",qg.queryTargetsKeyPath=["canonicalId","targetId"];var Vg=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Vg.store="targetDocuments",Vg.keyPath=["targetId","path"],Vg.documentTargetsIndex="documentTargetsIndex",Vg.documentTargetsKeyPath=["path","targetId"];var Bg=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Bg.key="targetGlobalKey",Bg.store="targetGlobal";var Kg=function(t,e){this.collectionId=t,this.parent=e};Kg.store="collectionParents",Kg.keyPath=["collectionId","parent"];var Hg=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Hg.store="clientMetadata",Hg.keyPath="clientId";var Wg=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Wg.store="bundles",Wg.keyPath="bundleId";var zg=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};zg.store="namedQueries",zg.keyPath="name";var Gg=bt(bt([],bt(bt([],bt(bt([],bt(bt([],[Og.store,Dg.store,Lg.store,jg.store,qg.store,xg.store,Bg.store,Vg.store]),[Hg.store])),[Ug.store])),[Kg.store])),[Wg.store,zg.store]),Qg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",$g=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Yg=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Xg=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&lp(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),Jg=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Yg,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new em(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=am(e.target.error);n.ft.reject(new em(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(t){throw new em(n,t)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(sp("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new rm(e)},t}(),Zg=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(xt())&&up("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return sp("SimpleDb","Removing database:",t),im(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=xt(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return void 0!==Be&&"YES"===(void 0===(t={})?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return vt(this,void 0,void 0,(function(){var e,n=this;return gt(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(sp("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new em(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new ip(rp.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new em(t,n))},i.onupgradeneeded=function(t){sp("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){sp("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return vt(this,void 0,void 0,(function(){var i,o,a,s,u;return gt(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,h;return gt(this,(function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,s.At(t)];case 2:return s.db=l.sent(),e=Jg.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),Xg.reject(t)})).toPromise(),u={},a.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(l.sent(),a),u)];case 4:return c=l.sent(),h="FirebaseError"!==c.name&&o<3,sp("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),s.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),tm=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return im(this.Pt.delete())},t}(),em=function(t){function e(e,n){var r=this;return(r=t.call(this,rp.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return pt(e,t),e}(ip);function nm(t){return"IndexedDbTransactionError"===t.name}var rm=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(sp("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(sp("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),im(n)},t.prototype.add=function(t){return sp("SimpleDb","ADD",this.store.name,t,t),im(this.store.add(t))},t.prototype.get=function(t){var e=this;return im(this.store.get(t)).next((function(n){return void 0===n&&(n=null),sp("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return sp("SimpleDb","DELETE",this.store.name,t),im(this.store.delete(t))},t.prototype.count=function(){return sp("SimpleDb","COUNT",this.store.name),im(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){sp("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Xg((function(n,r){e.onerror=function(t){var e=am(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new Xg((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new tm(i),a=e(i.primaryKey,i.value,o);if(a instanceof Xg){var s=a.catch((function(t){return o.done(),Xg.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return Xg.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function im(t){return new Xg((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=am(t.target.error);n(e)}}))}var om=!1;function am(t){var e=Zg._t(xt());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new ip("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return om||(om=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sm=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return pt(e,t),e}($g);function um(t,e){var n=pp(t);return Zg.It(n.Mt,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cm=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&sv(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&uv(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&uv(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(_p.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Mv())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&mp(this.mutations,t.mutations,(function(t,e){return hv(t,e)}))&&mp(this.baseMutations,t.baseMutations,(function(t,e){return hv(t,e)}))},t}(),hm=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){fp(e.mutations.length===r.length);for(var i=Dv(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),lm=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=_p.min()),void 0===o&&(o=_p.min()),void 0===a&&(a=Np.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),fm=function(t){this.Lt=t};function pm(t,e){if(e.document)return hg(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=qp.fromSegments(e.noDocument.path),r=ym(e.noDocument.readTime),i=rd.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=qp.fromSegments(e.unknownDocument.path);return r=ym(e.unknownDocument.version),rd.newUnknownDocument(o,r)}return lp()}function dm(t,e,n){var r=vm(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:rg(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Xv(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new jg(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=mm(e.version);return a=e.hasCommittedMutations,new jg(null,new Mg(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=mm(e.version);return new jg(new Fg(c,h),null,null,!0,r,i)}return lp()}function vm(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function gm(t){var e=new bp(t[0],t[1]);return _p.fromTimestamp(e)}function mm(t){var e=t.toTimestamp();return new Pg(e.seconds,e.nanoseconds)}function ym(t){var e=new bp(t.seconds,t.nanoseconds);return _p.fromTimestamp(e)}function bm(t,e){for(var n=(e.baseMutations||[]).map((function(e){return fg(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return fg(t.Lt,e)})),s=bp.fromMillis(e.localWriteTimeMs);return new cm(e.batchId,s,n,a)}function _m(t){var e,n,r=ym(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?ym(t.lastLimboFreeSnapshotVersion):_p.min();return void 0!==t.query.documents?(fp(1===(n=t.query).documents.length),e=Od(Cd(ag(n.documents[0])))):e=function(t){return Od(vg(t))}(t.query),new lm(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Np.fromBase64String(t.resumeToken))}function wm(t,e){var n,r=mm(e.snapshotVersion),i=mm(e.lastLimboFreeSnapshotVersion);n=ud(e.target)?pg(t.Lt,e.target):dg(t.Lt,e.target);var o=e.resumeToken.toBase64();return new qg(e.targetId,ad(e.target),r,o,e.sequenceNumber,i,n)}function Im(t){var e=vg({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Dd(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tm=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Em(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:ym(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){var n;return Em(t).put({bundleId:(n=e).id,createTime:mm(tg(n.createTime)),version:n.version})},t.prototype.getNamedQuery=function(t,e){return Sm(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Im(e.bundledQuery),readTime:ym(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Sm(t).put(function(t){return{name:t.name,readTime:mm(tg(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Em(t){return um(t,Wg.store)}function Sm(t){return um(t,zg.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cm=function(){function t(){this.Bt=new km}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Xg.resolve()},t.prototype.getCollectionParents=function(t,e){return Xg.resolve(this.Bt.getEntries(e))},t}(),km=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new kv(Sp.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new kv(Sp.comparator)).toArray()},t}(),Am=function(){function t(){this.qt=new km}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:kg(i)};return Nm(t).put(o)}return Xg.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[yp(e),""],!1,!0);return Nm(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Rg(o.parent))}return n}))},t}();function Nm(t){return um(t,Kg.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Pm=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(t,e,n){var r=t.store(Dg.store),i=t.store(Lg.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){fp(1===s)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=Lg.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Xg.waitFor(o).next((function(){return c}))}function Om(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw lp();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pm.DEFAULT_COLLECTION_PERCENTILE=10,Pm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pm.DEFAULT=new Pm(41943040,Pm.DEFAULT_COLLECTION_PERCENTILE,Pm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pm.DISABLED=new Pm(-1,0,0);var Dm=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return fp(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mm(t).$t({index:Dg.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Fm(t),a=Mm(t);return a.add({}).next((function(s){fp("number"==typeof s);for(var u=new cm(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return lg(t.Lt,e)})),i=n.mutations.map((function(e){return lg(t.Lt,e)}));return new Dg(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new kv((function(t,e){return gp(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=Lg.key(i.userId,d.key.path,s);l=l.add(d.key.path.popLast()),h.push(a.put(c)),h.push(o.put(v,Lg.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),Xg.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Mm(t).get(e).next((function(t){return t?(fp(t.userId===n.userId),bm(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Xg.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Mm(t).$t({index:Dg.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(fp(e.batchId>=r),o=bm(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Mm(t).$t({index:Dg.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Mm(t).Nt(Dg.userMutationsIndex,n).next((function(t){return t.map((function(t){return bm(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Lg.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Fm(t).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],h=Rg(u);if(s===n.userId&&e.path.isEqual(h))return Mm(t).get(c).next((function(t){if(!t)throw lp();fp(t.userId===n.userId),o.push(bm(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new kv(gp),i=[];return e.forEach((function(e){var o=Lg.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Fm(t).$t({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=Rg(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),Xg.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Lg.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new kv(gp);return Fm(t).$t({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],h=Rg(u);a===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Mm(t).get(e).next((function(t){if(null===t)throw lp();fp(t.userId===n.userId),r.push(bm(n.R,t))})))})),Xg.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return xm(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),Xg.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Xg.resolve();var r=IDBKeyRange.lowerBound(Lg.prefixForUser(e.userId)),i=[];return Fm(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Rg(t[1]);i.push(o)}else r.done()})).next((function(){fp(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Lm(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return jm(t).get(this.userId).next((function(t){return t||new Og(e.userId,-1,"")}))},t}();function Lm(t,e,n){var r=Lg.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Fm(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Mm(t){return um(t,Dg.store)}function Fm(t){return um(t,Lg.store)}function jm(t){return um(t,Og.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Um=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),qm=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Um(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return _p.fromTimestamp(new bp(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Vm(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return fp(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Vm(t).$t((function(a,s){var u=_m(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return Xg.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Vm(t).$t((function(t,n){var r=_m(n);e(r)}))},t.prototype.Xt=function(t){return Bm(t).get(Bg.key).next((function(t){return fp(null!==t),t}))},t.prototype.Zt=function(t,e){return Bm(t).put(Bg.key,e)},t.prototype.te=function(t,e){return Vm(t).put(wm(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=ad(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Vm(t).$t({range:r,index:qg.queryTargetsIndexName},(function(t,n,r){var o=_m(n);sd(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Km(t);return e.forEach((function(e){var a=kg(e.path);i.push(o.put(new Vg(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),Xg.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Km(t);return Xg.forEach(e,(function(e){var o=kg(e.path);return Xg.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Km(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Km(t),i=Mv();return r.$t({range:n,kt:!0},(function(t,e,n){var r=Rg(t[1]),o=new qp(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=kg(e.path),r=IDBKeyRange.bound([n],[yp(n)],!1,!0),i=0;return Km(t).$t({index:Vg.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Vm(t).get(e).next((function(t){return t?_m(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t){return um(t,qg.store)}function Bm(t){return um(t,Bg.store)}function Km(t){return um(t,Vg.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t){return vt(this,void 0,void 0,(function(){return gt(this,(function(e){if(t.code!==rp.FAILED_PRECONDITION||t.message!==Qg)throw t;return sp("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=gp(n,i);return 0===a?gp(r,o):a}var zm=function(){function t(t){this.ne=t,this.buffer=new kv(Wm),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Wm(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Gm=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;sp("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return vt(e,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return nm(e=n.sent())?(sp("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Hm(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Qm=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Xg.resolve(np.o);var r=new zm(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(sp("LruGarbageCollector","Garbage collection skipped; disabled"),Xg.resolve(Rm)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(sp("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Rm):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(sp("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),ap()<=ge.DEBUG&&sp("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-h)+"ms"),Xg.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),$m=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Qm(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Ym(t,n)},t.prototype.removeReference=function(t,e,n){return Ym(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Ym(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return jm(t).Ot((function(r){return Lm(t,r,e).next((function(t){return t&&(n=!0),Xg.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),Km(t).delete([0,kg(a.path)])}))}));i.push(u)}})).next((function(){return Xg.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Ym(t,e)},t.prototype.we=function(t,e){var n,r=Km(t),i=np.o;return r.$t({index:Vg.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var a=r.path,s=r.sequenceNumber;0===o?(i!==np.o&&e(new qp(Rg(n)),i),i=s,n=a):i=np.o})).next((function(){i!==np.o&&e(new qp(Rg(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Ym(t,e){return Km(t).put(function(t,e){return new Vg(0,kg(t.path),e)}(e,t.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xm=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Ip(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return Tp(this.inner)},t}(),Jm=function(){function t(){this.changes=new Xm((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:_p.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:rd.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Xg.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Zm=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return ny(t).put(ry(e),n)},t.prototype.removeEntry=function(t,e){var n=ny(t),r=ry(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return ny(t).get(ry(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return ny(t).get(ry(e)).next((function(t){return{document:n.ye(e,t),size:Om(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Rv();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Rv(),i=new Ev(qp.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Om(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Xg.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return ny(t).$t({range:r},(function(t,e,r){for(var a=qp.fromSegments(t);o&&qp.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Rv(),o=e.path.length+1,a={};if(n.isEqual(_p.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=vm(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=jg.collectionReadTimeIndex}return ny(t).$t(a,(function(t,n,a){if(t.length===o){var s=pm(r.R,n);e.path.isPrefixOf(s.key.path)?jd(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new ty(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return ey(t).get(Ug.key).next((function(t){return fp(!!t),t}))},t.prototype.me=function(t,e){return ey(t).put(Ug.key,e)},t.prototype.ye=function(t,e){if(e){var n=pm(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(_p.min()))return n}return rd.newInvalidDocument(t)},t}(),ty=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Xm((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return pt(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new kv((function(t,e){return gp(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=dm(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Om(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var h=dm(e.Ie.R,rd.newNoDocument(o,_p.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),Xg.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(Jm);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t){return um(t,Ug.store)}function ny(t){return um(t,jg.store)}function ry(t){return t.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iy=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;fp(n<r&&n>=0&&r<=11);var o=new Jg("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(xg.store)}(t),function(t){t.createObjectStore(Og.store,{keyPath:Og.keyPath}),t.createObjectStore(Dg.store,{keyPath:Dg.keyPath,autoIncrement:!0}).createIndex(Dg.userMutationsIndex,Dg.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Lg.store)}(t),oy(t),function(t){t.createObjectStore(jg.store)}(t));var a=Xg.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Vg.store),t.deleteObjectStore(qg.store),t.deleteObjectStore(Bg.store)}(t),oy(t)),a=a.next((function(){return function(t){var e=t.store(Bg.store),n=new Bg(0,0,_p.min().toTimestamp(),0);return e.put(Bg.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(Dg.store).Nt().next((function(n){t.deleteObjectStore(Dg.store),t.createObjectStore(Dg.store,{keyPath:Dg.keyPath,autoIncrement:!0}).createIndex(Dg.userMutationsIndex,Dg.userMutationsKeyPath,{unique:!0});var r=e.store(Dg.store),i=n.map((function(t){return r.put(t)}));return Xg.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(Hg.store,{keyPath:Hg.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(Ug.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(jg.store);e.createIndex(jg.readTimeIndex,jg.readTimeIndexPath,{unique:!1}),e.createIndex(jg.collectionReadTimeIndex,jg.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(Wg.store,{keyPath:Wg.keyPath})}(t),function(t){t.createObjectStore(zg.store,{keyPath:zg.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(jg.store).$t((function(t,n){e+=Om(n)})).next((function(){var n=new Ug(e);return t.store(Ug.store).put(Ug.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Og.store),r=t.store(Dg.store);return n.Nt().next((function(n){return Xg.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Dg.userMutationsIndex,i).next((function(r){return Xg.forEach(r,(function(r){fp(r.userId===n.userId);var i=bm(e.R,r);return xm(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Vg.store),n=t.store(jg.store);return t.store(Bg.store).get(Bg.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new Sp(n),a=function(t){return[0,kg(t)]}(o);r.push(e.get(a).next((function(n){return n?Xg.resolve():function(n){return e.put(new Vg(0,kg(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Xg.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(Kg.store,{keyPath:Kg.keyPath});var n=e.store(Kg.store),r=new km,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:kg(i)})}};return e.store(jg.store).$t({kt:!0},(function(t,e){var n=new Sp(t);return i(n.popLast())})).next((function(){return e.store(Lg.store).$t({kt:!0},(function(t,e){t[0];var n=t[1];t[2];var r=Rg(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(qg.store);return n.$t((function(t,r){var i=_m(r),o=wm(e.R,i);return n.put(o)}))},t}();function oy(t){t.createObjectStore(Vg.store,{keyPath:Vg.keyPath}).createIndex(Vg.documentTargetsIndex,Vg.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(qg.store,{keyPath:qg.keyPath}).createIndex(qg.queryTargetsIndexName,qg.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Bg.store)}var ay="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sy=function(){function t(e,n,r,i,o,a,s,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new ip(rp.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $m(this,i),this.Le=n+"main",this.R=new fm(u),this.Be=new Zg(this.Le,11,new iy(this.R)),this.qe=new qm(this.referenceDelegate,this.R),this.Ut=new Am,this.Ue=function(t,e){return new Zm(t,e)}(this.R,this.Ut),this.Ke=new Tm,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===h&&up("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new ip(rp.FAILED_PRECONDITION,ay);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new np(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return vt(e,void 0,void 0,(function(){return gt(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return vt(e,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return vt(e,void 0,void 0,(function(){return gt(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return cy(e).put(new Hg(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(nm(e))return sp("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return sp("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return uy(t).get(xg.key).next((function(t){return Xg.resolve(e.tn(t))}))},t.prototype.en=function(t){return cy(t).delete(this.clientId)},t.prototype.nn=function(){return vt(this,void 0,void 0,(function(){var t,e,n,r,i=this;return gt(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=um(t,Hg.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Xg.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Xg.resolve(!0):uy(t).get(xg.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new ip(rp.FAILED_PRECONDITION,ay);return!1}}return!(!e.networkEnabled||!e.inForeground)||cy(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&sp("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return vt(this,void 0,void 0,(function(){var t=this;return gt(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[xg.store,Hg.store],(function(e){var n=new sm(e,np.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return cy(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Dm.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;sp("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Gg,(function(o){return i=new sm(o,r.Ne?r.Ne.next():np.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw up("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new ip(rp.FAILED_PRECONDITION,Qg);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return uy(t).get(xg.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new ip(rp.FAILED_PRECONDITION,ay)}))},t.prototype.Ze=function(t){var e=new xg(this.clientId,this.allowTabSynchronization,Date.now());return uy(t).put(xg.key,e)},t.yt=function(){return Zg.yt()},t.prototype.Xe=function(t){var e=this,n=uy(t);return n.get(xg.key).next((function(t){return e.tn(t)?(sp("IndexedDbPersistence","Releasing primary lease."),n.delete(xg.key)):Xg.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(up("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return sp("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return up("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){up("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function uy(t){return um(t,xg.store)}function cy(t){return um(t,Hg.store)}function hy(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var ly=function(t,e){this.progress=t,this.wn=e},fy=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return qp.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Pd(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new qp(e)).next((function(t){var e=xv();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=xv();return this.Ut.getCollectionParents(t,i).next((function(a){return Xg.forEach(a,(function(a){var s=function(t,e){return new Ed(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,h=r.get(c);null==h&&(h=rd.newInvalidDocument(c),r=r.insert(c,h)),uv(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){jd(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Mv(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof pv&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),py=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Mv(),i=Mv(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),dy=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(_p.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(kd(e)||Ad(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(ap()<=ge.DEBUG&&sp("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Fd(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new kv(Ud(t));return e.forEach((function(e,r){jd(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return ap()<=ge.DEBUG&&sp("QueryEngine","Using full collection scan to execute query:",Fd(e)),this.Sn.getDocumentsMatchingQuery(t,e,_p.min())},t}(),vy=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Ev(gp),this.kn=new Xm((function(t){return ad(t)}),sd),this.$n=_p.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new fy(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(t,e,n,r){return new vy(t,e,n,r)}function my(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o;return gt(this,(function(a){switch(a.label){case 0:return n=pp(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new fy(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=Mv(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,m=v.mutations;g<m.length;g++){var y=m[g];a=a.add(y.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function yy(t,e){var n=pp(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=Xg.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);fp(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function by(t){var e=pp(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function _y(t,e){var n=pp(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return fp(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=Rv();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(wy(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(_p.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return Xg.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.Fn=i,t}))}function wy(t,e,n,r,i){var o=Mv();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Rv();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(_p.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):sp("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Iy(t,e){var n=pp(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Ty(t,e){var n=pp(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,Xg.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new lm(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function Ey(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o,a;return gt(this,(function(s){switch(s.label){case 0:r=pp(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!nm(a=s.sent()))throw a;return sp("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function Sy(t,e,n){var r=pp(t),i=_p.min(),o=Mv();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=pp(t),i=r.kn.get(n);return void 0!==i?Xg.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Od(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:_p.min(),n?o:Mv())})).next((function(t){return{documents:t,Bn:o}}))}))}function Cy(t,e){var n=pp(t),r=pp(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function ky(t){var e=pp(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=pp(t),i=Rv(),o=vm(n),a=ny(e),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:jg.readTimeIndex,range:s},(function(t,e){var n=pm(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:gm(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Ay(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){return[2,(e=pp(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=ny(t),n=_p.min();return e.$t({index:jg.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=gm(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function Ny(t,e,n,r){return vt(this,void 0,void 0,(function(){var i,o,a,s,u,c,h,l,f,p;return gt(this,(function(d){switch(d.label){case 0:for(i=pp(t),o=Mv(),a=Rv(),s=Dv(),u=0,c=n;u<c.length;u++)h=c[u],l=e.qn(h.metadata.name),h.document&&(o=o.add(l)),a=a.insert(l,e.Un(h)),s=s.insert(l,e.Kn(h.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,Ty(i,function(t){return Od(Cd(Sp.fromString("__bundle__/docs/"+t)))}(r))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return wy(t,f,a,_p.min(),s).next((function(e){return f.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,p.targetId).next((function(){return i.qe.addMatchingKeys(t,o,p.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function Ry(t,e,n){return void 0===n&&(n=Mv()),vt(this,void 0,void 0,(function(){var r,i;return gt(this,(function(o){switch(o.label){case 0:return[4,Ty(t,Od(Im(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=pp(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=tg(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var a=r.withResumeToken(Np.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Py=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Xg.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:tg(n.createTime)}),Xg.resolve()},t.prototype.getNamedQuery=function(t,e){return Xg.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Im(t.bundledQuery),readTime:tg(t.readTime)}}(e)),Xg.resolve()},t}(),xy=function(){function t(){this.Wn=new kv(Oy.Gn),this.zn=new kv(Oy.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Oy(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Oy(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new qp(new Sp([])),r=new Oy(n,t),i=new Oy(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new qp(new Sp([])),n=new Oy(e,t),r=new Oy(e,t+1),i=Mv();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Oy(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Oy=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return qp.comparator(t.key,e.key)||gp(t.ns,e.ns)},t.Hn=function(t,e){return gp(t.ns,e.ns)||qp.comparator(t.key,e.key)},t}(),Dy=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new kv(Oy.Gn)}return t.prototype.checkEmpty=function(t){return Xg.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new cm(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new Oy(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Xg.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Xg.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return Xg.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Xg.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Xg.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Oy(e,0),i=new Oy(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),Xg.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new kv(gp);return e.forEach((function(t){var e=new Oy(t,0),i=new Oy(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),Xg.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;qp.isDocumentKey(i)||(i=i.child(""));var o=new Oy(new qp(i),0),a=new kv(gp);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),Xg.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;fp(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Xg.forEach(e.mutations,(function(i){var o=new Oy(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Oy(e,0),r=this.rs.firstAfterOrEqual(n);return Xg.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,Xg.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Ly=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Ev(qp.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Xg.resolve(n?n.document.clone():rd.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Rv();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():rd.newInvalidDocument(t))})),Xg.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Rv(),i=new qp(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(s.path))break;h.compareTo(n)<=0||jd(e,c)&&(r=r.insert(c.key,c.clone()))}return Xg.resolve(r)},t.prototype.fs=function(t,e){return Xg.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new My(this)},t.prototype.getSize=function(t){return Xg.resolve(this.size)},t}(),My=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return pt(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),Xg.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Jm),Fy=function(){function t(t){this.persistence=t,this.ds=new Xm((function(t){return ad(t)}),sd),this.lastRemoteSnapshotVersion=_p.min(),this.highestTargetId=0,this.ws=0,this._s=new xy,this.targetCount=0,this.ys=Um.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),Xg.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Xg.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Xg.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Xg.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Xg.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Um(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Xg.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Xg.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Xg.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),Xg.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return Xg.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Xg.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Xg.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),Xg.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Xg.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Xg.resolve(n)},t.prototype.containsKey=function(t,e){return Xg.resolve(this._s.containsKey(e))},t}(),jy=function(){function t(t,e){var n=this;this.gs={},this.Ne=new np(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Fy(this),this.Ut=new Cm,this.Ue=function(t,e){return new Ly(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new fm(e),this.Ke=new Py(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Dy(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;sp("MemoryPersistence","Starting transaction:",t);var i=new Uy(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return Xg.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Uy=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return pt(e,t),e}($g),qy=function(){function t(t){this.persistence=t,this.As=new xy,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw lp()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Xg.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Xg.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Xg.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xg.forEach(this.vs,(function(r){var i=qp.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Xg.or([function(){return Xg.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Vy=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(t,e){return"firestore_clients_"+t+"_"+e}function Ky(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Hy(t,e){return"firestore_targets_"+t+"_"+e}Vy.UNAUTHENTICATED=new Vy(null),Vy.GOOGLE_CREDENTIALS=new Vy("google-credentials-uid"),Vy.FIRST_PARTY=new Vy("first-party-uid");var Wy=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new ip(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(up("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),zy=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ip(i.error.code,i.error.message)),o?new t(e,i.state,r):(up("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Gy=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=jv(),a=0;i&&a<r.activeTargetIds.length;++a)i=Up(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(up("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Qy=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(up("SharedClientState","Failed to parse online state: "+e),null)},t}(),$y=function(){function t(){this.activeTargetIds=jv()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Yy=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Ev(gp),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=By(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new $y),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return vt(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,h,l=this;return gt(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(By(this.persistenceKey,r)))&&(o=Gy.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.$s;u<c.length;u++)h=c[u],this.Fs(h);return this.$s=[],this.window.addEventListener("pagehide",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Hy(this.persistenceKey,t));if(n){var r=zy.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Hy(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return sp("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){sp("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){sp("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(sp("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void up("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return vt(e,void 0,void 0,(function(){var t,e,r,i,o,a;return gt(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(t){var e=np.o;if(null!=t)try{var n=JSON.parse(t);fp("number"==typeof n),e=n}catch(t){up("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==np.o&&this.sequenceNumberHandler(a);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Wy(this.currentUser,t,e,n),i=Ky(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Ky(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=Hy(this.persistenceKey,t),i=new zy(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Gy.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Wy.Vs(new Vy(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return zy.Vs(r,e)},t.prototype.js=function(t){return Qy.Vs(t)},t.prototype.ii=function(t){return vt(this,void 0,void 0,(function(){return gt(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(sp("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=jv();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),Xy=function(){function t(){this.li=new $y,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new $y,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Jy=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Zy=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){sp("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){sp("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),tb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},eb=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),nb=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return pt(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var a=new ep;a.listenOnce(Yf.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case $f.NO_ERROR:var e=a.getResponseJson();sp("Connection","XHR received:",JSON.stringify(e)),i(e);break;case $f.TIMEOUT:sp("Connection",'RPC "'+t+'" timed out'),o(new ip(rp.DEADLINE_EXCEEDED,"Request time out"));break;case $f.HTTP_ERROR:var n=a.getStatus();if(sp("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(rp).indexOf(e)>=0?e:rp.UNKNOWN}(r.status);o(new ip(s,r.message))}else o(new ip(rp.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ip(rp.UNAVAILABLE,"Connection failed."));break;default:lp()}}finally{sp("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.Oi=function(t,e){var n,r=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=Gf(),o=Qf(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Zf({})),this.Fi(a.initMessageHeaders,e),Ot()||Mt()||xt().indexOf("Electron/")>=0||((n=xt()).indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0)||xt().indexOf("MSAppHost/")>=0||Lt()||(a.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");sp("Connection","Creating WebChannel: "+s,a);var u=i.createWebChannel(s,a),c=!1,h=!1,l=new eb({Ei:function(t){h?sp("Connection","Not sending because WebChannel is closed:",t):(c||(sp("Connection","Opening WebChannel transport."),u.open(),c=!0),sp("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,tp.EventType.OPEN,(function(){h||sp("Connection","WebChannel transport opened.")})),f(u,tp.EventType.CLOSE,(function(){h||(h=!0,sp("Connection","WebChannel transport closed"),l.Vi())})),f(u,tp.EventType.ERROR,(function(t){h||(h=!0,cp("Connection","WebChannel transport errored:",t),l.Vi(new ip(rp.UNAVAILABLE,"The operation could not be completed")))})),f(u,tp.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];fp(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){sp("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=mv[t];if(void 0!==e)return Tv(e)}(o),s=i.message;void 0===a&&(a=rp.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),h=!0,l.Vi(new ip(a,s)),u.close()}else sp("Connection","WebChannel received:",n),l.Si(n)}})),f(o,Xf.STAT_EVENT,(function(t){t.stat===Jf.PROXY?sp("Connection","Detected buffering proxy"):t.stat===Jf.NOPROXY&&sp("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);sp("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return sp("RestConnection","Received: ",t),t}),(function(e){throw cp("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.7.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=tb[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(){return"undefined"!=typeof window?window:null}function ib(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(t){return new Yv(t,!0)}var ab=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&sp("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),sb=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new ab(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return vt(this,void 0,void 0,(function(){return gt(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===rp.RESOURCE_EXHAUSTED?(up(e.toString()),up("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===rp.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new ip(rp.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return vt(t,void 0,void 0,(function(){return gt(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return sp("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(sp("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),ub=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return pt(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:lp()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(fp(void 0===e||"string"==typeof e),Np.fromBase64String(e||"")):(fp(void 0===e||e instanceof Uint8Array),Np.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?rp.UNKNOWN:Tv(t.code);return new ip(e,t.message||"")}(s);n=new Kv(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=ig(t,r.document.name),o=tg(r.document.updateTime);var s=new ed({mapValue:{fields:r.document.fields}}),u=(a=rd.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new Vv(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=ig(t,r.document),o=r.readTime?tg(r.readTime):_p.min(),s=rd.newNoDocument(i,o),a=r.removedTargetIds||[],n=new Vv([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=ig(t,r.document),o=r.removedTargetIds||[],n=new Vv([],o,i,null);else{if(!("filter"in e))return lp();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new wv(r),o=h.targetId,n=new Bv(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return _p.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?_p.min():e.readTime?tg(e.readTime):_p.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=sg(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=ud(r)?{documents:pg(t,r)}:{query:dg(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Jv(t,e.resumeToken):e.snapshotVersion.compareTo(_p.min())>0&&(n.readTime=Xv(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lp()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=sg(this.R),e.removeTarget=t,this.cr(e)},e}(sb),cb=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return pt(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(fp(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(fp(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?tg(t.updateTime):tg(e);return n.isEqual(_p.min())&&(n=tg(e)),new rv(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=tg(t.commitTime);return this.listener.Tr(n,e)}return fp(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=sg(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return lg(e.R,t)}))};this.cr(n)},e}(sb),hb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return pt(e,t),e.prototype.br=function(){if(this.Rr)throw new ip(rp.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===rp.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new ip(rp.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===rp.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new ip(rp.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),lb=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(up(e),this.Vr=!1):sp("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),fb=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return vt(o,void 0,void 0,(function(){return gt(this,(function(t){switch(t.label){case 0:return wb(this)?(sp("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return(e=pp(t)).Or.add(4),[4,db(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,pb(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new lb(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(t){return vt(this,void 0,void 0,(function(){var e,n;return gt(this,(function(r){switch(r.label){case 0:if(!wb(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function db(t){return vt(this,void 0,void 0,(function(){var e,n;return gt(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function vb(t,e){var n=pp(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),_b(n)?bb(n):Mb(n).er()&&mb(n,e))}function gb(t,e){var n=pp(t),r=Mb(n);n.$r.delete(e),r.er()&&yb(n,e),0===n.$r.size&&(r.er()?r.ir():wb(n)&&n.Br.set("Unknown"))}function mb(t,e){t.qr.U(e.targetId),Mb(t).mr(e)}function yb(t,e){t.qr.U(e),Mb(t).yr(e)}function bb(t){t.qr=new Wv({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Mb(t).start(),t.Br.Sr()}function _b(t){return wb(t)&&!Mb(t).tr()&&t.$r.size>0}function wb(t){return 0===pp(t).Or.size}function Ib(t){t.qr=void 0}function Tb(t){return vt(this,void 0,void 0,(function(){return gt(this,(function(e){return t.$r.forEach((function(e,n){mb(t,e)})),[2]}))}))}function Eb(t,e){return vt(this,void 0,void 0,(function(){return gt(this,(function(n){return Ib(t),_b(t)?(t.Br.Nr(e),bb(t)):t.Br.set("Unknown"),[2]}))}))}function Sb(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o;return gt(this,(function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof Kv&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o;return gt(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.$r.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),sp("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Cb(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Vv?t.qr.X(e):e instanceof Bv?t.qr.rt(e):t.qr.et(e),n.isEqual(_p.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,by(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Np.EMPTY_BYTE_STRING,n.snapshotVersion)),yb(t,e);var r=new lm(n.target,e,1,n.sequenceNumber);mb(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return sp("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,Cb(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function Cb(t,e,n){return vt(this,void 0,void 0,(function(){var r=this;return gt(this,(function(i){switch(i.label){case 0:if(!nm(e))throw e;return t.Or.add(1),[4,db(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return by(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return vt(r,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return sp("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,pb(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function kb(t,e){return e().catch((function(n){return Cb(t,n,e)}))}function Ab(t){return vt(this,void 0,void 0,(function(){var e,n,r,i,o;return gt(this,(function(a){switch(a.label){case 0:e=pp(t),n=Fb(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return wb(t)&&t.kr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,Iy(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Fb(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,Cb(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return Nb(e)&&Rb(e),[2]}}))}))}function Nb(t){return wb(t)&&!Fb(t).tr()&&t.kr.length>0}function Rb(t){Fb(t).start()}function Pb(t){return vt(this,void 0,void 0,(function(){return gt(this,(function(e){return Fb(t).Ar(),[2]}))}))}function xb(t){return vt(this,void 0,void 0,(function(){var e,n,r,i;return gt(this,(function(o){for(e=Fb(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function Ob(t,e,n){return vt(this,void 0,void 0,(function(){var r,i;return gt(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=hm.from(r,e,n),[4,kb(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Ab(t)];case 2:return o.sent(),[2]}}))}))}function Db(t,e){return vt(this,void 0,void 0,(function(){return gt(this,(function(n){switch(n.label){case 0:return e&&Fb(t).pr?[4,function(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:return Iv(r=e.code)&&r!==rp.ABORTED?(n=t.kr.shift(),Fb(t).sr(),[4,kb(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Ab(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Nb(t)&&Rb(t),[2]}}))}))}function Lb(t,e){return vt(this,void 0,void 0,(function(){var n;return gt(this,(function(r){switch(r.label){case 0:return n=pp(t),e?(n.Or.delete(2),[4,pb(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,db(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Mb(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=pp(t);return r.br(),new ub(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Tb.bind(null,t),Ri:Eb.bind(null,t),_r:Sb.bind(null,t)}),t.Mr.push((function(n){return vt(e,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),_b(t)?bb(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Ib(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function Fb(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=pp(t);return r.br(),new cb(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Pb.bind(null,t),Ri:Db.bind(null,t),Ir:xb.bind(null,t),Tr:Ob.bind(null,t)}),t.Mr.push((function(n){return vt(e,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,Ab(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(sp("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr}var jb=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Yg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ip(rp.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Ub(t,e){if(up("AsyncQueue",e+": "+t),nm(t))return new ip(rp.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qb=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||qp.comparator(e.key,n.key)}:function(t,e){return qp.comparator(t.key,e.key)},this.keyedMap=xv(),this.sortedSet=new Ev(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Vb=function(){function t(){this.Qr=new Ev(qp.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):lp():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Bb=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,qb.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ld(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Kb=function(){this.Wr=void 0,this.listeners=[]},Hb=function(){this.queries=new Xm((function(t){return Md(t)}),Ld),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return gt(this,(function(c){switch(c.label){case 0:if(n=pp(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Kb),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=c.sent(),[3,4];case 3:return s=c.sent(),u=Ub(s,"Initialization of query '"+Fd(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&$b(n),[2]}}))}))}function zb(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a;return gt(this,(function(s){return n=pp(t),r=e.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Gb(t,e){for(var n=pp(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(a)&&(r=!0);u.Wr=a}}r&&$b(n)}function Qb(t,e,n){var r=pp(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function $b(t){t.Gr.forEach((function(t){t.next()}))}var Yb=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Bb(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Bb.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Xb=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Jb=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return ig(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?hg(this.R,t.document,!1):rd.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return tg(t)},t}(),Zb=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=t_(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Jb(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],h=(e.get(c)||Mv()).add(a);e.set(c,h)}}return e},t.prototype.complete=function(){return vt(this,void 0,void 0,(function(){var t,e,n,r,i;return gt(this,(function(o){switch(o.label){case 0:return[4,Ny(this.localStore,new Jb(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,Ry(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new ly(Object.assign({},this.progress),t))]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e_=function(t){this.key=t},n_=function(t){this.key=t},r_=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Mv(),this.mutatedKeys=Mv(),this.lo=Ud(t),this.fo=new qb(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Vb,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=kd(this.query)&&i.size===this.query.limit?i.last():null,c=Ad(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=jd(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),p=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data.isEqual(l.data)?f!==p&&(r.track({type:3,doc:l}),d=!0):n.yo(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(s=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(s=!0)),d&&(l?(a=a.add(l),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),kd(this.query)||Ad(this.query))for(;a.size>this.query.limit;){var h=kd(this.query)?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lp()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new Bb(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Vb,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Mv(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new n_(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new e_(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Mv();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Bb.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),i_=function(t,e,n){this.query=t,this.targetId=e,this.view=n},o_=function(t){this.key=t,this.bo=!1},a_=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Xm((function(t){return Md(t)}),Ld),this.Vo=new Map,this.So=new Set,this.Do=new Ev(qp.comparator),this.Co=new Map,this.No=new xy,this.xo={},this.Fo=new Map,this.ko=Um.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function s_(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a,s;return gt(this,(function(u){switch(u.label){case 0:return n=M_(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Ty(n.localStore,Od(e))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,u_(n,e,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&vb(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function u_(t,e,n,r){return vt(this,void 0,void 0,(function(){var i,o,a,s,u,c;return gt(this,(function(h){switch(h.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return vt(this,void 0,void 0,(function(){var i,o,a;return gt(this,(function(s){switch(s.label){case 0:return(i=e.view._o(n)).Nn?[4,Sy(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(w_(t,e.targetId,a.To),a.snapshot)]}}))}))}(t,e,n,r)},[4,Sy(t.localStore,e,!0)];case 1:return i=h.sent(),o=new r_(e,i.Bn),a=o._o(i.documents),s=qv.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(a,t.isPrimaryClient,s),w_(t,n,u.To),c=new i_(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function c_(t,e){return vt(this,void 0,void 0,(function(){var n,r,i;return gt(this,(function(o){switch(o.label){case 0:return n=pp(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Ld(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Ey(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),gb(n.remoteStore,r.targetId),b_(n,r.targetId)})).catch(Hm)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return b_(n,r.targetId),[4,Ey(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function h_(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o,a;return gt(this,(function(s){switch(s.label){case 0:r=F_(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=pp(t),i=bp.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Mv());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],h=cv(c,n.get(c.key));null!=h&&a.push(new pv(c.key,h,nd(h.value.mapValue),iv.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Ev(gp)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,E_(r,i.changes)];case 3:return s.sent(),[4,Ab(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=Ub(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function l_(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:n=pp(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,_y(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(fp(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?fp(r.bo):t.removedDocuments.size>0&&(fp(r.bo),r.bo=!1))})),[4,E_(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Hm(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function f_(t,e,n){var r=pp(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=pp(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&$b(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function p_(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o,a,s,u;return gt(this,(function(c){switch(c.label){case 0:return(r=pp(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(a=(a=new Ev(qp.comparator)).insert(o,rd.newNoDocument(o,_p.min())),s=Mv().add(o),u=new Uv(_p.min(),new Map,new kv(gp),a,s),[4,l_(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),T_(r),[3,4];case 2:return[4,Ey(r.localStore,e,!1).then((function(){return b_(r,e,n)})).catch(Hm)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function d_(t,e){return vt(this,void 0,void 0,(function(){var n,r,i;return gt(this,(function(o){switch(o.label){case 0:n=pp(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,yy(n.localStore,e)];case 2:return i=o.sent(),y_(n,r,null),m_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,E_(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Hm(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function v_(t,e,n){return vt(this,void 0,void 0,(function(){var r,i;return gt(this,(function(o){switch(o.label){case 0:r=pp(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=pp(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return fp(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),y_(r,e,n),m_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,E_(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Hm(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function g_(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a;return gt(this,(function(s){switch(s.label){case 0:wb((n=pp(t)).remoteStore)||sp("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=pp(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=s.sent(),a=Ub(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function m_(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function y_(t,e,n){var r=pp(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function b_(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||__(t,e)}))}function __(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(gb(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),T_(t))}function w_(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof e_?(t.No.addReference(o.key,e),I_(t,o)):o instanceof n_?(sp("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||__(t,o.key)):lp()}}function I_(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(sp("SyncEngine","New document in limbo: "+n),t.So.add(r),T_(t))}function T_(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new qp(Sp.fromString(e)),r=t.ko.next();t.Co.set(r,new o_(n)),t.Do=t.Do.insert(n,r),vb(t.remoteStore,new lm(Od(Cd(n.path)),r,2,np.o))}}function E_(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o,a;return gt(this,(function(s){switch(s.label){case 0:return r=pp(t),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,s){a.push(r.Oo(s,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=py.Pn(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,h;return gt(this,(function(l){switch(l.label){case 0:n=pp(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Xg.forEach(e,(function(e){return Xg.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return Xg.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!nm(r=l.sent()))throw r;return sp("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.Fn.get(s),c=u.snapshotVersion,h=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(s,h));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function S_(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:return(n=pp(t)).currentUser.isEqual(e)?[3,3]:(sp("SyncEngine","User change. New user:",e.toKey()),[4,my(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new ip(rp.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,E_(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function C_(t,e){var n=pp(t),r=n.Co.get(e);if(r&&r.bo)return Mv().add(r.key);var i=Mv(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function k_(t,e){return vt(this,void 0,void 0,(function(){var n,r,i;return gt(this,(function(o){switch(o.label){case 0:return[4,Sy((n=pp(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&w_(n,e.targetId,i.To),i)]}}))}))}function A_(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){return[2,ky((e=pp(t)).localStore).then((function(t){return E_(e,t)}))]}))}))}function N_(t,e,n,r){return vt(this,void 0,void 0,(function(){var i,o;return gt(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=pp(t),r=pp(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):Xg.resolve(null)}))}))}((i=pp(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,Ab(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(y_(i,e,r||null),m_(i,e),function(t,e){pp(pp(t)._n).Gt(e)}(i.localStore,e)):lp(),a.label=4;case 4:return[4,E_(i,o)];case 5:return a.sent(),[3,7];case 6:sp("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function R_(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return gt(this,(function(h){switch(h.label){case 0:return M_(n=pp(t)),F_(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,P_(n,r.toArray())]);case 1:return i=h.sent(),n.$o=!0,[4,Lb(n.remoteStore,!0)];case 2:for(h.sent(),o=0,a=i;o<a.length;o++)s=a[o],vb(n.remoteStore,s);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return b_(n,e),Ey(n.localStore,e,!0)})),gb(n.remoteStore,e)})),[4,c]);case 4:return h.sent(),[4,P_(n,u)];case 5:return h.sent(),function(t){var e=pp(t);e.Co.forEach((function(t,n){gb(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Ev(qp.comparator)}(n),n.$o=!1,[4,Lb(n.remoteStore,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function P_(t,e,n){return vt(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,h,l,f,p,d,v;return gt(this,(function(g){switch(g.label){case 0:n=pp(t),r=[],i=[],o=0,a=e,g.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Vo.get(s))&&0!==c.length?[4,Ty(n.localStore,Od(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),h=0,l=c,g.label=3;case 3:return h<l.length?(f=l[h],p=n.Po.get(f),[4,k_(n,p)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Cy(n.localStore,s)];case 8:return v=g.sent(),[4,Ty(n.localStore,v)];case 9:return u=g.sent(),[4,u_(n,x_(v),s,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function x_(t){return Sd(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function O_(t){var e=pp(t);return pp(pp(e.localStore).persistence).fn()}function D_(t,e,n,r){return vt(this,void 0,void 0,(function(){var i,o,a;return gt(this,(function(s){switch(s.label){case 0:return(i=pp(t)).$o?(sp("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ky(i.localStore)];case 3:return o=s.sent(),a=Uv.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,E_(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,Ey(i.localStore,e,!0)];case 6:return s.sent(),b_(i,e,r),[3,8];case 7:lp(),s.label=8;case 8:return[2]}}))}))}function L_(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,h,l,f;return gt(this,(function(p){switch(p.label){case 0:if(!(r=M_(t)).$o)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(sp("SyncEngine","Adding an already active target "+a),[3,5]):[4,Cy(r.localStore,a)]):[3,6];case 2:return s=p.sent(),[4,Ty(r.localStore,s)];case 3:return u=p.sent(),[4,u_(r,x_(s),u.targetId,!1)];case 4:p.sent(),vb(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return gt(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Ey(r.localStore,t,!1).then((function(){gb(r.remoteStore,t),b_(r,t)})).catch(Hm)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=n,p.label=7;case 7:return h<l.length?(f=l[h],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function M_(t){var e=pp(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=l_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=C_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=p_.bind(null,e),e.vo._r=Gb.bind(null,e.eventManager),e.vo.Mo=Qb.bind(null,e.eventManager),e}function F_(t){var e=pp(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=d_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v_.bind(null,e),e}function j_(t,e,n){var r=pp(t);(function(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o,a,s,u;return gt(this,(function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,function(t,e){var n=pp(t),r=tg(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return n.Ke.getBundleMetadata(t,e.id)})).then((function(t){return!!t&&t.createTime.compareTo(r)>=0}))}(t.localStore,r)];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n._updateProgress(t_(r)),i=new Zb(r,t.localStore,e.R),[4,e.Lo()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(a=c.sent())&&n._updateProgress(a),[4,e.Lo()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return s=c.sent(),[4,E_(t,s.wn,void 0)];case 12:return c.sent(),[4,function(t,e){var n=pp(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.Ke.saveBundleMetadata(t,e)}))}(t.localStore,r)];case 13:return c.sent(),n._completeWith(s.progress),[3,15];case 14:return cp("SyncEngine","Loading bundle failed with "+(u=c.sent())),n._failWith(u),[3,15];case 15:return[2]}}))}))})(r,e,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var U_=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return vt(this,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return this.R=ob(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return gy(this.persistence,new dy,t.initialUser,this.R)},t.prototype.qo=function(t){return new jy(qy.bs,this.R)},t.prototype.Bo=function(t){return new Xy},t.prototype.terminate=function(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),q_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return pt(e,t),e.prototype.initialize=function(e){return vt(this,void 0,void 0,(function(){return gt(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Ay(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,F_(this.Qo.syncEngine)];case 4:return n.sent(),[4,Ab(this.Qo.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ko=function(t){return gy(this.persistence,new dy,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Gm(e,t.asyncQueue)},e.prototype.qo=function(t){var e=hy(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Pm.withCacheSize(this.cacheSizeBytes):Pm.DEFAULT;return new sy(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,rb(),ib(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Xy},e}(U_),V_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return pt(e,t),e.prototype.initialize=function(e){return vt(this,void 0,void 0,(function(){var n,r=this;return gt(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Yy?(this.sharedClientState.syncEngine={ui:N_.bind(null,n),ai:D_.bind(null,n),hi:L_.bind(null,n),fn:O_.bind(null,n),ci:A_.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return vt(r,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return[4,R_(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=rb();if(!Yy.yt(e))throw new ip(rp.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=hy(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Yy(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(q_),B_=function(){function t(){}return t.prototype.initialize=function(t,e){return vt(this,void 0,void 0,(function(){var n=this;return gt(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return f_(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=S_.bind(null,this.syncEngine),[4,Lb(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Hb},t.prototype.createDatastore=function(t){var e,n=ob(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new nb(e));return function(t,e,n){return new hb(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return f_(a.syncEngine,t,0)},o=Zy.yt()?new Zy:new Jy,new fb(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new a_(t,e,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return e=pp(t),sp("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,db(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return vt(this,void 0,void 0,(function(){var r;return gt(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var H_=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),W_=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Yg,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return vt(this,void 0,void 0,(function(){var t,e,n,r;return gt(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Xb(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return vt(this,void 0,void 0,(function(){var t,e;return gt(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return vt(this,void 0,void 0,(function(){var t,e;return gt(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),z_=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return vt(this,void 0,void 0,(function(){var e,n=this;return gt(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new ip(rp.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a,s;return gt(this,(function(u){switch(u.label){case 0:return n=pp(t),r=sg(n.R)+"/documents",i={documents:e.map((function(t){return rg(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){fp(!!e.found),e.found.name,e.found.updateTime;var n=ig(t,e.found.name),r=tg(e.found.updateTime),i=new ed({mapValue:{fields:e.found.fields}});return rd.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){fp(!!e.missing),fp(!!e.readTime);var n=ig(t,e.missing),r=tg(e.readTime);return rd.newNoDocument(n,r)}(t,e):lp()}(n.R,t);a.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());fp(!!e),s.push(e)})),s)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new bv(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return vt(this,void 0,void 0,(function(){var t,e=this;return gt(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=qp.fromPath(n);e.mutations.push(new _v(r,e.precondition(r)))})),[4,function(t,e){return vt(this,void 0,void 0,(function(){var n,r,i;return gt(this,(function(o){switch(o.label){case 0:return n=pp(t),r=sg(n.R)+"/documents",i={writes:e.map((function(t){return lg(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw lp();e=_p.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new ip(rp.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?iv.updateTime(e):iv.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(_p.min()))throw new ip(rp.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return iv.updateTime(e)}return iv.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),G_=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new ab(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return vt(t,void 0,void 0,(function(){var t,e,n=this;return gt(this,(function(r){return t=new z_(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Fp(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Iv(e)}return!1},t}(),Q_=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Vy.UNAUTHENTICATED,this.clientId=vp.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return vt(r,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return sp("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new ip(rp.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Yg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return vt(t,void 0,void 0,(function(){var t,n;return gt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Ub(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(t,e){return vt(this,void 0,void 0,(function(){var n,r,i=this;return gt(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),sp("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return vt(i,void 0,void 0,(function(){return gt(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,my(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function Y_(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,X_(t)];case 1:return n=i.sent(),sp("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:return(n=pp(t)).asyncQueue.verifyOperationInProgress(),sp("RemoteStore","RemoteStore received new credentials"),r=wb(n),n.Or.add(3),[4,db(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,pb(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function X_(t){return vt(this,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(sp("FirestoreClient","Using default OfflineComponentProvider"),[4,$_(t,new U_)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function J_(t){return vt(this,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(sp("FirestoreClient","Using default OnlineComponentProvider"),[4,Y_(t,new B_)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Z_(t){return X_(t).then((function(t){return t.persistence}))}function tw(t){return X_(t).then((function(t){return t.localStore}))}function ew(t){return J_(t).then((function(t){return t.remoteStore}))}function nw(t){return J_(t).then((function(t){return t.syncEngine}))}function rw(t){return vt(this,void 0,void 0,(function(){var e,n;return gt(this,(function(r){switch(r.label){case 0:return[4,J_(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=s_.bind(null,e.syncEngine),n.onUnlisten=c_.bind(null,e.syncEngine),n)]}}))}))}function iw(t,e,n){var r=this;void 0===n&&(n={});var i=new Yg;return t.asyncQueue.enqueueAndForget((function(){return vt(r,void 0,void 0,(function(){var r;return gt(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new H_({next:function(o){e.enqueueAndForget((function(){return zb(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new ip(rp.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new ip(rp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new Yb(Cd(n.path),o,{includeMetadataChanges:!0,so:!0});return Wb(t,a)},[4,rw(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function ow(t,e,n){var r=this;void 0===n&&(n={});var i=new Yg;return t.asyncQueue.enqueueAndForget((function(){return vt(r,void 0,void 0,(function(){var r;return gt(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new H_({next:function(n){e.enqueueAndForget((function(){return zb(t,a)})),n.fromCache&&"server"===r.source?i.reject(new ip(rp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new Yb(n,o,{includeMetadataChanges:!0,so:!0});return Wb(t,a)},[4,rw(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var aw=function(t,e,n,r,i,o,a,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},sw=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),uw=new Map,cw=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},hw=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(Vy.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),lw=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),fw=function(){function t(t){var e=this;this.currentUser=Vy.UNAUTHENTICATED,this.oc=new Yg,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){sp("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(sp("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(sp("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(fp("string"==typeof n.accessToken),new cw(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return vt(n,void 0,void 0,(function(){return gt(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return fp(null===t||"string"==typeof t),new Vy(t)},t}(),pw=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Vy.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),dw=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new pw(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(Vy.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(t,e,n){if(!n)throw new ip(rp.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function gw(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ip(rp.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function mw(t,e,n,r){if(!0===e&&!0===r)throw new ip(rp.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function yw(t){if(!qp.isDocumentKey(t))throw new ip(rp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function bw(t){if(qp.isDocumentKey(t))throw new ip(rp.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function _w(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":lp()}function ww(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ip(rp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=_w(t);throw new ip(rp.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Iw(t,e){if(e<=0)throw new ip(rp.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tw=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new ip(rp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ip(rp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,mw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Ew=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tw({}),this._settingsFrozen=!1,t instanceof sw?(this._databaseId=t,this._credentials=new hw):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ip(rp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sw(t.options.projectId)}(t),this._credentials=new fw(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new ip(rp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new ip(rp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tw(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new hw;switch(t.type){case"gapi":var e=t.client;return fp(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new dw(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ip(rp.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){var t;return this,(t=uw.get(this))&&(sp("ComponentProvider","Removing Datastore"),uw.delete(this),t.terminate()),Promise.resolve()},t}(),Sw=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new kw(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Cw=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),kw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Cd(r))||this)._path=r,i.type="collection",i}return pt(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Sw(this.firestore,null,new qp(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Cw);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=he(t),vw("collection","path",e),t instanceof Ew)return bw(n=Sp.fromString.apply(Sp,bt([e],r))),new kw(t,null,n);if(!(t instanceof Sw||t instanceof kw))throw new ip(rp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return bw(n=Sp.fromString.apply(Sp,bt([t.path],r)).child(Sp.fromString(e))),new kw(t.firestore,null,n)}function Nw(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=he(t),1===arguments.length&&(e=vp.u()),vw("doc","path",e),t instanceof Ew)return yw(n=Sp.fromString.apply(Sp,bt([e],r))),new Sw(t,null,new qp(n));if(!(t instanceof Sw||t instanceof kw))throw new ip(rp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return yw(n=t._path.child(Sp.fromString.apply(Sp,bt([e],r)))),new Sw(t.firestore,t instanceof kw?t.converter:null,new qp(n))}function Rw(t,e){return t=he(t),e=he(e),(t instanceof Sw||t instanceof kw)&&(e instanceof Sw||e instanceof kw)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Pw(t,e){return t=he(t),e=he(e),t instanceof Cw&&e instanceof Cw&&t.firestore===e.firestore&&Ld(t._query,e._query)&&t.converter===e.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var xw=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new ab(this,"async_queue_retry"),this.Tc=function(){var e=ib();e&&sp("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=ib();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ic(),this.Ac(t)},t.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var t=ib();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tc)}},t.prototype.enqueue=function(t){return this.Ic(),this._c?new Promise((function(t){})):this.Ac(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.Rc()}))},t.prototype.Rc=function(){return vt(this,void 0,void 0,(function(){var t,e=this;return gt(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!nm(t=n.sent()))throw t;return sp("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.Rc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ac=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,up("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ic(),this.Ec.indexOf(t)>-1&&(e=0);var i=jb.createAndSchedule(this,t,e,n,(function(t){return r.bc(t)}));return this.mc.push(i),i},t.prototype.Ic=function(){this.yc&&lp()},t.prototype.verifyOperationInProgress=function(){},t.prototype.vc=function(){return vt(this,void 0,void 0,(function(){var t;return gt(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Pc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Vc=function(t){var e=this;return this.vc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.vc()}))},t.prototype.Sc=function(t){this.Ec.push(t)},t.prototype.bc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Ow(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Dw=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Yg,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),Lw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new xw,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return pt(e,t),e.prototype._terminate=function(){return this._firestoreClient||Fw(this),this._firestoreClient.terminate()},e}(Ew);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(t){return t._firestoreClient||Fw(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Fw(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new aw(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Q_(t._credentials,t._queue,r)}function jw(t,e,n){var r=this,i=new Yg;return t.asyncQueue.enqueue((function(){return vt(r,void 0,void 0,(function(){var r;return gt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,$_(t,n)];case 1:return o.sent(),[4,Y_(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===rp.FAILED_PRECONDITION||t.code===rp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Uw(t){if(t._initialized||t._terminated)throw new ip(rp.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qw=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new ip(rp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kp(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Vw=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Np.fromBase64String(e))}catch(t){throw new ip(rp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},t.fromUint8Array=function(e){return new t(Np.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Bw=function(t){this._methodName=t},Kw=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new ip(rp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ip(rp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return gp(this._lat,t._lat)||gp(this._long,t._long)},t}(),Hw=/^__.*__$/,Ww=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new pv(t,this.data,this.fieldMask,e,this.fieldTransforms):new fv(t,this.data,e,this.fieldTransforms)},t}(),zw=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new pv(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lp()}}var Qw=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),t.prototype.Nc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.xc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.kc(t),r},t.prototype.$c=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},t.prototype.Oc=function(t){return this.Nc({path:void 0,Fc:!0})},t.prototype.Mc=function(t){return dI(t,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Dc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.kc(this.path.get(t))},t.prototype.kc=function(t){if(0===t.length)throw this.Mc("Document fields must not be empty");if(Gw(this.Cc)&&Hw.test(t))throw this.Mc('Document fields cannot begin and end with "__"')},t}(),$w=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||ob(t)}return t.prototype.qc=function(t,e,n,r){return void 0===r&&(r=!1),new Qw({Cc:t,methodName:e,Bc:n,path:kp.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Yw(t){var e=t._freezeSettings(),n=ob(t._databaseId);return new $w(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Xw(t,e,n,r,i,o){void 0===o&&(o={});var a=t.qc(o.merge||o.mergeFields?2:0,e,n,i);hI("Data must be an object, but it was:",a,r);var s,u,c=uI(r,a);if(o.merge)s=new Ap(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=lI(e,f[l],n);if(!a.contains(p))throw new ip(rp.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");vI(h,p)||h.push(p)}s=new Ap(h),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new Ww(new ed(c),s,u)}var Jw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Cc)throw 1===t.Cc?t.Mc(this._methodName+"() can only appear at the top level of your update data"):t.Mc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Bw);function Zw(t,e,n){return new Qw({Cc:3,Bc:e.settings.Bc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var tI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype._toFieldTransform=function(t){return new nv(t.path,new Qd)},e.prototype.isEqual=function(t){return t instanceof e},e}(Bw),eI=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return pt(e,t),e.prototype._toFieldTransform=function(t){var e=Zw(this,t,!0),n=this.Uc.map((function(t){return sI(t,e)})),r=new $d(n);return new nv(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Bw),nI=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return pt(e,t),e.prototype._toFieldTransform=function(t){var e=Zw(this,t,!0),n=this.Uc.map((function(t){return sI(t,e)})),r=new Xd(n);return new nv(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Bw),rI=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return pt(e,t),e.prototype._toFieldTransform=function(t){var e=new Zd(t.R,Kd(t.R,this.Kc));return new nv(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Bw);function iI(t,e,n,r){var i=t.qc(1,e,n);hI("Data must be an object, but it was:",i,r);var o=[],a=ed.empty();Ip(r,(function(t,r){var s=pI(e,t,n);r=he(r);var u=i.$c(s);if(r instanceof Jw)o.push(s);else{var c=sI(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new Ap(o);return new zw(a,s,i.fieldTransforms)}function oI(t,e,n,r,i,o){var a=t.qc(1,e,n),s=[lI(e,r,n)],u=[i];if(o.length%2!=0)throw new ip(rp.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(lI(e,o[c])),u.push(o[c+1]);for(var h=[],l=ed.empty(),f=s.length-1;f>=0;--f)if(!vI(h,s[f])){var p=s[f],d=u[f];d=he(d);var v=a.$c(p);if(d instanceof Jw)h.push(p);else{var g=sI(d,v);null!=g&&(h.push(p),l.set(p,g))}}var m=new Ap(h);return new zw(l,m,a.fieldTransforms)}function aI(t,e,n,r){return void 0===r&&(r=!1),sI(n,t.qc(r?4:3,e))}function sI(t,e){if(cI(t=he(t)))return hI("Unsupported field value:",e,t),uI(t,e);if(t instanceof Bw)return function(t,e){if(!Gw(e.Cc))throw e.Mc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Mc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Cc)throw e.Mc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=sI(o[i],e.Oc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=he(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Kd(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=bp.fromDate(t);return{timestampValue:Xv(e.R,n)}}if(t instanceof bp)return n=new bp(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Xv(e.R,n)};if(t instanceof Kw)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Vw)return{bytesValue:Jv(e.R,t._byteString)};if(t instanceof Sw){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:eg(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Mc("Unsupported field value: "+_w(t))}(t,e)}function uI(t,e){var n={};return Tp(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ip(t,(function(t,r){var i=sI(r,e.xc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function cI(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof bp||t instanceof Kw||t instanceof Vw||t instanceof Sw||t instanceof Bw)}function hI(t,e,n){if(!cI(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=_w(n);throw"an object"===r?e.Mc(t+" a custom object"):e.Mc(t+" "+r)}}function lI(t,e,n){if((e=he(e))instanceof qw)return e._internalPath;if("string"==typeof e)return pI(t,e);throw dI("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var fI=new RegExp("[~\\*/\\[\\]]");function pI(t,e,n){if(e.search(fI)>=0)throw dI("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(qw.bind.apply(qw,bt([void 0],e.split(".")))))._internalPath}catch(r){throw dI("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function dI(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new ip(rp.INVALID_ARGUMENT,(s+=". ")+t+u)}function vI(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gI=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Sw(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new mI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(yI("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),mI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(gI);function yI(t,e){return"string"==typeof e?pI(t,e):e instanceof qw?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bI=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),_I=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return pt(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new wI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(yI("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(gI),wI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(_I),II=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new bI(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new wI(n._firestore,n._userDataWriter,r.key,r,new bI(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ip(rp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new wI(t._firestore,t._userDataWriter,e.doc.key,e.doc,new bI(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new wI(t._firestore,t._userDataWriter,e.doc.key,e.doc,new bI(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:TI(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function TI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lp()}}function EI(t,e){return t instanceof _I&&e instanceof _I?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof II&&e instanceof II&&t._firestore===e._firestore&&Pw(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(t){if(Ad(t)&&0===t.explicitOrderBy.length)throw new ip(rp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var CI=function(){};function kI(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var AI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.jc=n,i.Wc=r,i.type="where",i}return pt(e,t),e.prototype._apply=function(t){var e=Yw(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new ip(rp.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){LI(a,o);for(var u=[],c=0,h=a;c<h.length;c++){var l=h[c];u.push(DI(r,t,l))}s={arrayValue:{values:u}}}else s=DI(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||LI(a,o),s=aI(n,"where",a,"in"===o||"not-in"===o);var f=cd.create(i,o,s);return function(t,e){if(e.g()){var n=Rd(t);if(null!==n&&!n.isEqual(e.field))throw new ip(rp.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Nd(t);null!==r&&MI(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new ip(rp.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new ip(rp.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.Qc,this.jc,this.Wc);return new Cw(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Ed(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(CI),NI=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Gc=n,r.type="orderBy",r}return pt(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new ip(rp.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new ip(rp.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new _d(e,n);return function(t,e){if(null===Nd(t)){var n=Rd(t);null!==n&&MI(t,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Gc);return new Cw(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Ed(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(CI),RI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return pt(e,t),e.prototype._apply=function(t){return new Cw(t.firestore,t.converter,Dd(t._query,this.zc,this.Hc))},e}(CI),PI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return pt(e,t),e.prototype._apply=function(t){var e=OI(t,this.type,this.Jc,this.Yc);return new Cw(t.firestore,t.converter,function(t,e){return new Ed(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(CI),xI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return pt(e,t),e.prototype._apply=function(t){var e=OI(t,this.type,this.Jc,this.Yc);return new Cw(t.firestore,t.converter,function(t,e){return new Ed(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(CI);function OI(t,e,n,r){if(n[0]=he(n[0]),n[0]instanceof gI)return function(t,e,n,r,i){if(!r)throw new ip(rp.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=xd(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(Qp(e,r.key));else{var c=r.data.field(u.field);if(Dp(c))throw new ip(rp.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new ip(rp.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new yd(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Yw(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new ip(rp.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new ip(rp.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Pd(t)&&-1!==c.indexOf("/"))throw new ip(rp.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Sp.fromString(c));if(!qp.isDocumentKey(h))throw new ip(rp.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new qp(h);s.push(Qp(e,l))}else{var f=aI(n,r,c);s.push(f)}}return new yd(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function DI(t,e,n){if("string"==typeof(n=he(n))){if(""===n)throw new ip(rp.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pd(e)&&-1!==n.indexOf("/"))throw new ip(rp.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Sp.fromString(n));if(!qp.isDocumentKey(r))throw new ip(rp.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Qp(t,new qp(r))}if(n instanceof Sw)return Qp(t,n._key);throw new ip(rp.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+_w(n)+".")}function LI(t,e){if(!Array.isArray(t)||0===t.length)throw new ip(rp.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new ip(rp.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function MI(t,e,n){if(!n.isEqual(e))throw new ip(rp.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FI=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Vp(t)){case 0:return null;case 1:return t.booleanValue;case 2:return xp(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Op(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw lp()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Ip(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Kw(xp(t.latitude),xp(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Lp(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Mp(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Pp(t);return new bp(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Sp.fromString(t);fp(Cg(n));var r=new sw(n.get(1),n.get(3)),i=new qp(n.popFirst(5));return r.isEqual(e)||up("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var UI=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return pt(e,t),e.prototype.convertBytes=function(t){return new Vw(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Sw(this.firestore,null,e)},e}(FI),qI=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Yw(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=VI(t,this._firestore),i=jI(r.converter,e,n),o=Xw(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,iv.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=VI(t,this._firestore);return o="string"==typeof(e=he(e))||e instanceof qw?oI(this._dataReader,"WriteBatch.update",a._key,e,n,r):iI(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,iv.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=VI(t,this._firestore);return this._mutations=this._mutations.concat(new bv(e._key,iv.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new ip(rp.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t,e){if((t=he(t)).firestore!==e)throw new ip(rp.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BI=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return pt(e,t),e.prototype.convertBytes=function(t){return new Vw(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Sw(this.firestore,null,e)},e}(FI);function KI(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=ww(t,Sw);var o=ww(t.firestore,Lw),a=Yw(o);return WI(o,[("string"==typeof(e=he(e))||e instanceof qw?oI(a,"updateDoc",t._key,e,n,r):iI(a,"updateDoc",t._key,e)).toMutation(t._key,iv.exists(!0))])}function HI(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=he(t);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||Ow(i[s])||(a=i[s],s++);var u,c,h,l={includeMetadataChanges:a.includeMetadataChanges};if(Ow(i[s])){var f=i[s];i[s]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Sw)c=ww(t.firestore,Lw),h=Cd(t._key.path),u={next:function(e){i[s]&&i[s](zI(c,t,e))},error:i[s+1],complete:i[s+2]};else{var p=ww(t,Cw);c=ww(p.firestore,Lw),h=p._query;var d=new BI(c);u={next:function(t){i[s]&&i[s](new II(c,d,p,t))},error:i[s+1],complete:i[s+2]},SI(t._query)}return function(t,e,n,r){var i=this,o=new H_(r),a=new Yb(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return vt(i,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return e=Wb,[4,rw(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return vt(i,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return e=zb,[4,rw(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(Mw(c),h,l,u)}function WI(t,e){return function(t,e){var n=this,r=new Yg;return t.asyncQueue.enqueueAndForget((function(){return vt(n,void 0,void 0,(function(){var n;return gt(this,(function(i){switch(i.label){case 0:return n=h_,[4,nw(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Mw(t),e)}function zI(t,e,n){var r=n.docs.get(e._key),i=new BI(t);return new _I(t,i,e._key,r,new bI(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GI=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return pt(e,t),e.prototype.get=function(e){var n=this,r=VI(e,this._firestore),i=new BI(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new _I(n._firestore,i,r._key,t._document,new bI(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Yw(t)}return t.prototype.get=function(t){var e=this,n=VI(t,this._firestore),r=new UI(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return lp();var i=t[0];if(i.isFoundDocument())return new gI(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new gI(e._firestore,r,n._key,null,n.converter);throw lp()}))},t.prototype.set=function(t,e,n){var r=VI(t,this._firestore),i=jI(r.converter,e,n),o=Xw(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=VI(t,this._firestore);return o="string"==typeof(e=he(e))||e instanceof qw?oI(this._dataReader,"Transaction.update",a._key,e,n,r):iI(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=VI(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(){if("undefined"==typeof Uint8Array)throw new ip(rp.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function $I(){if("undefined"==typeof atob)throw new ip(rp.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var YI=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return $I(),new t(Vw.fromBase64String(e))},t.fromUint8Array=function(e){return QI(),new t(Vw.fromUint8Array(e))},t.prototype.toBase64=function(){return $I(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return QI(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),XI=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Uw(t=ww(t,Lw));var n=Mw(t),r=t._freezeSettings(),i=new B_;return jw(n,i,new q_(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Uw(t=ww(t,Lw));var e=Mw(t),n=t._freezeSettings(),r=new B_;return jw(e,r,new V_(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new ip(rp.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Yg;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return vt(e,void 0,void 0,(function(){var e;return gt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return Zg.yt()?(e=t+"main",[4,Zg.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(hy(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),JI=function(){function t(t,e,n){var r=this;this._delegate=e,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof sw||(this.Zc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||cp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=ww(t,Ew))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&cp("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=Pt(r.mockUserToken),a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new ip(rp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new lw(new cw(o,new Vy(a)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return vt(e,void 0,void 0,(function(){var e,n;return gt(this,(function(r){switch(r.label){case 0:return[4,Z_(t)];case 1:return e=r.sent(),[4,ew(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=pp(t);return e.Or.delete(0),pb(e)}(n))]}}))}))}))}(Mw(ww(this._delegate,Lw)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return vt(e,void 0,void 0,(function(){var e,n;return gt(this,(function(r){switch(r.label){case 0:return[4,Z_(t)];case 1:return e=r.sent(),[4,ew(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return(e=pp(t)).Or.add(0),[4,db(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Mw(ww(this._delegate,Lw)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&mw("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Yg;return t.asyncQueue.enqueueAndForget((function(){return vt(e,void 0,void 0,(function(){var e;return gt(this,(function(r){switch(r.label){case 0:return e=g_,[4,nw(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Mw(ww(this._delegate,Lw)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new H_(e);return t.asyncQueue.enqueueAndForget((function(){return vt(n,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return e=function(t,e){pp(t).Gr.add(e),e.next()},[4,rw(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return vt(n,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return e=function(t,e){pp(t).Gr.delete(e)},[4,rw(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Mw(t=ww(t,Lw)),Ow(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Zc)throw new ip(rp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new fT(this,Aw(this._delegate,t))}catch(t){throw iT(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new rT(this,Nw(this._delegate,t))}catch(t){throw iT(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new cT(this,function(t,e){if(t=ww(t,Ew),vw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ip(rp.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Cw(t,null,function(t){return new Ed(Sp.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw iT(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Yg;return t.asyncQueue.enqueueAndForget((function(){return vt(n,void 0,void 0,(function(){var n;return gt(this,(function(i){switch(i.label){case 0:return[4,function(t){return J_(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new G_(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(Mw(t),(function(n){return e(new GI(t,n))}))}(this._delegate,(function(n){return t(new tT(e,n))}))},t.prototype.batch=function(){var t=this;return Mw(this._delegate),new eT(new qI(this._delegate,(function(e){return WI(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new ip(rp.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new ip(rp.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),ZI=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return pt(e,t),e.prototype.convertBytes=function(t){return new YI(new Vw(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return rT.tu(e,this.firestore,null)},e}(FI);var tT=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new ZI(t)}return t.prototype.get=function(t){var e=this,n=pT(t);return this._delegate.get(n).then((function(t){return new sT(e._firestore,new _I(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=pT(t);return n?(gw("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=pT(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,bt([a,e,n],i)),this},t.prototype.delete=function(t){var e=pT(t);return this._delegate.delete(e),this},t}(),eT=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=pT(t);return n?(gw("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=pT(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,bt([a,e,n],i)),this},t.prototype.delete=function(t){var e=pT(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),nT=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new wI(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new uT(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.eu=function(e,n){var r=t.nu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new ZI(e),n),i.set(n,o)),o},t}();nT.nu=new WeakMap;var rT=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ZI(t)}return t.su=function(e,n,r){if(e.length%2!=0)throw new ip(rp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Sw(n._delegate,r,new qp(e)))},t.tu=function(e,n,r){return new t(n,new Sw(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new fT(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new fT(this.firestore,Aw(this._delegate,t))}catch(t){throw iT(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=he(t))instanceof Sw&&Rw(this._delegate,t)},t.prototype.set=function(t,e){e=gw("DocumentReference.set",e);try{return function(t,e,n){t=ww(t,Sw);var r=ww(t.firestore,Lw),i=jI(t.converter,e,n);return WI(r,[Xw(Yw(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,iv.none())])}(this._delegate,t,e)}catch(t){throw iT(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?KI(this._delegate,t):KI.apply(void 0,bt([this._delegate,t,e],n))}catch(t){throw iT(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){var t;return WI(ww((t=this._delegate).firestore,Lw),[new bv(t._key,iv.none())])},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=oT(e),i=aT(e,(function(e){return new sT(t.firestore,new _I(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return HI(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ww(t,Sw);var e=ww(t.firestore,Lw),n=Mw(e),r=new BI(e);return function(t,e){var n=this,r=new Yg;return t.asyncQueue.enqueueAndForget((function(){return vt(n,void 0,void 0,(function(){var n;return gt(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return vt(this,void 0,void 0,(function(){var r,i;return gt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=pp(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new ip(rp.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Ub(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,tw(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new _I(e,r,t._key,n,new bI(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=ww(t,Sw);var e=ww(t.firestore,Lw);return iw(Mw(e),t._key,{source:"server"}).then((function(n){return zI(e,t,n)}))}(this._delegate):function(t){t=ww(t,Sw);var e=ww(t.firestore,Lw);return iw(Mw(e),t._key).then((function(n){return zI(e,t,n)}))}(this._delegate)).then((function(t){return new sT(e.firestore,new _I(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(nT.eu(this.firestore,e)):this._delegate.withConverter(null))},t}();function iT(t,e,n){return t.message=t.message.replace(e,n),t}function oT(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Ow(r))return r}return{}}function aT(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Ow(t[0])?t[0]:Ow(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var sT=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new rT(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return EI(this._delegate,t._delegate)},t}(),uT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(sT),cT=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ZI(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,kI(this._delegate,function(t,e,n){var r=e,i=yI("where",t);return new AI(i,r,n)}(e,n,r)))}catch(t){throw iT(t,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,kI(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=yI("orderBy",t);return new NI(r,n)}(e,n)))}catch(t){throw iT(t,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,kI(this._delegate,function(t){return Iw("limit",t),new RI("limit",t,"F")}(e)))}catch(t){throw iT(t,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,kI(this._delegate,function(t){return Iw("limitToLast",t),new RI("limitToLast",t,"L")}(e)))}catch(t){throw iT(t,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,kI(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new PI("startAt",t,!0)}.apply(void 0,e)))}catch(t){throw iT(t,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,kI(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new PI("startAfter",t,!1)}.apply(void 0,e)))}catch(t){throw iT(t,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,kI(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xI("endBefore",t,!0)}.apply(void 0,e)))}catch(t){throw iT(t,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,kI(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xI("endAt",t,!1)}.apply(void 0,e)))}catch(t){throw iT(t,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Pw(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ww(t,Cw);var e=ww(t.firestore,Lw),n=Mw(e),r=new BI(e);return function(t,e){var n=this,r=new Yg;return t.asyncQueue.enqueueAndForget((function(){return vt(n,void 0,void 0,(function(){var n;return gt(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o,a,s;return gt(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Sy(t,e,!0)];case 1:return s=u.sent(),r=new r_(e,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=Ub(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,tw(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new II(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=ww(t,Cw);var e=ww(t.firestore,Lw),n=Mw(e),r=new BI(e);return ow(n,t._query,{source:"server"}).then((function(n){return new II(e,r,t,n)}))}(this._delegate):function(t){t=ww(t,Cw);var e=ww(t.firestore,Lw),n=Mw(e),r=new BI(e);return SI(t._query),ow(n,t._query).then((function(n){return new II(e,r,t,n)}))}(this._delegate)).then((function(t){return new lT(e.firestore,new II(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=oT(e),i=aT(e,(function(e){return new lT(t.firestore,new II(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return HI(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(nT.eu(this.firestore,e)):this._delegate.withConverter(null))},t}(),hT=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new uT(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),lT=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new cT(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new uT(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new hT(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new uT(n._firestore,r))}))},t.prototype.isEqual=function(t){return EI(this._delegate,t._delegate)},t}(),fT=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return pt(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new rT(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new rT(this.firestore,void 0===t?Nw(this._delegate):Nw(this._delegate,t))}catch(t){throw iT(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=ww(t.firestore,Lw),r=Nw(t),i=jI(t.converter,e);return WI(n,[Xw(Yw(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,iv.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new rT(e.firestore,t)}))},e.prototype.isEqual=function(t){return Rw(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(nT.eu(this.firestore,t)):this._delegate.withConverter(null))},e}(cT);function pT(t){return ww(t,Sw)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dT=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(qw.bind.apply(qw,bt([void 0],t)))}return t.documentId=function(){return new t(kp.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=he(t))instanceof qw&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),vT=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new tI("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Jw("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new eI("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new nI("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new rI("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(t){return function(t,e){var n=Mw(t=ww(t,Lw)),r=new Dw;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new W_(t,e)}(function(t,e){if(t instanceof Uint8Array)return K_(t,e);if(t instanceof ArrayBuffer)return K_(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,ob(e));t.asyncQueue.enqueueAndForget((function(){return vt(i,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return e=j_,[4,nw(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}}))}))}))}(n,t._databaseId,e,r),r}(this._delegate,t)}function mT(t){var e,n,r=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue((function(){return vt(n,void 0,void 0,(function(){var n;return gt(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=pp(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Ke.getNamedQuery(t,e)}))},[4,tw(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(Mw(e=ww(e,Lw)),n).then((function(t){return t?new Cw(e,null,t.query):null}))).then((function(t){return t?new cT(r,t):null}))}var yT,bT,_T={Firestore:JI,GeoPoint:Kw,Timestamp:bp,Blob:YI,Transaction:tT,WriteBatch:eT,DocumentReference:rT,DocumentSnapshot:sT,Query:cT,QueryDocumentSnapshot:uT,QuerySnapshot:lT,CollectionReference:fT,FieldPath:dT,FieldValue:vT,setLogLevel:function(t){var e;e=t,op.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t,e){t.INTERNAL.registerComponent(new le("firestore",(function(t){return function(t,e){return new JI(t,new Lw(t,e),new XI)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},_T)))})(yT=Ve),yT.registerVersion("@firebase/firestore","2.3.8"),(bT=JI).prototype.loadBundle=gT,bT.prototype.namedQuery=mT;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var wT={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},IT=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return pt(e,t),e}(Error);var TT=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return vt(this,void 0,void 0,(function(){var t;return gt(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getContext=function(){return vt(this,void 0,void 0,(function(){var t,e;return gt(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var ST=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return ET(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?ET(t,(function(t){return e.decode(t)})):t},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var CT=function(){function t(t,e,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new ST,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new TT(e,n),this.cancelAllRequests=new Promise((function(t){a.deleteService=function(){return t()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o;return gt(this,(function(a){switch(a.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=a.sent())&&(n["X-Firebase-AppCheck"]=r),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,i.json()];case 7:return o=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},t.prototype.getAppCheckToken=function(){return vt(this,void 0,void 0,(function(){var t;return gt(this,(function(e){switch(e.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype.call=function(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,h,l,f,p;return gt(this,(function(d){switch(d.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(a=d.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,u=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new IT("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(s),c=u.timer,h=u.promise,[4,Promise.race([kT(c,this.postJSON(r,i,o)),h,kT(c,this.cancelAllRequests)])];case 2:if(!(l=d.sent()))throw new IT("cancelled","Firebase Functions instance was deleted.");if(f=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var s=a.status;if("string"==typeof s){if(!wT[s])return new IT("internal","internal");r=wT[s],i=s}var u=a.message;"string"==typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new IT(r,i,o)}(l.status,l.json,this.serializer))throw f;if(!l.json)throw new IT("internal","Response is not valid JSON object.");if(void 0===(p=l.json.data)&&(p=l.json.result),void 0===p)throw new IT("internal","Response is missing data field.");return[2,{data:this.serializer.decode(p)}]}}))}))},t}();function kT(t,e){return vt(this,void 0,void 0,(function(){var n;return gt(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AT,NT,RT;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
AT=Ve,NT=fetch.bind(self),RT={Functions:CT},AT.INTERNAL.registerComponent(new le("functions",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal"),a=t.getProvider("messaging");return new CT(r,i,a,o,n,NT)}),"PUBLIC").setServiceProps(RT).setMultipleInstances(!0)),Ve.registerVersion("@firebase/functions","0.6.13");var PT={};!function(t){function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,a){n(i=t[e].apply(t,r)).then(o,a)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new h(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function a(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function s(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function h(t,e){this._cursor=t,this._request=e}function l(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}function v(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new d(t)}))}function g(t){return r(indexedDB,"deleteDatabase",[t])}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(h,"_cursor",["direction","key","primaryKey","value"]),a(h,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(h.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new h(t,e._request)}))}))})})),l.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},l.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(l,"_store",["name","keyPath","indexNames","autoIncrement"]),a(l,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(l,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(l,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new l(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new l(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[l,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,l].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=v,t.deleteDb=g,Object.defineProperty(t,"__esModule",{value:!0})}(PT);var xT,OT=((xT={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',xT["not-registered"]="Firebase Installation is not registered.",xT["installation-not-found"]="Firebase Installation not found.",xT["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',xT["app-offline"]="Could not process request. Application offline.",xT["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",xT),DT=new Bt("installations","Installations",OT);function LT(t){return t instanceof Vt&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function FT(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function jT(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,DT.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function UT(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function qT(t,e){var n=e.refreshToken,r=UT(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)),r}function VT(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function BT(t,e){var n=e.fid;return vt(this,void 0,void 0,(function(){var e,r,i,o,a,s;return gt(this,(function(u){switch(u.label){case 0:return e=MT(t),r=UT(t),i={fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:"w:0.4.30"},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,VT((function(){return fetch(e,o)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return s=u.sent(),[2,{fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:FT(s.authToken)}];case 3:return[4,jT("Create Installation",a)];case 4:throw u.sent()}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var HT=/^[cdef][\w-]{21}$/;function WT(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,bt([],yt(e)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);return HT.test(e)?e:""}catch(t){return""}}function zT(t){return t.appName+"!"+t.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GT=new Map;function QT(t,e){var n=zT(t);$T(n,e),function(t,e){var n=XT();n&&n.postMessage({key:t,fid:e});JT()}(n,e)}function $T(t,e){var n,r,i=GT.get(t);if(i)try{for(var o=mt(i),a=o.next();!a.done;a=o.next()){(0,a.value)(e)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var YT=null;function XT(){return!YT&&"BroadcastChannel"in self&&((YT=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){$T(t.data.key,t.data.fid)}),YT}function JT(){0===GT.size&&YT&&(YT.close(),YT=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZT,tE=null;function eE(){return tE||(tE=(0,PT.openDb)("firebase-installations-database",1,(function(t){if(0===t.oldVersion)t.createObjectStore("firebase-installations-store")}))),tE}function nE(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a;return gt(this,(function(s){switch(s.label){case 0:return n=zT(t),[4,eE()];case 1:return r=s.sent(),i=r.transaction("firebase-installations-store","readwrite"),[4,(o=i.objectStore("firebase-installations-store")).get(n)];case 2:return a=s.sent(),[4,o.put(e,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===e.fid||QT(t,e.fid),[2,e]}}))}))}function rE(t){return vt(this,void 0,void 0,(function(){var e,n,r;return gt(this,(function(i){switch(i.label){case 0:return e=zT(t),[4,eE()];case 1:return n=i.sent(),[4,(r=n.transaction("firebase-installations-store","readwrite")).objectStore("firebase-installations-store").delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function iE(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a,s;return gt(this,(function(u){switch(u.label){case 0:return n=zT(t),[4,eE()];case 1:return r=u.sent(),i=r.transaction("firebase-installations-store","readwrite"),[4,(o=i.objectStore("firebase-installations-store")).get(n)];case 2:return a=u.sent(),void 0!==(s=e(a))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||a&&a.fid===s.fid||QT(t,s.fid),[2,s]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(t){return vt(this,void 0,void 0,(function(){var e,n,r;return gt(this,(function(i){switch(i.label){case 0:return[4,iE(t,(function(n){var r=function(t){return uE(t||{fid:WT(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(DT.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,BT(t,e)];case 1:return n=i.sent(),[2,nE(t,n)];case 2:return LT(r=i.sent())&&409===r.customData.serverCode?[4,rE(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,nE(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:aE(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function aE(t){return vt(this,void 0,void 0,(function(){var e,n,r,i;return gt(this,(function(o){switch(o.label){case 0:return[4,sE(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,KT(100)];case 3:return o.sent(),[4,sE(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,oE(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}function sE(t){return iE(t,(function(t){if(!t)throw DT.create("installation-not-found");return uE(t)}))}function uE(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function cE(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return vt(this,void 0,void 0,(function(){var t,i,o,a,s,u,c;return gt(this,(function(h){switch(h.label){case 0:return t=function(t,e){var n=e.fid;return MT(t)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,e),i=qT(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:"w:0.4.30"}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,VT((function(){return fetch(t,s)}))];case 1:return(u=h.sent()).ok?[4,u.json()]:[3,3];case 2:return c=h.sent(),[2,FT(c)];case 3:return[4,jT("Generate Auth Token",u)];case 4:throw h.sent()}}))}))}function hE(t,e){return void 0===e&&(e=!1),vt(this,void 0,void 0,(function(){var n,r,i;return gt(this,(function(o){switch(o.label){case 0:return[4,iE(t.appConfig,(function(r){if(!fE(r))throw DT.create("not-registered");var i=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(t)}(i))return r;if(1===i.requestStatus)return n=function(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:return[4,lE(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,KT(100)];case 3:return i.sent(),[4,lE(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,hE(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw DT.create("app-offline");var o=function(t){var e={requestStatus:1,requestTime:Date.now()};return dt(dt({},t),{authToken:e})}(r);return n=function(t,e){return vt(this,void 0,void 0,(function(){var n,r,i;return gt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,cE(t,e)];case 1:return n=o.sent(),i=dt(dt({},e),{authToken:n}),[4,nE(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!LT(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,rE(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=dt(dt({},e),{authToken:{requestStatus:0}}),[4,nE(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function lE(t){return iE(t,(function(t){if(!fE(t))throw DT.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+1e4<Date.now()?dt(dt({},t),{authToken:{requestStatus:0}}):t}))}function fE(t){return void 0!==t&&2===t.registrationStatus}function pE(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return[4,oE(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o;return gt(this,(function(a){switch(a.label){case 0:return n=function(t,e){var n=e.fid;return MT(t)+"/"+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e),r=qT(t,e),i={method:"DELETE",headers:r},[4,VT((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,jT("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function vE(t,e){var n=t.appConfig;return function(t,e){XT();var n=zT(t),r=GT.get(n);r||(r=new Set,GT.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=zT(t),r=GT.get(n);r&&(r.delete(e),0===r.size&&GT.delete(n),JT())}(n,e)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(t){return DT.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t.INTERNAL.registerComponent(new le("installations",(function(t){var e=t.getProvider("app").getImmediate(),n=function(t){var e,n;if(!t||!t.options)throw gE("App Configuration");if(!t.name)throw gE("App Name");try{for(var r=mt(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw gE(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),r={appConfig:n,platformLoggerProvider:t.getProvider("platform-logger")},i={app:e,getId:function(){
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(t){return vt(this,void 0,void 0,(function(){var e,n,r;return gt(this,(function(i){switch(i.label){case 0:return[4,oE(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):hE(t).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),vt(this,void 0,void 0,(function(){return gt(this,(function(n){switch(n.label){case 0:return[4,pE(t.appConfig)];case 1:return n.sent(),[4,hE(t,e)];case 2:return[2,n.sent().token]}}))}))}(r,t)},delete:function(){return function(t){return vt(this,void 0,void 0,(function(){var e,n;return gt(this,(function(r){switch(r.label){case 0:return[4,iE(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw DT.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw DT.create("app-offline");case 3:return[4,dE(e,n)];case 4:return r.sent(),[4,rE(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(r)},onIdChange:function(t){return vE(r,t)}};return i}),"PUBLIC")),t.registerVersion("@firebase/installations","0.4.30")}(Ve);var mE,yE,bE=((ZT={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',ZT["only-available-in-window"]="This method is available in a Window context.",ZT["only-available-in-sw"]="This method is available in a service worker context.",ZT["permission-default"]="The notification permission was not granted and dismissed instead.",ZT["permission-blocked"]="The notification permission was not granted and blocked instead.",ZT["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",ZT["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",ZT["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",ZT["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",ZT["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",ZT["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",ZT["token-update-no-token"]="FCM returned no token when updating the user to push.",ZT["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",ZT["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",ZT["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",ZT["invalid-vapid-key"]="The public VAPID key must be a string.",ZT["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",ZT),_E=new Bt("messaging","Messaging",bE),wE="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function IE(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,bt([],yt(e)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function TE(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(yE=mE||(mE={})).PUSH_RECEIVED="push-received",yE.NOTIFICATION_CLICKED="notification-clicked";function EE(t){return vt(this,void 0,void 0,(function(){var e,n,r,i=this;return gt(this,(function(o){switch(o.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=o.sent(),n=e.map((function(t){return t.name})),!n.includes("fcm_token_details_db"))return[2,null];o.label=2;case 2:return r=null,[4,(0,PT.openDb)("fcm_token_details_db",5,(function(e){return vt(i,void 0,void 0,(function(){var n,i,o,a;return gt(this,(function(s){switch(s.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains("fcm_token_object_Store")?[4,(n=e.transaction.objectStore("fcm_token_object_Store")).index("fcmSenderId").get(t)]:[2];case 1:return i=s.sent(),[4,n.clear()];case 2:if(s.sent(),!i)return[2];if(2===e.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];r={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:IE(o.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(r={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:IE(o.auth),p256dh:IE(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:IE(o.vapidKey)}});return[2]}}))}))}))];case 3:return o.sent().close(),[4,(0,PT.deleteDb)("fcm_token_details_db")];case 4:return o.sent(),[4,(0,PT.deleteDb)("fcm_vapid_details_db")];case 5:return o.sent(),[4,(0,PT.deleteDb)("undefined")];case 6:return o.sent(),[2,SE(r)?r:null]}}))}))}function SE(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var CE=null;function kE(){return CE||(CE=(0,PT.openDb)("firebase-messaging-database",1,(function(t){if(0===t.oldVersion)t.createObjectStore("firebase-messaging-store")}))),CE}function AE(t){return vt(this,void 0,void 0,(function(){var e,n,r;return gt(this,(function(i){switch(i.label){case 0:return e=PE(t),[4,kE()];case 1:return[4,i.sent().transaction("firebase-messaging-store").objectStore("firebase-messaging-store").get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,EE(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,NE(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function NE(t,e){return vt(this,void 0,void 0,(function(){var n,r,i;return gt(this,(function(o){switch(o.label){case 0:return n=PE(t),[4,kE()];case 1:return r=o.sent(),[4,(i=r.transaction("firebase-messaging-store","readwrite")).objectStore("firebase-messaging-store").put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function RE(t){return vt(this,void 0,void 0,(function(){var e,n,r;return gt(this,(function(i){switch(i.label){case 0:return e=PE(t),[4,kE()];case 1:return n=i.sent(),[4,(r=n.transaction("firebase-messaging-store","readwrite")).objectStore("firebase-messaging-store").delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function PE(t){return t.appConfig.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a,s;return gt(this,(function(u){switch(u.label){case 0:return[4,ME(t)];case 1:n=u.sent(),r=FE(e),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(LE(t.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),_E.create("token-subscribe-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,_E.create("token-subscribe-failed",{errorInfo:s});if(!o.token)throw _E.create("token-subscribe-no-token");return[2,o.token]}}))}))}function OE(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a,s;return gt(this,(function(u){switch(u.label){case 0:return[4,ME(t)];case 1:n=u.sent(),r=FE(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(LE(t.appConfig)+"/"+e.token,i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),_E.create("token-update-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,_E.create("token-update-failed",{errorInfo:s});if(!o.token)throw _E.create("token-update-no-token");return[2,o.token]}}))}))}function DE(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a;return gt(this,(function(s){switch(s.label){case 0:return[4,ME(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(LE(t.appConfig)+"/"+e,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw o=i.error.message,_E.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw a=s.sent(),_E.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))}function LE(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function ME(t){var e=t.appConfig,n=t.installations;return vt(this,void 0,void 0,(function(){var t;return gt(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function FE(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==wE&&(o.web.applicationPubKey=i),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o,a;return gt(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw _E.create("permission-blocked");return[4,BE(e,n)];case 1:return r=s.sent(),[4,AE(t)];case 2:return i=s.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:IE(r.getKey("auth")),p256dh:IE(r.getKey("p256dh"))},i?[3,3]:[2,VE(t,o)];case 3:if(u=i.subscriptionOptions,h=(c=o).vapidKey===u.vapidKey,l=c.endpoint===u.endpoint,f=c.auth===u.auth,p=c.p256dh===u.p256dh,h&&l&&f&&p)return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,DE(t,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,VE(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,qE({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,h,l,f,p;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))}function UE(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:return[4,AE(t)];case 1:return(n=i.sent())?[4,DE(t,n.token)]:[3,4];case 2:return i.sent(),[4,RE(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function qE(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o;return gt(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,OE(e,t)];case 1:return r=a.sent(),i=dt(dt({},t),{token:r,createTime:Date.now()}),[4,NE(e,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,UE(e,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function VE(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:return[4,xE(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,NE(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function BE(t,e){return vt(this,void 0,void 0,(function(){var n;return gt(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:TE(e)})]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function KE(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var WE=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw _E.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return vt(this,void 0,void 0,(function(){var n;return gt(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,AE(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:wE,r.label=2;case 2:return[2,jE(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return UE(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw _E.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw _E.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw _E.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw _E.create("only-available-in-window")},t.prototype.onMessage=function(){throw _E.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw _E.create("only-available-in-window")},t.prototype.onPush=function(t){return vt(this,void 0,void 0,(function(){var e,n,r,i;return gt(this,(function(o){switch(o.label){case 0:return e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(t),e?[4,$E()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,QE(n,e)]:(r=!1,e.notification?[4,YE(zE(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,HE(1e3)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return vt(this,void 0,void 0,(function(){var r;return gt(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,UE(this.firebaseDependencies,self.registration)];case 1:case 5:return i.sent(),[2];case 2:return[4,AE(this.firebaseDependencies)];case 3:return r=i.sent(),[4,UE(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,jE(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:wE)]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return vt(this,void 0,void 0,(function(){var r,i,o,a,s;return gt(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),i=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;if(i)return i;return KE(t.data)?self.location.origin:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r),i?(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host?[2]:[4,GE(o)]):[2]):[2];case 1:return(s=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,HE(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:return s?(r.messageType=mE.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}}))}))},t}();function zE(t){var e,n=dt({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function GE(t){return vt(this,void 0,void 0,(function(){var e,n,r,i,o,a,s;return gt(this,(function(u){switch(u.label){case 0:return[4,$E()];case 1:e=u.sent();try{for(n=mt(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(t){a={error:t}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}function QE(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=mE.PUSH_RECEIVED;try{for(var i=mt(t),o=i.next();!o.done;o=i.next()){o.value.postMessage(e)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function $E(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function YE(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var XE=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return vt(this,void 0,void 0,(function(){var e,n;return gt(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===mE.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),KE(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return vt(this,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw _E.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,jE(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return vt(this,void 0,void 0,(function(){return gt(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=wE),[2]}))}))},t.prototype.updateSwReg=function(t){return vt(this,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw _E.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return vt(this,void 0,void 0,(function(){var t,e;return gt(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),_E.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,UE(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return vt(this,void 0,void 0,(function(){var t;return gt(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?_E.create("permission-blocked"):_E.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw _E.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw _E.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw _E.create("invalid-sw-registration");if(this.swRegistration)throw _E.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw _E.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw _E.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return vt(this,void 0,void 0,(function(){var n;return gt(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case mE.NOTIFICATION_CLICKED:return"notification_open";case mE.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function JE(t){return _E.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZE={isSupported:tS};function tS(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Ve.INTERNAL.registerComponent(new le("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n=function(t){var e,n;if(!t||!t.options)throw JE("App Configuration Object");if(!t.name)throw JE("App Name");var r=t.options;try{for(var i=mt(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw JE(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),r={app:e,appConfig:n,installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!tS())throw _E.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new WE(r):new XE(r)}),"PUBLIC").setServiceProps(ZE));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var eS=function(t){function e(n,r){var i=t.call(this,nS(n),"Firebase Storage: "+r+" ("+nS(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return pt(e,t),e.prototype._codeEquals=function(t){return nS(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(Vt);function nS(t){return"storage/"+t}function rS(){return new eS("unknown","An unknown error occurred, please check the error payload for server response.")}function iS(){return new eS("canceled","User canceled the upload/download.")}function oS(){return new eS("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function aS(t){return new eS("invalid-argument",t)}function sS(){return new eS("app-deleted","The Firebase app was deleted.")}function uS(t){return new eS("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function cS(t,e){return new eS("invalid-format","String does not match format '"+t+"': "+e)}function hS(t){throw new eS("internal-error","Internal error: "+t)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var lS={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},fS=function(t,e){this.data=t,this.contentType=e||null};function pS(t,e){switch(t){case lS.RAW:return new fS(dS(e));case lS.BASE64:case lS.BASE64URL:return new fS(vS(t,e));case lS.DATA_URL:return new fS((n=new gS(e)).base64?vS(lS.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw cS(lS.DATA_URL,"Malformed data URL.")}return dS(e)}(n.rest),function(t){return new gS(t).contentType}(e))}var n;throw rS()}function dS(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else{if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}}return new Uint8Array(e)}function vS(t,e){switch(t){case lS.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw cS(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case lS.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw cS(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(e){throw cS(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var gS=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw cS(lS.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(r=";base64",!!((n=i).length>=r.length)&&n.substring(n.length-r.length)===r),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var mS,yS,bS={STATE_CHANGED:"state_changed"},_S={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function wS(t){switch(t){case"running":case"pausing":case"canceling":return _S.RUNNING;case"paused":return _S.PAUSED;case"success":return _S.SUCCESS;case"canceled":return _S.CANCELED;default:return _S.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(yS=mS||(mS={}))[yS.NO_ERROR=0]="NO_ERROR",yS[yS.NETWORK_ERROR=1]="NETWORK_ERROR",yS[yS.ABORT=2]="ABORT";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var IS=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=mS.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=mS.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=mS.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw hS("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw hS("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw hS("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw hS("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var TS=function(){function t(){}return t.prototype.createConnection=function(){return new IS},t}(),ES=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(n){return new t(e,"")}if(""===r.path)return r;throw new eS("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(t){t.path_=decodeURIComponent(t.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://"+("firebasestorage.googleapis.com"===n?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],c=0;c<u.length;c++){var h=u[c],l=h.regex.exec(e);if(l){var f=l[h.indices.bucket],p=l[h.indices.path];p||(p=""),r=new t(f,p),h.postModify(r);break}}if(null==r)throw function(t){return new eS("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),SS=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(t){return"string"==typeof t||t instanceof String}function kS(t){return AS()&&t instanceof Blob}function AS(){return"undefined"!=typeof Blob}function NS(t,e,n,r){if(r<e)throw aS("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw aS("Invalid value for '"+t+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function PS(t){var e=encodeURIComponent,n="?";for(var r in t)if(t.hasOwnProperty(r)){n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xS=function(){function t(t,e,n,r,i,o,a,s,u,c,h){var l=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){l.resolve_=t,l.reject_=e,l.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r=t.resolve_,i=t.reject_,o=n.connection;if(n.wasSuccessCode)try{var a=t.callback_(o,o.getResponseText());void 0!==a?r(a):r()}catch(t){i(t)}else if(null!==o)(s=rS()).serverResponse=o.getResponseText(),t.errorCallback_?i(t.errorCallback_(o,s)):i(s);else if(n.canceled){i(s=t.appDelete_?sS():iS())}else{var s;i(s=new eS("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}}this.canceled_?e(0,new OS(!1,null,!0)):this.backoffId_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function h(e){i=setTimeout((function(){i=null,t(l,s())}),e)}function l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,bt([null,t],e));else{var i;s()||o?c.call.apply(c,bt([null,t],e)):(r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),h(i))}}var f=!1;function p(t){f||(f=!0,u||(null!==i?(t||(a=2),clearTimeout(i),h(0)):t||(a=1)))}return h(0),setTimeout((function(){o=!0,p(!0)}),n),p}((function(e,n){if(n)e(!1,new OS(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===mS.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new OS(a,r))}else{var s=r.getErrorCode()===mS.ABORT;e(!1,new OS(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),OS=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function DS(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function LS(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=DS();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(AS())return new Blob(t);throw new eS("unsupported-environment","This browser doesn't seem to support creating Blobs")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var MS=function(){function t(t,e){var n=0,r="";kS(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(kS(this.data_)){var r=this.data_,i=(a=e,s=n,(o=r).webkitSlice?o.webkitSlice(a,s):o.mozSlice?o.mozSlice(a,s):o.slice?o.slice(a,s):null);return null===i?null:new t(i)}var o,a,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(AS()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(LS.apply(null,r))}var i=e.map((function(t){return CS(t)?pS(lS.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t,e){return e}var qS=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||US},VS=null;function BS(){if(VS)return VS;var t=[];t.push(new qS("bucket")),t.push(new qS("generation")),t.push(new qS("metageneration")),t.push(new qS("name","fullPath",!0));var e=new qS("name");e.xform=function(t,e){return function(t){return!CS(t)||t.length<2?t:jS(t)}(e)},t.push(e);var n=new qS("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new qS("timeCreated")),t.push(new qS("updated")),t.push(new qS("md5Hash",null,!0)),t.push(new qS("cacheControl",null,!0)),t.push(new qS("contentDisposition",null,!0)),t.push(new qS("contentEncoding",null,!0)),t.push(new qS("contentLanguage",null,!0)),t.push(new qS("contentType",null,!0)),t.push(new qS("metadata","customMetadata",!0)),VS=t}function KS(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new ES(n,r);return e._makeStorageReference(i)}})}(r,t),r}function HS(t,e,n){var r=FS(e);return null===r?null:KS(t,r,n)}function WS(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t,e,n){var r=FS(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new ES(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var h=c[u];s=t._makeStorageReference(new ES(e,h.name)),r.items.push(s)}return r}(t,e,r)}var GS=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t){if(!t)throw rS()}function $S(t,e){return function(n,r){var i=HS(t,r,e);return QS(null!==i),i}}function YS(t,e){return function(n,r){var i=HS(t,r,e);return QS(null!==i),function(t,e,n){var r=FS(e);if(null===r)return null;if(!CS(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return RS("/b/"+o(r)+"/o/"+o(i),n)+PS({alt:"media",token:e})}))[0]}(i,r,t.host)}}function XS(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new eS("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new eS("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new eS("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new eS("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function JS(t){var e=XS(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new eS("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function ZS(t,e,n){var r=RS(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new GS(r,"GET",$S(t,n),i);return o.errorHandler=JS(e),o}function tC(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=RS(e.bucketOnlyServerUrl(),t.host),s=t.maxOperationRetryTime,u=new GS(a,"GET",function(t,e){return function(n,r){var i=zS(t,e,r);return QS(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=XS(e),u}function eC(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var nC=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function rC(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){QS(!1)}return QS(!!n&&-1!==(e||["active"]).indexOf(n)),n}function iC(t,e,n,r,i,o,a,s){var u=new nC(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new eS("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;i>0&&(h=Math.min(h,i));var l=u.current,f=l+h,p={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},d=r.slice(l,f);if(null===d)throw oS();var v=e.maxUploadRetryTime,g=new GS(n,"POST",(function(t,n){var i,a=rC(t,["active","final"]),s=u.current+h,c=r.size();return i="final"===a?$S(e,o)(t,n):null,new nC(s,c,"final"===a,i)}),v);return g.headers=p,g.body=d.uploadData(),g.progressCallback=s||null,g.errorHandler=XS(t),g}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oC=function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sC=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=BS(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=eC(e,r,i),s={name:a.fullPath},u=RS(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},h=WS(a,n),l=t.maxUploadRetryTime,f=new GS(u,"POST",(function(t){var e;rC(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){QS(!1)}return QS(CS(e)),e}),l);return f.urlParams=s,f.headers=c,f.body=h,f.errorHandler=XS(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new GS(n,"POST",(function(t){var e=rC(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){QS(!1)}n||QS(!1);var i=Number(n);return QS(!isNaN(i)),new nC(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=XS(e),o}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new nC(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=iC(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(e){return t._error=e,void t._transition("error")}var s=t._ref.storage._makeRequest(a,i,o);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=ZS(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=eC(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+WS(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+s+"--",l=MS.getBlob(c,r,h);if(null===l)throw oS();var f={name:u.fullPath},p=RS(o,t.host),d=t.maxUploadRetryTime,v=new GS(p,"POST",$S(t,n),d);return v.urlParams=f,v.headers=a,v.body=l.uploadData(),v.errorHandler=XS(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=iS(),this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=wS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new oC(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(wS(this._state)){case _S.SUCCESS:aC(this._resolve.bind(null,this.snapshot))();break;case _S.CANCELED:case _S.ERROR:aC(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(wS(this._state)){case _S.RUNNING:case _S.PAUSED:t.next&&aC(t.next.bind(t,this.snapshot))();break;case _S.SUCCESS:t.complete&&aC(t.complete.bind(t))();break;default:t.error&&aC(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),uC=function(){function t(t,e){this._service=t,this._location=e instanceof ES?e:ES.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new ES(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return jS(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new ES(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw uS(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(t){var e={prefixes:[],items:[]};return hC(t,e).then((function(){return e}))}function hC(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o;return gt(this,(function(a){switch(a.label){case 0:return[4,lC(t,{pageToken:n})];case 1:return r=a.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,hC(t,e,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function lC(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&NS("options.maxResults",1,1e3,e.maxResults),n=e||{},r=tC(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function fC(t,e){return vt(this,void 0,void 0,(function(){var n;return gt(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=RS(e.fullServerUrl(),t.host),o=WS(n,r),a=t.maxOperationRetryTime,s=new GS(i,"PATCH",$S(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=JS(e),s}(t.storage,t._location,e,BS()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function pC(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=RS(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new GS(r,"GET",YS(t,n),i);return o.errorHandler=JS(e),o}(t.storage,t._location,BS()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new eS("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function dC(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=RS(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new GS(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=JS(e),i}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function vC(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new ES(t._location.bucket,n);return new uC(t.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(t){return/^[A-Za-z]+:\/\//.test(t)}function mC(t,e){if(t instanceof _C){var n=t;if(null==n._bucket)throw new eS("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new uC(n,n._bucket);return null!=e?mC(r,e):r}if(void 0!==e){if(e.includes(".."))throw aS('`path` param cannot contain ".."');return vC(t,e)}return t}function yC(t,e){if(e&&gC(e)){if(t instanceof _C)return new uC(t,e);throw aS("To use ref(service, url), the first argument must be a Storage instance.")}return mC(t,e)}function bC(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:ES.makeFromBucketSpec(n,t)}var _C=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host="firebasestorage.googleapis.com",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ES.makeFromBucketSpec(i,this._host):bC(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=ES.makeFromBucketSpec(this._url,t):this._bucket=bC(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){NS("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){NS("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return vt(this,void 0,void 0,(function(){var t,e;return gt(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return vt(this,void 0,void 0,(function(){var t;return gt(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new uC(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new SS(sS());var i=function(t,e,n,r,i,o){var a=PS(t.urlParams),s=t.url+a,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new xS(s,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return vt(this,void 0,void 0,(function(){var e,n,r;return gt(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new sC(t,new MS(e),n)}(t=he(t),e,n)}function IC(t){return function(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=ZS(t.storage,t._location,BS()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=he(t))}function TC(t,e){return yC(t=he(t),e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var EC=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),SC=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new EC(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new EC(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new EC(t,i,i._ref))}:{next:e.next?function(t){return e.next(new EC(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),CC=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new kC(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new kC(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),kC=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){var n=function(t,e){return vC(t,e)}(this._delegate,e);return new t(n,this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new SC(wC(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=lS.RAW),this._throwIfRoot("putString");var r=pS(e,t),i=dt({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new SC(new sC(this._delegate,new MS(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,cC(t=he(t))).then((function(t){return new CC(t,e.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return lC(t=he(t),e)}(this._delegate,t||void 0).then((function(t){return new CC(t,e.storage)}))},t.prototype.getMetadata=function(){return IC(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return fC(t=he(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return pC(he(this._delegate))},t.prototype.delete=function(){return this._throwIfRoot("delete"),dC(he(this._delegate))},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw uS(t)},t}(),AC=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(gC(t))throw aS("ref() expected a child path but got a URL, use refFromURL instead.");return new kC(TC(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!gC(t))throw aS("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ES.makeFromUrl(t,this._delegate.host)}catch(t){throw aS("refFromUrl() expected a valid full URL but got an invalid one.")}return new kC(TC(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new AC(r,new _C(r,i,o,new TS,n,Ve.SDK_VERSION))}!function(t){var e={TaskState:_S,TaskEvent:bS,StringFormat:lS,Storage:_C,Reference:kC};t.INTERNAL.registerComponent(new le("storage",NC,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.5.6")}(Ve);var RC,PC,xC,OC=((RC={})["trace started"]="Trace {$traceName} was started before.",RC["trace stopped"]="Trace {$traceName} is not running.",RC["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",RC["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",RC["no window"]="Window is not available.",RC["no app id"]="App id is not available.",RC["no project id"]="Project id is not available.",RC["no api key"]="Api key is not available.",RC["invalid cc log"]="Attempted to queue invalid cc event",RC["FB not default"]="Performance can only start when Firebase app instance is the default one.",RC["RC response not ok"]="RC response is not ok",RC["invalid attribute name"]="Attribute name {$attributeName} is invalid.",RC["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",RC["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",RC["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",RC),DC=new Bt("performance","Performance",OC),LC=new Ee("Performance");LC.logLevel=ge.INFO;var MC,FC=function(){function t(t){if(this.window=t,!t)throw DC.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!jt()||(LC.info("IndexedDB is not supported by current browswer"),!1):(LC.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===PC&&(PC=new t(xC)),PC},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function jC(t,e){var n=t.length-e.length;if(n<0||n>1)throw DC.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UC,qC,VC,BC=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=jC("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=jC("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw DC.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw DC.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw DC.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===MC&&(MC=new t),MC},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(){return UC}(VC=qC||(qC={}))[VC.UNKNOWN=0]="UNKNOWN",VC[VC.VISIBLE=1]="VISIBLE",VC[VC.HIDDEN=2]="HIDDEN";var HC=["firebase_","google_","ga_"],WC=new RegExp("^[a-zA-Z]\\w*$");function zC(){var t=FC.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function GC(){switch(FC.getInstance().document.visibilityState){case"visible":return qC.VISIBLE;case"hidden":return qC.HIDDEN;default:return qC.UNKNOWN}}function QC(){var t=FC.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var $C=!0;function YC(t){var e=function(){var t=FC.getInstance().localStorage;if(!t)return;var e=t.getItem("@firebase/performance/configexpire");if(!(e&&(n=e,Number(n)>Date.now())))return;var n;var r=t.getItem("@firebase/performance/config");if(!r)return;try{return JSON.parse(r)}catch(t){return}}();return e?(XC(e),Promise.resolve()):function(t){return(e=BC.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+BC.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+BC.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:BC.getInstance().getAppId(),app_version:"0.4.16",sdk_version:"0.0.1"})});return fetch(r).then((function(t){if(t.ok)return t.json();throw DC.create("RC response not ok")}))})).catch((function(){LC.info("Could not fetch config, will use default configs")}));var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(t).then(XC).then((function(t){return function(t){var e=FC.getInstance().localStorage;if(!t||!e)return;e.setItem("@firebase/performance/config",JSON.stringify(t)),e.setItem("@firebase/performance/configexpire",String(Date.now()+36e5*BC.getInstance().configTimeToLive))}(t)}),(function(){}))}function XC(t){if(!t)return t;var e=BC.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=$C,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=JC(e.tracesSamplingRate),e.logNetworkAfterSampling=JC(e.networkRequestsSamplingRate),t}function JC(t){return Math.random()<=t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZC,tk=1;function ek(){return tk=2,ZC=ZC||function(){var t=FC.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}().then((function(){return(t=BC.getInstance().installationsService.getId()).then((function(t){UC=t})),t;var t})).then((function(t){return YC(t)})).then((function(){return nk()}),(function(){return nk()}))}function nk(){tk=3}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rk,ik=3,ok=[],ak=!1;function sk(t){setTimeout((function(){var t,e;if(0!==ik)return ok.length?(t=ok.splice(0,1e3),e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),void function(t,e){return function(t){var e=BC.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then((function(t){return t.ok||LC.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=1e4;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(ok=bt(bt([],e),ok),LC.info("Retry transport request later.")),ik=3,sk(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:BC.getInstance().logSource,log_event:e},t).catch((function(){ok=bt(bt([],t),ok),ik--,LC.info("Tries left: "+ik+"."),sk(1e4)}))):sk(1e4)}),t)}function uk(t){if(!t.eventTime||!t.message)throw DC.create("invalid cc log");ok=bt(bt([],ok),[t])}function ck(t,e){var n;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rk||(n=fk,rk=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];uk({message:n.apply(void 0,t),eventTime:Date.now()})}),rk(t,e)}function hk(t){var e=BC.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&FC.getInstance().requiredApisAvailable()&&(t.isAuto&&GC()!==qC.VISIBLE||(3===tk?lk(t):ek().then((function(){return lk(t)}),(function(){return lk(t)}))))}function lk(t){if(KC()){var e=BC.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return ck(t,1)}),0)}}function fk(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:pk(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:pk(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function pk(){return{google_app_id:BC.getInstance().getAppId(),app_instance_id:KC(),web_app_info:{sdk_version:"0.4.16",page_url:FC.getInstance().getUrl(),service_worker_status:zC(),visibility_state:GC(),effective_connection_type:QC()},application_process_state:0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dk=["_fp","_fcp","_fid"];
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vk=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=FC.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw DC.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw DC.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),hk(this)},t.prototype.record=function(t,e,n){if(t<=0)throw DC.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw DC.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=dt({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}hk(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(i=t,o=this.name,0===i.length||i.length>100||!(o&&o.startsWith("_wt_")&&dk.indexOf(i)>-1)&&i.startsWith("_"))throw DC.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&LC.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||HC.some((function(t){return n.startsWith(t)}))||!n.match(WC)),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw DC.create("invalid attribute name",{attributeName:t});if(!i)throw DC.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return dt({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=FC.getInstance().getUrl();if(i){var o=new t("_wt_"+i,!0),a=Math.floor(1e3*FC.getInstance().getTimeOrigin());o.setStartTime(a),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));if(n){var s=n.find((function(t){return"first-paint"===t.name}));s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric("_fcp",Math.floor(1e3*u.startTime)),r&&o.putMetric("_fid",Math.floor(1e3*r))}hk(o)}},t.createUserTimingTrace=function(e){hk(new t(e,!1,e))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(t){var e=t;if(e&&void 0!==e.responseStart){var n=FC.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=BC.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return ck(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(){KC()&&(setTimeout((function(){return function(){var t=FC.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){vk.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),vk.createOobTrace(e,n,t))}))}else vk.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=FC.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){gk(r[n])}t.setupObserver("resource",gk)}()}),0),setTimeout((function(){return function(){for(var t=FC.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){yk(r[n])}t.setupObserver("measure",yk)}()}),0))}function yk(t){var e=t.name;"FB-PERF-TRACE-MEASURE"!==e.substring(0,"FB-PERF-TRACE-MEASURE".length)&&vk.createUserTimingTrace(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bk=function(){function t(t){this.app=t,FC.getInstance().requiredApisAvailable()&&Ut().then((function(t){t&&(ak||(sk(5500),ak=!0),ek().then(mk,mk))})).catch((function(t){LC.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new vk(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return BC.getInstance().instrumentationEnabled},set:function(t){BC.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return BC.getInstance().dataCollectionEnabled},set:function(t){BC.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){var e=function(t,e){if("[DEFAULT]"!==t.name)throw DC.create("FB not default");if("undefined"==typeof window)throw DC.create("no window");var n;return n=window,xC=n,BC.getInstance().firebaseAppInstance=t,BC.getInstance().installationsService=e,new bk(t)};t.INTERNAL.registerComponent(new le("performance",(function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();return e(n,r)}),"PUBLIC")),t.registerVersion("@firebase/performance","0.4.16")}(Ve);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _k,wk,Ik,Tk;(wk=_k||(_k={})).EVENT="event",wk.SET="set",wk.CONFIG="config",(Tk=Ik||(Ik={})).ADD_SHIPPING_INFO="add_shipping_info",Tk.ADD_PAYMENT_INFO="add_payment_info",Tk.ADD_TO_CART="add_to_cart",Tk.ADD_TO_WISHLIST="add_to_wishlist",Tk.BEGIN_CHECKOUT="begin_checkout",Tk.CHECKOUT_PROGRESS="checkout_progress",Tk.EXCEPTION="exception",Tk.GENERATE_LEAD="generate_lead",Tk.LOGIN="login",Tk.PAGE_VIEW="page_view",Tk.PURCHASE="purchase",Tk.REFUND="refund",Tk.REMOVE_FROM_CART="remove_from_cart",Tk.SCREEN_VIEW="screen_view",Tk.SEARCH="search",Tk.SELECT_CONTENT="select_content",Tk.SELECT_ITEM="select_item",Tk.SELECT_PROMOTION="select_promotion",Tk.SET_CHECKOUT_OPTION="set_checkout_option",Tk.SHARE="share",Tk.SIGN_UP="sign_up",Tk.TIMING_COMPLETE="timing_complete",Tk.VIEW_CART="view_cart",Tk.VIEW_ITEM="view_item",Tk.VIEW_ITEM_LIST="view_item_list",Tk.VIEW_PROMOTION="view_promotion",Tk.VIEW_SEARCH_RESULTS="view_search_results";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ek,Sk=new Ee("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(t,e,n,r,i,o){return vt(this,void 0,void 0,(function(){var a,s,u,c;return gt(this,(function(h){switch(h.label){case 0:a=r[i],h.label=1;case 1:return h.trys.push([1,7,,8]),a?[4,e[a]]:[3,3];case 2:return h.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=h.sent(),(u=s.find((function(t){return t.measurementId===i})))?[4,e[u.appId]]:[3,6];case 5:h.sent(),h.label=6;case 6:return[3,8];case 7:return c=h.sent(),Sk.error(c),[3,8];case 8:return t(_k.CONFIG,i,o),[2]}}))}))}function kk(t,e,n,r,i){return vt(this,void 0,void 0,(function(){var o,a,s,u,c,h,l,f;return gt(this,(function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),o=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=p.sent(),u=function(t){var n=s.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,h=a;c<h.length&&(l=h[c],"break"!==u(l));c++);p.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return p.sent(),t(_k.EVENT,r,i||{}),[3,5];case 4:return f=p.sent(),Sk.error(f),[3,5];case 5:return[2]}}))}))}function Ak(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,a){return vt(this,void 0,void 0,(function(){var s;return gt(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==_k.EVENT?[3,2]:[4,kk(t,e,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==_k.CONFIG?[3,4]:[4,Ck(t,e,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:t(_k.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),Sk.error(s),[3,7];case 7:return[2]}}))}))}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}var Nk=((Ek={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Ek["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Ek["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Ek["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Ek["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Ek["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Ek["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Ek["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Ek["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Ek),Rk=new Bt("analytics","Analytics",Nk),Pk=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function xk(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function Ok(t){var e;return vt(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return gt(this,(function(c){switch(c.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:xk(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(a=c.sent()).status||304===a.status)return[3,6];s="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,a.json()];case 3:return u=c.sent(),(null===(e=u.error)||void 0===e?void 0:e.message)&&(s=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw Rk.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s});case 6:return[2,a.json()]}}))}))}function Dk(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=Pk),vt(this,void 0,void 0,(function(){var e,a,s,u,c,h,l;return gt(this,(function(f){switch(f.label){case 0:e=t.appId,a=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Lk(n,i)];case 2:return f.sent(),[3,4];case 3:if(s=f.sent(),a)return Sk.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:e,measurementId:a}];throw s;case 4:return f.trys.push([4,6,,7]),[4,Ok(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof Vt&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=f.sent())){if(r.deleteThrottleMetadata(e),a)return Sk.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:a}];throw c}return h=503===Number(c.customData.httpStatus)?ce(o,r.intervalMillis,30):ce(o,r.intervalMillis),l={throttleEndTimeMillis:Date.now()+h,backoffCount:o+1},r.setThrottleMetadata(e,l),Sk.debug("Calling attemptFetch again in "+h+" millis"),[2,Dk(t,l,n,r)];case 7:return[2]}}))}))}function Lk(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(Rk.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var Mk=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(t,e,n,r,i,o){return vt(this,void 0,void 0,(function(){var a,s,u,c,h,l,f;return gt(this,(function(p){switch(p.label){case 0:return a=function(t,e,n){return void 0===e&&(e=Pk),vt(this,void 0,void 0,(function(){var r,i,o,a,s,u,c=this;return gt(this,(function(h){if(r=t.options,i=r.appId,o=r.apiKey,a=r.measurementId,!i)throw Rk.create("no-app-id");if(!o){if(a)return[2,{measurementId:a,appId:i}];throw Rk.create("no-api-key")}return s=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new Mk,setTimeout((function(){return vt(c,void 0,void 0,(function(){return gt(this,(function(t){return u.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,Dk({appId:i,apiKey:o,measurementId:a},s,u,e)]}))}))}(t),a.then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Sk.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return Sk.error(t)})),e.push(a),s=function(){return vt(this,void 0,void 0,(function(){var t;return gt(this,(function(e){switch(e.label){case 0:return jt()?[3,1]:(Sk.warn(Rk.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Ut()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),Sk.warn(Rk.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([a,s])];case 1:return u=p.sent(),c=u[0],h=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes("https://www.googletagmanager.com/gtag/js"))return r}return null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()||function(t,e){var n=document.createElement("script");n.src="https://www.googletagmanager.com/gtag/js?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,l=f,null!=h&&(l.firebase_id=h),i(_k.CONFIG,c.measurementId,l),[2,c.measurementId]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jk,Uk,qk={},Vk=[],Bk={},Kk="dataLayer",Hk="gtag",Wk=!1;function zk(t){if(Wk)throw Rk.create("already-initialized");t.dataLayerName&&(Kk=t.dataLayerName),t.gtagName&&(Hk=t.gtagName)}function Gk(t,e){!function(){var t=[];if(Lt()&&t.push("This is a browser extension environment."),qt()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=Rk.create("invalid-analytics-context",{errorInfo:e});Sk.warn(n.message)}}();var n,r,i=t.options.appId;if(!i)throw Rk.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Rk.create("no-api-key");Sk.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=qk[i])throw Rk.create("already-exists",{id:i});if(!Wk){n=Kk,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r;var o=Ak(qk,Vk,Bk,Kk,Hk),a=o.wrappedGtag,s=o.gtagCore;Uk=a,jk=s,Wk=!0}qk[i]=Fk(t,Vk,Bk,e,jk,Kk);var u={app:t,logEvent:function(t,e,n){(
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e,n,r,i){return vt(this,void 0,void 0,(function(){var o,a;return gt(this,(function(s){switch(s.label){case 0:return i&&i.global?(t(_k.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=s.sent(),a=dt(dt({},r),{send_to:o}),t(_k.EVENT,n,a),s.label=3;case 3:return[2]}}))}))})(Uk,qk[i],t,e,n).catch((function(t){return Sk.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return vt(this,void 0,void 0,(function(){var i;return gt(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(_k.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(_k.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(Uk,qk[i],t,e).catch((function(t){return Sk.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return vt(this,void 0,void 0,(function(){var i;return gt(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(_k.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(_k.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(Uk,qk[i],t,e).catch((function(t){return Sk.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return vt(this,void 0,void 0,(function(){var i,o,a,s,u;return gt(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return t(_k.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(_k.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(Uk,qk[i],t,e).catch((function(t){return Sk.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return vt(this,void 0,void 0,(function(){var n;return gt(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(qk[i],t).catch((function(t){return Sk.error(t)}))},INTERNAL:{delete:function(){return delete qk[i],Promise.resolve()}}};return u}function Qk(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){switch(t.label){case 0:if(Lt())return[2,!1];if(!qt())return[2,!1];if(!jt())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Ut()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t.INTERNAL.registerComponent(new le("analytics",(function(t){return Gk(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:zk,EventName:Ik,isSupported:Qk})),t.INTERNAL.registerComponent(new le("analytics-internal",(function(t){try{return{logEvent:t.getProvider("analytics").getImmediate().logEvent}}catch(t){throw Rk.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.14")}(Ve);var $k,Yk=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return vt(this,void 0,void 0,(function(){var e,n,r,i,o;return gt(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=a.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},t}(),Xk=(($k={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",$k["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",$k["registration-api-key"]="Undefined API key. Check Firebase app initialization.",$k["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",$k["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",$k["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",$k["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",$k["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",$k["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",$k["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',$k["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',$k["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",$k["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",$k),Jk=new Bt("remoteconfig","Remote Config",Xk);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Zk=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return vt(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,h,l,f,p,d,v,g,m,y,b;return gt(this,(function(_){switch(_.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=_.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===w&&(w=navigator),w.languages&&w.languages[0]||w.language)},u={method:"POST",headers:a,body:JSON.stringify(s)},c=fetch(o,u),h=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),_.label=2;case 2:return _.trys.push([2,5,,6]),[4,Promise.race([c,h])];case 3:return _.sent(),[4,c];case 4:return l=_.sent(),[3,6];case 5:throw f=_.sent(),p="fetch-client-network","AbortError"===f.name&&(p="fetch-timeout"),Jk.create(p,{originalErrorMessage:f.message});case 6:if(d=l.status,v=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];y=void 0,_.label=7;case 7:return _.trys.push([7,9,,10]),[4,l.json()];case 8:return y=_.sent(),[3,10];case 9:throw b=_.sent(),Jk.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:g=y.entries,m=y.state,_.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===m?d=500:"NO_CHANGE"===m?d=304:"NO_TEMPLATE"!==m&&"EMPTY_CONFIG"!==m||(g={}),304!==d&&200!==d)throw Jk.create("fetch-status",{httpStatus:d});return[2,{status:d,eTag:v,config:g}]}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var w}))}))},t}(),tA=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),eA=["1","true","t","yes","y","on"],nA=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&eA.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),rA=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=ge.DEBUG;break;case"silent":this._logger.logLevel=ge.SILENT;break;default:this._logger.logLevel=ge.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return vt(this,void 0,void 0,(function(){var t,e,n;return gt(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return vt(this,void 0,void 0,(function(){var t,e,n,r=this;return gt(this,(function(i){switch(i.label){case 0:t=new tA,setTimeout((function(){return vt(r,void 0,void 0,(function(){return gt(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof Vt&&-1!==t.code.indexOf(e)}(e,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(dt(dt({},t),e))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new nA("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new nA("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new nA("static"))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(t,e){var n=t.target.error||void 0;return Jk.create(e,{originalErrorMessage:n&&n.message})}var oA=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(iA(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return vt(this,void 0,void 0,(function(){var e,n=this;return gt(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),a=n.createCompositeKey(t);try{var s=o.get(a);s.onerror=function(t){i(iA(t,"storage-get"))},s.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(t){i(Jk.create("storage-get",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.set=function(t,e){return vt(this,void 0,void 0,(function(){var n,r=this;return gt(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),s=r.createCompositeKey(t);try{var u=a.put({compositeKey:s,value:e});u.onerror=function(t){o(iA(t,"storage-set"))},u.onsuccess=function(){i()}}catch(t){o(Jk.create("storage-set",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.delete=function(t){return vt(this,void 0,void 0,(function(){var e,n=this;return gt(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),a=n.createCompositeKey(t);try{var s=o.delete(a);s.onerror=function(t){i(iA(t,"storage-delete"))},s.onsuccess=function(){r()}}catch(t){i(Jk.create("storage-delete",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),aA=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return vt(this,void 0,void 0,(function(){var t,e,n,r,i,o;return gt(this,(function(a){switch(a.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=a.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=a.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=a.sent())&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function sA(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(Jk.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var uA,cA=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return vt(this,void 0,void 0,(function(){var e,i,o;return gt(this,(function(a){switch(a.label){case 0:return[4,sA(t.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof Vt&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=a.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+ce(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}();function hA(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(uA=Ve).INTERNAL.registerComponent(new le("remoteConfig",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw Jk.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw Jk.create("registration-project-id");if(!s)throw Jk.create("registration-api-key");if(!u)throw Jk.create("registration-app-id");n=n||"firebase";var c=new oA(u,r.name,n),h=new aA(c),l=new Ee("@firebase/remote-config");l.logLevel=ge.ERROR;var f=new Zk(i,uA.SDK_VERSION,n,a,s,u),p=new cA(f,c),d=new Yk(p,c,h,l),v=new rA(r,d,h,c,l);return v.ensureInitialized(),v}),"PUBLIC").setMultipleInstances(!0)),uA.registerVersion("@firebase/remote-config","0.1.41");var lA,fA=hA(lt),pA=((lA={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",lA["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",lA["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",lA["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",lA["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",lA["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",lA["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",lA["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",lA["recaptcha-error"]="ReCAPTCHA error.",lA),dA=new Bt("appCheck","AppCheck",pA),vA=new Map,gA={activated:!1,tokenObservers:[]},mA={enabled:!1};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t){return vA.get(t)||gA}function bA(t,e){vA.set(t,e)}function _A(){return mA}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(){return self.grecaptcha}function IA(t){if(!yA(t).activated)throw dA.create("use-before-activation",{appName:t.name})}function TA(t,e){var n=yA(t),r=new Rt;bA(t,dt(dt({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,o=document.createElement("div");o.id=i,o.style.display="none",document.body.appendChild(o);var a,s,u=wA();return u?u.ready((function(){SA(t,e,u,i),r.resolve(u)})):(a=function(){var n=wA();if(!n)throw new Error("no recaptcha");n.ready((function(){SA(t,e,n,i),r.resolve(n)}))},(s=document.createElement("script")).src="https://www.google.com/recaptcha/api.js",s.onload=a,document.head.appendChild(s)),r.promise}function EA(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return IA(t),[4,yA(t).reCAPTCHAState.initialized.promise];case 1:return e=n.sent(),[2,new Promise((function(n,r){var i=yA(t).reCAPTCHAState;e.ready((function(){n(e.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function SA(t,e,n,r){var i=n.render(r,{sitekey:e,size:"invisible"}),o=yA(t);bA(t,dt(dt({},o),{reCAPTCHAState:dt(dt({},o.reCAPTCHAState),{widgetId:i})}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var CA=3e4,kA=96e4,AA=function(){function t(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return t.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},t.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},t.prototype.isRunning=function(){return!!this.pending},t.prototype.process=function(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new Rt,[4,(r=this.getNextRun(t),new Promise((function(t){setTimeout(t,r)})))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new Rt,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}var r;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))},t.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},t}();function NA(t,e){var n=t.url,r=t.body;return vt(this,void 0,void 0,(function(){var t,i,o,a,s,u,c,h,l,f;return gt(this,(function(p){switch(p.label){case 0:t={"Content-Type":"application/json"},(i=e.getImmediate({optional:!0}))&&(t["X-Firebase-Client"]=i.getPlatformInfoString()),o={method:"POST",body:JSON.stringify(r),headers:t},p.label=1;case 1:return p.trys.push([1,3,,4]),[4,fetch(n,o)];case 2:return a=p.sent(),[3,4];case 3:throw s=p.sent(),dA.create("fetch-network-error",{originalErrorMessage:s.message});case 4:if(200!==a.status)throw dA.create("fetch-status-error",{httpStatus:a.status});p.label=5;case 5:return p.trys.push([5,7,,8]),[4,a.json()];case 6:return u=p.sent(),[3,8];case 7:throw c=p.sent(),dA.create("fetch-parse-error",{originalErrorMessage:c.message});case 8:if(!(h=u.ttl.match(/^([\d.]+)(s)$/))||!h[2]||isNaN(Number(h[1])))throw dA.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+u.ttl});return l=1e3*Number(h[1]),f=Date.now(),[2,{token:u.attestationToken,expireTimeMillis:f+l,issuedAtTimeMillis:f}]}}))}))}function RA(t,e){var n=t.options;return{url:"https://content-firebaseappcheck.googleapis.com/v1beta/projects/"+n.projectId+"/apps/"+n.appId+":exchangeRecaptchaToken?key="+n.apiKey,body:{recaptcha_token:e}}}function PA(t,e){var n=t.options;return{url:"https://content-firebaseappcheck.googleapis.com/v1beta/projects/"+n.projectId+"/apps/"+n.appId+":exchangeDebugToken?key="+n.apiKey,body:{debug_token:e}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xA=null;function OA(){return xA||(xA=new Promise((function(t,e){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){var n;e(dA.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(t){var e=t.target.result;if(0===t.oldVersion)e.createObjectStore("firebase-app-check-store",{keyPath:"compositeKey"})}}catch(t){e(dA.create("storage-open",{originalErrorMessage:t.message}))}})),xA)}function DA(t){return MA(FA(t))}function LA(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o;return gt(this,(function(a){switch(a.label){case 0:return[4,OA()];case 1:return n=a.sent(),r=n.transaction("firebase-app-check-store","readwrite"),i=r.objectStore("firebase-app-check-store"),o=i.put({compositeKey:t,value:e}),[2,new Promise((function(t,e){o.onsuccess=function(e){t()},r.onerror=function(t){var n;e(dA.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function MA(t){return vt(this,void 0,void 0,(function(){var e,n,r,i;return gt(this,(function(o){switch(o.label){case 0:return[4,OA()];case 1:return e=o.sent(),n=e.transaction("firebase-app-check-store","readonly"),r=n.objectStore("firebase-app-check-store"),i=r.get(t),[2,new Promise((function(t,e){i.onsuccess=function(e){var n=e.target.result;t(n?n.value:void 0)},n.onerror=function(t){var n;e(dA.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function FA(t){return t.options.appId+"-"+t.name}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jA=new Ee("@firebase/app-check");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t){return vt(this,void 0,void 0,(function(){var e,n;return gt(this,(function(r){switch(r.label){case 0:if(!jt())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,DA(t)];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),jA.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}}))}))}function qA(t,e){return jt()?function(t,e){return LA(FA(t),e)}(t,e).catch((function(t){jA.warn("Failed to write token to indexeddb. Error: "+t)})):Promise.resolve()}function VA(){return vt(this,void 0,void 0,(function(){var t,e;return gt(this,(function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,MA("debug-token")];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?[2,t]:(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),(r=e,LA("debug-token",r)).catch((function(t){return jA.warn("Failed to persist debug token to indexeddb. Error: "+t)})),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}var r}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){return vt(this,void 0,void 0,(function(){var t;return gt(this,(function(e){if((t=_A()).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var KA={error:"UNKNOWN_ERROR"};function HA(t){return Ct.encodeString(JSON.stringify(t),!1)}function WA(t,e,n){return void 0===n&&(n=!1),vt(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,h,l,f,p,d,v,g;return gt(this,(function(m){switch(m.label){case 0:return IA(t),r=yA(t),i=r.token,o=void 0,i?[3,2]:[4,UA(t)];case 1:(a=m.sent())&&$A(a)&&(i=a,bA(t,dt(dt({},r),{token:i})),QA(t,{token:i.token})),m.label=2;case 2:return!n&&i&&$A(i)?[2,{token:i.token}]:_A().enabled?(u=NA,c=PA,h=[t],[4,BA()]):[3,6];case 3:return[4,u.apply(void 0,[c.apply(void 0,h.concat([m.sent()])),e])];case 4:return s=m.sent(),[4,qA(t,s)];case 5:return m.sent(),bA(t,dt(dt({},r),{token:s})),[2,{token:s.token}];case 6:return m.trys.push([6,12,,13]),r.customProvider?[4,r.customProvider.getToken()]:[3,8];case 7:return l=m.sent(),f=function(t){var e=Gt(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null}(l.token),p=null!==f&&f<Date.now()&&f>0?1e3*f:Date.now(),i=dt(dt({},l),{issuedAtTimeMillis:p}),[3,11];case 8:return[4,EA(t).catch((function(t){throw dA.create("recaptcha-error")}))];case 9:return d=m.sent(),[4,NA(RA(t,d),e)];case 10:i=m.sent(),m.label=11;case 11:return[3,13];case 12:return v=m.sent(),jA.error(v),o=v,[3,13];case 13:return i?[3,14]:(g=function(t){return{token:HA(KA),error:t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(o),[3,16]);case 14:return g={token:i.token},bA(t,dt(dt({},r),{token:i})),[4,qA(t,i)];case 15:m.sent(),m.label=16;case 16:return QA(t,g),[2,g]}}))}))}function zA(t,e,n,r,i){var o=yA(t),a={next:r,error:i,type:n},s=dt(dt({},o),{tokenObservers:bt(bt([],o.tokenObservers),[a])});if(!s.tokenRefresher){var u=function(t,e){var n=this;return new AA((function(){return vt(n,void 0,void 0,(function(){var n;return gt(this,(function(r){switch(r.label){case 0:return yA(t).token?[3,2]:[4,WA(t,e)];case 1:return n=r.sent(),[3,4];case 2:return[4,WA(t,e,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}}))}))}),(function(){return!0}),(function(){var e=yA(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5,r=e.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),CA,kA)}(t,e);s.tokenRefresher=u}if(s.tokenRefresher.isRunning()||!0!==o.isTokenAutoRefreshEnabled||s.tokenRefresher.start(),o.token&&$A(o.token)){var c=o.token;Promise.resolve().then((function(){return r({token:c.token})})).catch((function(){}))}bA(t,s)}function GA(t,e){var n=yA(t),r=n.tokenObservers.filter((function(t){return t.next!==e}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),bA(t,dt(dt({},n),{tokenObservers:r}))}function QA(t,e){for(var n=0,r=yA(t).tokenObservers;n<r.length;n++){var i=r[n];try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(t){}}}function $A(t){return t.expireTimeMillis-Date.now()>0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function YA(t,e){return{app:t,activate:function(e,n){return function(t,e,n){var r=yA(t);if(r.activated)throw dA.create("already-activated",{appName:t.name});var i=dt(dt({},r),{activated:!0});"string"==typeof e?i.siteKey=e:i.customProvider=e,i.isTokenAutoRefreshEnabled=void 0===n?t.automaticDataCollectionEnabled:n,bA(t,i),i.siteKey&&TA(t,i.siteKey).catch((function(){}))}(t,e,n)},setTokenAutoRefreshEnabled:function(e){return function(t,e){var n=yA(t);n.tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),bA(t,dt(dt({},n),{isTokenAutoRefreshEnabled:e}))}(t,e)},getToken:function(n){return function(t,e,n){return vt(this,void 0,void 0,(function(){var r;return gt(this,(function(i){switch(i.label){case 0:return[4,WA(t,e,n)];case 1:if((r=i.sent()).error)throw r.error;return[2,{token:r.token}]}}))}))}(t,e,n)},onTokenChanged:function(n,r,i){return function(t,e,n,r,i){var o=function(){},a=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?a=n.error.bind(n):r&&(a=r),zA(t,e,"EXTERNAL",o,a),function(){return GA(t,o)}}(t,e,n,r)},INTERNAL:{delete:function(){for(var e=0,n=yA(t).tokenObservers;e<n.length;e++){var r=n[e];GA(t,r.next)}return Promise.resolve()}}}}!function(t){t.INTERNAL.registerComponent(new le("appCheck",(function(t){return YA(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(t,e,n){t.getProvider("app-check-internal").initialize()}))),t.INTERNAL.registerComponent(new le("app-check-internal",(function(t){return function(t,e){return{getToken:function(n){return WA(t,e,n)},addTokenListener:function(n){return zA(t,e,"INTERNAL",n)},removeTokenListener:function(e){return GA(t,e)}}}(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT")),t.registerVersion("@firebase/app-check","0.2.0")}(fA.default),function(){var e=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("Unable to locate global object.")}();if("string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===e.FIREBASE_APPCHECK_DEBUG_TOKEN){var n=_A();n.enabled=!0;var r=new Rt;n.token=r,"string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?r.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):r.resolve(VA())}}();
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Ve.registerVersion("firebase","8.7.1","app"),Ve.SDK_VERSION="8.7.1";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),Ve.registerVersion("firebase","8.7.1");const XA=Ve.initializeApp({apiKey:"zQVlVlotseEi0sRHb3zT7J0RoFDn1LeushqODMiq",databaseURL:"https://apx-dwf-m6-arielgol-default-rtdb.firebaseio.com/",projectId:"apx-dwf-m6-arielgol",authDomain:"apx-dwf-m6-arielgol.firebaseapp.com"}).database();var JA,ZA={};ZA=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i};var tN,eN={},nN={},rN={},iN={},oN={};tN=function(){this.__data__=[],this.size=0};var aN,sN={},uN={};uN=function(t,e){return t===e||t!=t&&e!=e},sN=function(t,e){for(var n=t.length;n--;)if(uN(t[n][0],e))return n;return-1};var cN=Array.prototype.splice;aN=function(t){var e=this.__data__,n=sN(e,t);return!(n<0)&&(n==e.length-1?e.pop():cN.call(e,n,1),--this.size,!0)};var hN;hN=function(t){var e=this.__data__,n=sN(e,t);return n<0?void 0:e[n][1]};var lN;lN=function(t){return sN(this.__data__,t)>-1};var fN;function pN(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}fN=function(t,e){var n=this.__data__,r=sN(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},pN.prototype.clear=tN,pN.prototype.delete=aN,pN.prototype.get=hN,pN.prototype.has=lN,pN.prototype.set=fN,oN=pN;var dN;dN=function(){this.__data__=new oN,this.size=0};var vN;vN=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var gN;gN=function(t){return this.__data__.get(t)};var mN;mN=function(t){return this.__data__.has(t)};var yN,bN,_N={},wN={},IN={},TN={},EN={};bN=o("23YZo").Symbol;var SN={},CN=Object.prototype,kN=CN.hasOwnProperty,AN=CN.toString,NN=bN?bN.toStringTag:void 0;SN=function(t){var e=kN.call(t,NN),n=t[NN];try{t[NN]=void 0;var r=!0}catch(t){}var i=AN.call(t);return r&&(e?t[NN]=n:delete t[NN]),i};var RN={},PN=Object.prototype.toString;RN=function(t){return PN.call(t)};var xN=bN?bN.toStringTag:void 0;EN=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":xN&&xN in Object(t)?SN(t):RN(t)};var ON={};ON=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};TN=function(t){if(!ON(t))return!1;var e=EN(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};var DN,LN,MN={},FN=o("23YZo")["__core-js_shared__"],jN=(LN=/[^.]+$/.exec((DN=FN)&&DN.keys&&DN.keys.IE_PROTO||""))?"Symbol(src)_1."+LN:"";MN=function(t){return!!jN&&jN in t};var UN={},qN=Function.prototype.toString;UN=function(t){if(null!=t){try{return qN.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var VN=/^\[object .+?Constructor\]$/,BN=Function.prototype,KN=Object.prototype,HN=BN.toString,WN=KN.hasOwnProperty,zN=RegExp("^"+HN.call(WN).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");IN=function(t){return!(!ON(t)||MN(t))&&(TN(t)?zN:VN).test(UN(t))};var GN={};GN=function(t,e){return null==t?void 0:t[e]};var QN=(wN=function(t,e){var n=GN(t,e);return IN(n)?n:void 0})(o("23YZo"),"Map");_N=QN;var $N,YN,XN={},JN={},ZN={},tR=wN(Object,"create");ZN=tR,YN=function(){this.__data__=ZN?ZN(null):{},this.size=0};var eR;eR=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e};var nR,rR=Object.prototype.hasOwnProperty;nR=function(t){var e=this.__data__;if(ZN){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return rR.call(e,t)?e[t]:void 0};var iR,oR=Object.prototype.hasOwnProperty;iR=function(t){var e=this.__data__;return ZN?void 0!==e[t]:oR.call(e,t)};var aR;function sR(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}aR=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ZN&&void 0===e?"__lodash_hash_undefined__":e,this},sR.prototype.clear=YN,sR.prototype.delete=eR,sR.prototype.get=nR,sR.prototype.has=iR,sR.prototype.set=aR,JN=sR,$N=function(){this.size=0,this.__data__={hash:new JN,map:new(_N||oN),string:new JN}};var uR,cR={},hR={};hR=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t},cR=function(t,e){var n=t.__data__;return hR(e)?n["string"==typeof e?"string":"hash"]:n.map},uR=function(t){var e=cR(this,t).delete(t);return this.size-=e?1:0,e};var lR;lR=function(t){return cR(this,t).get(t)};var fR;fR=function(t){return cR(this,t).has(t)};var pR;function dR(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}pR=function(t,e){var n=cR(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},dR.prototype.clear=$N,dR.prototype.delete=uR,dR.prototype.get=lR,dR.prototype.has=fR,dR.prototype.set=pR,XN=dR;function vR(t){var e=this.__data__=new oN(t);this.size=e.size}yN=function(t,e){var n=this.__data__;if(n instanceof oN){var r=n.__data__;if(!_N||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new XN(r)}return n.set(t,e),this.size=n.size,this},vR.prototype.clear=dN,vR.prototype.delete=vN,vR.prototype.get=gN,vR.prototype.has=mN,vR.prototype.set=yN,iN=vR;var gR,mR={},yR={},bR={},_R={};gR=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var wR;function IR(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new XN;++e<n;)this.add(t[e])}wR=function(t){return this.__data__.has(t)},IR.prototype.add=IR.prototype.push=gR,IR.prototype.has=wR,_R=IR;var TR={};TR=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1};var ER={};ER=function(t,e){return t.has(e)};bR=function(t,e,n,r,i,o){var a=1&n,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t),h=o.get(e);if(c&&h)return c==e&&h==t;var l=-1,f=!0,p=2&n?new _R:void 0;for(o.set(t,e),o.set(e,t);++l<s;){var d=t[l],v=e[l];if(r)var g=a?r(v,d,l,e,t,o):r(d,v,l,t,e,o);if(void 0!==g){if(g)continue;f=!1;break}if(p){if(!TR(e,(function(t,e){if(!ER(p,e)&&(d===t||i(d,t,n,r,o)))return p.push(e)}))){f=!1;break}}else if(d!==v&&!i(d,v,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f};var SR={},CR={},kR=o("23YZo").Uint8Array;CR=kR;var AR;AR=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n};var NR;NR=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n};var RR=bN?bN.prototype:void 0,PR=RR?RR.valueOf:void 0;SR=function(t,e,n,r,i,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new CR(t),new CR(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return uN(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=AR;case"[object Set]":var u=1&r;if(s||(s=NR),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=2,a.set(t,e);var h=bR(s(t),s(e),r,i,o,a);return a.delete(t),h;case"[object Symbol]":if(PR)return PR.call(t)==PR.call(e)}return!1};var xR={},OR={},DR={},LR={};LR=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t};var MR={},FR=Array.isArray;MR=FR,DR=function(t,e,n){var r=e(t);return MR(t)?r:LR(r,n(t))};var jR,UR={};UR=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o};var qR;qR=function(){return[]};var VR=Object.prototype.propertyIsEnumerable,BR=Object.getOwnPropertySymbols;jR=BR?function(t){return null==t?[]:(t=Object(t),UR(BR(t),(function(e){return VR.call(t,e)})))}:qR;var KR={},HR={},WR={};WR=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var zR={},GR={},QR={};QR=function(t){return null!=t&&"object"==typeof t};GR=function(t){return QR(t)&&"[object Arguments]"==EN(t)};var $R=Object.prototype,YR=$R.hasOwnProperty,XR=$R.propertyIsEnumerable,JR=GR(function(){return arguments}())?GR:function(t){return QR(t)&&YR.call(t,"callee")&&!XR.call(t,"callee")};zR=JR;var ZR=o("f504n"),tP={},eP=/^(?:0|[1-9]\d*)$/;tP=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&eP.test(t))&&t>-1&&t%1==0&&t<e};var nP,rP={},iP={};iP=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var oP={};oP["[object Float32Array]"]=oP["[object Float64Array]"]=oP["[object Int8Array]"]=oP["[object Int16Array]"]=oP["[object Int32Array]"]=oP["[object Uint8Array]"]=oP["[object Uint8ClampedArray]"]=oP["[object Uint16Array]"]=oP["[object Uint32Array]"]=!0,oP["[object Arguments]"]=oP["[object Array]"]=oP["[object ArrayBuffer]"]=oP["[object Boolean]"]=oP["[object DataView]"]=oP["[object Date]"]=oP["[object Error]"]=oP["[object Function]"]=oP["[object Map]"]=oP["[object Number]"]=oP["[object Object]"]=oP["[object RegExp]"]=oP["[object Set]"]=oP["[object String]"]=oP["[object WeakMap]"]=!1,nP=function(t){return QR(t)&&iP(t.length)&&!!oP[EN(t)]};var aP={};aP=function(t){return function(e){return t(e)}};var sP=o("jIny1"),uP=sP&&sP.isTypedArray,cP=uP?aP(uP):nP;rP=cP;var hP=Object.prototype.hasOwnProperty;HR=function(t,e){var n=MR(t),r=!n&&zR(t),i=!n&&!r&&ZR(t),o=!n&&!r&&!i&&rP(t),a=n||r||i||o,s=a?WR(t.length,String):[],u=s.length;for(var c in t)!e&&!hP.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||tP(c,u))||s.push(c);return s};var lP={},fP={},pP=Object.prototype;fP=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||pP)};var dP={};var vP=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object);dP=vP;var gP=Object.prototype.hasOwnProperty;lP=function(t){if(!fP(t))return dP(t);var e=[];for(var n in Object(t))gP.call(t,n)&&"constructor"!=n&&e.push(n);return e};var mP={};mP=function(t){return null!=t&&iP(t.length)&&!TN(t)},KR=function(t){return mP(t)?HR(t):lP(t)},OR=function(t){return DR(t,KR,jR)};var yP=Object.prototype.hasOwnProperty;xR=function(t,e,n,r,i,o){var a=1&n,s=OR(t),u=s.length;if(u!=OR(e).length&&!a)return!1;for(var c=u;c--;){var h=s[c];if(!(a?h in e:yP.call(e,h)))return!1}var l=o.get(t),f=o.get(e);if(l&&f)return l==e&&f==t;var p=!0;o.set(t,e),o.set(e,t);for(var d=a;++c<u;){var v=t[h=s[c]],g=e[h];if(r)var m=a?r(g,v,h,e,t,o):r(v,g,h,t,e,o);if(!(void 0===m?v===g||i(v,g,n,r,o):m)){p=!1;break}d||(d="constructor"==h)}if(p&&!d){var y=t.constructor,b=e.constructor;y==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return o.delete(t),o.delete(e),p};var bP={},_P={};_P=wN(o("23YZo"),"DataView");var wP={};wP=wN(o("23YZo"),"Promise");var IP={};IP=wN(o("23YZo"),"Set");var TP={};TP=wN(o("23YZo"),"WeakMap");var EP=UN(_P),SP=UN(_N),CP=UN(wP),kP=UN(IP),AP=UN(TP),NP=EN;(_P&&"[object DataView]"!=NP(new _P(new ArrayBuffer(1)))||_N&&"[object Map]"!=NP(new _N)||wP&&"[object Promise]"!=NP(wP.resolve())||IP&&"[object Set]"!=NP(new IP)||TP&&"[object WeakMap]"!=NP(new TP))&&(NP=function(t){var e=EN(t),n="[object Object]"==e?t.constructor:void 0,r=n?UN(n):"";if(r)switch(r){case EP:return"[object DataView]";case SP:return"[object Map]";case CP:return"[object Promise]";case kP:return"[object Set]";case AP:return"[object WeakMap]"}return e}),bP=NP;ZR=o("f504n");var RP=Object.prototype.hasOwnProperty;yR=function(t,e,n,r,i,o){var a=MR(t),s=MR(e),u=a?"[object Array]":bP(t),c=s?"[object Array]":bP(e),h="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),l="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),f=u==c;if(f&&ZR(t)){if(!ZR(e))return!1;a=!0,h=!1}if(f&&!h)return o||(o=new iN),a||rP(t)?bR(t,e,n,r,i,o):SR(t,e,u,n,r,i,o);if(!(1&n)){var p=h&&RP.call(t,"__wrapped__"),d=l&&RP.call(e,"__wrapped__");if(p||d){var v=p?t.value():t,g=d?e.value():e;return o||(o=new iN),i(v,g,n,r,o)}}return!!f&&(o||(o=new iN),xR(t,e,n,r,i,o))},mR=function t(e,n,r,i,o){return e===n||(null==e||null==n||!QR(e)&&!QR(n)?e!=e&&n!=n:yR(e,n,r,i,t,o))};rN=function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var u=(s=n[i])[0],c=t[u],h=s[1];if(a&&s[2]){if(void 0===c&&!(u in t))return!1}else{var l=new iN;if(r)var f=r(c,h,u,t,e,l);if(!(void 0===f?mR(h,c,3,r,l):f))return!1}}return!0};var PP={},xP={};xP=function(t){return t==t&&!ON(t)},PP=function(t){for(var e=KR(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,xP(i)]}return e};var OP={};OP=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}},nN=function(t){var e=PP(t);return 1==e.length&&e[0][2]?OP(e[0][0],e[0][1]):function(n){return n===t||rN(n,t,e)}};var DP={},LP={},MP={},FP={},jP={},UP={};UP=function(t){return"symbol"==typeof t||QR(t)&&"[object Symbol]"==EN(t)};var qP=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,VP=/^\w*$/;jP=function(t,e){if(MR(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!UP(t))||(VP.test(t)||!qP.test(t)||null!=e&&t in Object(e))};var BP={},KP={};function HP(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(HP.Cache||XN),n}HP.Cache=XN,KP=HP;var WP=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zP=/\\(\\)?/g,GP=function(t){var e=KP(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(WP,(function(t,n,r,i){e.push(r?i.replace(zP,"$1"):n||t)})),e}));BP=GP;var QP={},$P={},YP=bN?bN.prototype:void 0,XP=YP?YP.toString:void 0;$P=function t(e){if("string"==typeof e)return e;if(MR(e))return ZA(e,t)+"";if(UP(e))return XP?XP.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n},QP=function(t){return null==t?"":$P(t)},FP=function(t,e){return MR(t)?t:jP(t,e)?[t]:BP(QP(t))};var JP={};JP=function(t){if("string"==typeof t||UP(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e},MP=function(t,e){for(var n=0,r=(e=FP(e,t)).length;null!=t&&n<r;)t=t[JP(e[n++])];return n&&n==r?t:void 0},LP=function(t,e,n){var r=null==t?void 0:MP(t,e);return void 0===r?n:r};var ZP,tx={};ZP=function(t,e){return null!=t&&e in Object(t)};var ex={};ex=function(t,e,n){for(var r=-1,i=(e=FP(e,t)).length,o=!1;++r<i;){var a=JP(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&iP(i)&&tP(a,i)&&(MR(t)||zR(t))},tx=function(t,e){return null!=t&&ex(t,e,ZP)};DP=function(t,e){return jP(t)&&xP(e)?OP(JP(t),e):function(n){var r=LP(n,t);return void 0===r&&r===e?tx(n,t):mR(e,r,3)}};var nx;nx=function(t){return t};var rx={},ix={};ix=function(t){return function(e){return null==e?void 0:e[t]}};var ox={};ox=function(t){return function(e){return MP(e,t)}},rx=function(t){return jP(t)?ix(JP(t)):ox(t)},eN=function(t){return"function"==typeof t?t:null==t?nx:"object"==typeof t?MR(t)?DP(t[0],t[1]):nN(t):rx(t)};var ax,sx={},ux={};var cx=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}();ux=cx;var hx=function(t,e){return function(n,r){if(null==n)return n;if(!mP(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}((function(t,e){return t&&ux(t,e,KR)}));sx=hx,ax=function(t,e){var n=-1,r=mP(t)?Array(t.length):[];return sx(t,(function(t,i,o){r[++n]=e(t,i,o)})),r},JA=function(t,e){return(MR(t)?ZA:ax)(t,eN(e,3))};const lx={data:{email:"",fullName:"",messages:[],userId:"",roomId:"",rtdbRoomId:""},listeners:[],init(){localStorage.getItem("state")},listenRoom(){const t=this.getState();XA.ref("/rooms/"+t.rtdbRoomId).on("value",(t=>{const n=this.getState(),r=t.val();console.log(r);const i=e(JA)(r.messages);n.messages=i,this.setState(n)}))},getState(){return this.data},setNombre(t){const e=this.getState();console.log(e),e.nombre=t,console.log(e),this.setState(e)},async pushMessage(t){const e=this.data.fullName,n=this.getState();await fetch("http://localhost:3000/messages/"+n.rtdbRoomId,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({from:e,message:t})})},setState(t){this.data=t;for(const t of this.listeners)t();localStorage.setItem("state",JSON.stringify(t)),console.log("Soy el state, he cambiado",this.data)},setEmailAndFullName(t,e){const n=this.getState();n.email=t,n.fullName=e,this.setState(n)},setRoomId(t){const e=this.getState();e.roomId=t,this.setState(e)},signUp(t){const e=this.getState();e.email?fetch("http://localhost:3000/signup",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({email:e.email,fullName:e.fullName})}).then((t=>t.json())).then((n=>{e.userId=n.id,this.setState(e),t()})):(console.error("No hay un email en el state"),t(!0))},signIn(t){const e=this.getState();e.email?fetch("http://localhost:3000/auth",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({email:e.email})}).then((t=>t.json())).then((n=>{e.userId=n.id,this.setState(e),t()})):(console.error("No hay un email en el state"),t(!0))},askNewRoom(t){const e=this.getState();e.userId?fetch("http://localhost:3000/rooms",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({userId:e.userId})}).then((t=>t.json())).then((n=>{e.roomId=n.id,this.setState(e),t&&t()})):console.error("No hay userId")},accessToRoom(t){const e=this.getState(),n=e.roomId;fetch("http://localhost:3000/rooms/"+n+"?userId="+e.userId).then((t=>t.json())).then((n=>{e.rtdbRoomId=n.rtdbRoomId,this.setState(e),this.listenRoom(),t&&t()}))},subscribe(t){this.listeners.push(t)}};class fx extends HTMLElement{connectedCallback(){this.render();const t=this.querySelector(".form").shadowRoot.querySelector(".form"),e=t.querySelector(".input_name"),n=t.querySelector(".input_email"),r=t.querySelector(".select"),i=t.querySelector(".room_content");r.addEventListener("change",(t=>{t.preventDefault();"room existente"===t.target.value?(console.log("room id"),i.style.display="block"):i.style.display="none"})),t.addEventListener("submit",(t=>{t.preventDefault();const r=t.target;let i=e.value,o=n.value,a=r.select.value;if(lx.setEmailAndFullName(o,i),"nuevo room"===a)console.log("crear nuevo room"),this.newRoom();else if("room existente"===a){console.log("room existente");let t=r.room.value;console.log(t),lx.setRoomId(t),this.roomExist()}it.go("/chat")}))}newRoom(){lx.signIn((t=>{t&&console.error("hubo un error en el signIn"),lx.askNewRoom((()=>{lx.accessToRoom()}))}))}roomExist(){lx.signIn((t=>{t&&console.error("hubo un error en el signIn"),lx.accessToRoom()}))}render(){this.innerHTML='\n    <header-el></header-el>\n    <div class="content_welcome">\n    <text-component variant="title">Bienvenido</text-component>\n    <form-component class="form" name="email" nameTwo="nombre" nameThree="select" nameFour="room" label="Email" labelTwo="Tu nombre" labelThree="room" labelFour="room id" button="Comenzar"></form-component>\n    </div>\n    '}}customElements.define("welcome-page",fx);class px extends HTMLElement{connectedCallback(){lx.subscribe((()=>{const t=lx.getState();this.messages=t.messages,this.render()})),this.render()}messages=[];addListeners(){const t=this.querySelector(".submit-message").shadowRoot.querySelector(".form"),e=t.querySelector(".email_content"),n=t.querySelector(".select_content");e.style.display="none",n.style.display="none",t.addEventListener("submit",(t=>{t.preventDefault();const e=t.target;lx.pushMessage(e["new-message"].value)}))}contenedorScroll(){const t=this.querySelector(".messages");t.scrollTop=t.scrollHeight}render(){this.innerHTML=`\n    <header-el></header-el>\n    <div class="chat_page">\n      <div class="title_subtitle">\n        <text-component variant="title">Chat</text-component>\n        <text-component variant="subtitle">room id:${lx.data.roomId}</text-component>\n      </div>\n      <div class="chat-content">\n        <div class="messages">\n          ${this.messages.map((t=>`<text-component class=${t.from===lx.data.fullName?"sent":"receive"} variant="name_sender">${t.from}</text-component>\n            <div class=${t.from===lx.data.fullName?"sent_message":"receive_message"}>\n            <p>${t.message}</p>\n            </div>`)).join("")}\n        </div>\n      <form-component class="submit-message" nameTwo="new-message" labelTwo="" button="Enviar"></form-component>\n    </div>\n    </div>\n    `,this.contenedorScroll(),this.addListeners()}}customElements.define("chat-page",px);new it(document.querySelector(".root")).setRoutes([{path:"/",component:"welcome-page"},{path:"/chat",component:"chat-page"}]),function(){class t extends HTMLElement{constructor(){super(),this.render()}render(){this.style.backgroundColor="#FF8282",this.style.height="60px",this.style.display="flex",this.style.justifyContent="center",this.style.alignItems="center"}}customElements.define("header-el",t)}(),function(){class t extends HTMLElement{constructor(){super(),this.render()}render(){const t=this.getAttribute("variant")||"body",e=this.attachShadow({mode:"open"}),n=document.createElement("div"),r=document.createElement("style");r.innerHTML="\n      .title{\n        font-weight:700;\n        font-size:52px;\n      }\n      .subtitle{\n        font-weight:500;\n        font-size:24px;\n      }\n      .name_sender{\n        font-weight:400;\n        font-size:14px;\n        color: #A5A5A5;\n      }\n      ",n.className=t,n.textContent=this.textContent,e.appendChild(r),e.appendChild(n)}}customElements.define("text-component",t)}(),function(){class t extends HTMLElement{constructor(){super(),this.render()}render(){const t=this.attachShadow({mode:"open"}),e=this.getAttribute("label"),n=this.getAttribute("name"),r=this.getAttribute("labelTwo"),i=this.getAttribute("nameTwo"),o=this.getAttribute("labelThree"),a=this.getAttribute("nameThree"),s=this.getAttribute("labelFour"),u=this.getAttribute("nameFour"),c=this.getAttribute("button"),h=document.createElement("style");h.innerHTML='\n      .form{\n        display:flex;\n        flex-direction:column;\n        gap:5px;\n      }\n      .label{\n        font-weight:500;\n        font-size:24px;\n      }\n      .input{\n        font-size:24px;\n        border:2px solid #000000;\n        font-weight:400;\n        padding: 5px 19px;\n        border-radius:4px;\n        font-family: "Roboto", sans-serif;\n        width: -webkit-fill-available;\n      }\n      .button{\n        background-color:#9CBBE9;\n        font-family: "Roboto", sans-serif;\n        font-weight:500;\n        font-size:22px;\n        border:none;\n        border-radius:4px;\n        width:100%;\n        height:55px;\n      }\n      .room_content{\n        display:none;\n      }\n      ',t.innerHTML=`\n      <form class="form">\n        <div class="email_content">\n          <div>\n            <label class="label">${e}</label>\n          </div>\n          <input class="input input_email" name=${n} type="email" />\n        </div>\n        <div class="name_content">\n          <div>\n            <label class="label">${r}</label>\n          </div>\n          <input class="input input_name" name=${i} type="text" />\n        </div>\n      <div class="select_content">\n        <div>\n          <label class="label">${o}</label>\n        </div>\n        <select class="input select" name=${a}>\n          <option value="">--Elige una opcin--</option>\n          <option value="nuevo room">Nuevo room</option>\n          <option value="room existente">Room existente</option>\n        </select>\n      </div>\n    <div class="room_content">\n      <div>\n        <label class="label">${s}</label>\n      </div>\n      <input class="input input_room" id="room" name=${u} type="text" />\n    </div>   \n          <button class="button">${c}</button>\n      </form>\n      `,t.appendChild(h)}}customElements.define("form-component",t)}(),function(){class t extends HTMLElement{constructor(){super(),this.render()}render(){const t=this.attachShadow({mode:"open"}),e=this.getAttribute("label"),n=this.getAttribute("name"),r=document.createElement("style");r.innerHTML='\n      .select_content{\n        display:flex;\n        flex-direction:column;\n        gap:5px;\n      }\n      .label{\n        font-weight:500;\n        font-size:24px;\n      }\n      .select{\n        font-size:24px;\n        border:2px solid #000000;\n        font-weight:400;\n        padding: 5px 19px;\n        border-radius:4px;\n        font-family: "Roboto", sans-serif;\n        width: -webkit-fill-available;\n      }\n      ',t.innerHTML=`\n        <form class="select_content">\n          <div>\n            <label class="label">${e}</label>\n          </div>\n          <select class="select" name=${n}>\n            <option value="">--Elige una opcin--</option>\n            <option value="nuevo room">Nuevo room</option>\n            <option value="room existente">Room existente</option>\n          </select>\n        </form>\n      `,t.appendChild(r)}}customElements.define("select-component",t)}(),lx.listenRoom();
//# sourceMappingURL=index.c0ab2daa.js.map
